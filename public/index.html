<!DOCTYPE HTML>
<html>
<head>
	<meta name="generator" content="Hugo 0.21" />
	<meta charset="utf-8">
    
    
    <title>凝雨 - Yun</title>
    <meta name="author" content="">
    <meta name="description" content="">
    <meta name="keywords" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link href="https://ningyu1.github.io/site/atom.xml" rel="alternate" title="凝雨 - Yun" type="application/atom+xml">
    <link href="https://ningyu1.github.io/site/images/fav.ico" rel="shortcut icon">
    <style>
    @charset "UTF-8";
@font-face {
  font-family: 'FontAwesome';
  src: url("https://ningyu1.github.io/site/font/fontawesome-webfont.eot");
  src: url("https://ningyu1.github.io/site/font/fontawesome-webfont.eot?#iefix") format("embedded-opentype"),
  url("https://ningyu1.github.io/site/font/fontawesome-webfont.woff") format("woff"),
  url("https://ningyu1.github.io/site/font/fontawesome-webfont.ttf") format("truetype"),
  url("https://ningyu1.github.io/site/font/fontawesome-webfont.svgz#FontAwesomeRegular") format("svg"),
  url("https://ningyu1.github.io/site/font/fontawesome-webfont.svg#FontAwesomeRegular") format("svg");
  font-weight: normal;
  font-style: normal; }

@font-face{
    font-family: 'MyHermit';
    src: url('https://ningyu1.github.io/site/font/hermit-medium-webfont.eot');
    src: url('https://ningyu1.github.io/site/font/hermit-medium-webfont.eot?#iefix') format('embedded-opentype'),
         url('https://ningyu1.github.io/site/font/hermit-medium-webfont.woff') format('woff'),
         url('https://ningyu1.github.io/site/font/hermit-medium-webfont.ttf') format('truetype');
}

* {
  margin: 0;
  padding: 0; }

body {
  font-family: 'PingFang SC', serif;
  font-weight: 300;
  font-size: 16px;
  /*background: url("https://ningyu1.github.io/site/images/retina_dust.png");*/
  color: #444;
  colori: #666666; }
  @media screen and (max-width: 1040px) {
    body {
      margin: 0 20px; } }
  @media screen and (max-width: 600px) {
    body {
      font-size: 13px; } }

.bBackground {
  position: fixed;
  height: 100%;
  width: 100%;
  background: -moz-radial-gradient(50% 50%, farthest-side, white, #efefef);
  background: -webkit-gradient(radial, 50% 50%, 250, 50% 50%, 750, from(white), to(#bbbbbb));
  z-index: -100; }

h1 {
  font-size: 1.8em; }

h2 {
  font-family: 'Fjalla One', sans-serif;
  font-size: 1.5em; }

h3 {
  font-size: 1.3em; }

a {
  text-decoration: none;
  outline-width: 0;
  color: #258fb8; }

.alignleft {
  float: left; }

.alignright {
  float: right; }

.clearfix {
  *zoom: 1; }
  .clearfix:after {
    content: "";
    display: table;
    clear: both; }

.inner {
  width: 900px;
  margin: 0 auto; }
  @media screen and (max-width: 1040px) {
    .inner {
      width: 100%; } }

#w2btoTop {
  display: none;
  text-decoration: none;
  position: fixed;
  bottom: 10px;
  right: 10px;
  overflow: hidden;
  width: 51px;
  height: 51px;
  border: none;
  text-indent: -999px;
  background: url(https://ningyu1.github.io/site/images/totop.png) no-repeat left top; }

#w2btoTopHover {
  background: url(https://ningyu1.github.io/site/images/totop.png) no-repeat left -51px;
  width: 51px;
  height: 51px;
  display: block;
  overflow: hidden;
  float: left;
  opacity: 0;
  -moz-opacity: 0;
  filter: alpha(opacity=0); }

#w2btoTop:active, #w2btoTop:focus {
  outline: none; }

.basic-alignment.left, article .entry-content img.left, article .entry-content video.left {
  float: left;
  margin-right: 1.5em; }
.basic-alignment.right, article .entry-content img.right, article .entry-content video.right {
  float: right;
  margin-left: 1.5em; }
.basic-alignment.center, article .entry-content img.center, article .entry-content video.center {
  display: block;
  margin: 0 auto 1.5em; }
.basic-alignment.left, article .entry-content img.left, article .entry-content video.left, .basic-alignment.right, article .entry-content img.right, article .entry-content video.right {
  margin-bottom: .8em; }

/* changes tooltip, to use, make elements 'class' as 'tooltip' and 'title' would be shown in tooltip */
.tooltip {
  display: inline;
  position: relative; }

.tooltip:hover {
  text-decoration: none; }

.tooltip:hover:after {
  background: #111;
  background: rgba(0, 0, 0, 0.8);
  border-radius: 5px;
  bottom: 18px;
  color: #fff;
  content: attr(title);
  display: block;
  left: 50%;
  padding: 5px 15px;
  position: absolute;
  white-space: nowrap;
  z-index: 98; }

.tooltip:hover:before {
  border: solid;
  border-color: #111 transparent;
  border-width: 6px 6px 0 6px;
  bottom: 12px;
  content: "";
  display: block;
  left: 75%;
  position: absolute;
  z-index: 99; }

.pullquote-right:before,
.pullquote-left:before {
  /* Reset metrics. */
  padding: 0;
  border: none;
  /* Content */
  content: attr(data-pullquote);
  /* Pull out to the right, modular scale based margins. */
  float: right;
  width: 45%;
  margin: .5em 0 1em 1.5em;
  /* Baseline correction */
  position: relative;
  top: 7px;
  font-size: 1.4em;
  line-height: 1.45em; }

.pullquote-left:before {
  /* Make left pullquotes align properly. */
  float: left;
  margin: .5em 1.5em 1em 0; }

#header {
  padding: 20px 0 20px 0; }
  @media screen and (max-width: 1040px) {
    #header {
      height: auto;
      position: relative;
      padding-bottom: 10px; } }
  #header a {
    color: #666666;
    -webkit-transition: compact(compact(color 0.3s, false, false, false, false, false, false, false, false, false) false false);
    -moz-transition: compact(compact(color 0.3s, false, false, false, false, false, false, false, false, false) false false false);
    -o-transition: compact(compact(color 0.3s, false, false, false, false, false, false, false, false, false) false false false);
    transition: compact(color 0.3s, false, false, false, false, false, false, false, false, false); }
    #header a:hover {
      color: #258fb8; }
  #header h1 {
    font-family: 'Slackey', cursive;
    font-weight: 300;
    font-size: 52px; }
    @media screen and (max-width: 1040px) {
      #header h1 {
        float: none; } }

#headerbg {
  text-align: center;
  background: #444;
  padding: 10px 10px;
  display: table;
  color: #fff;
  margin: 0 auto;
  border-radius: 5px;
  font-weight: bold;
  -webkit-mask-image: -webkit-linear-gradient(black, rgba(0, 0, 0, 0.9));
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  -ms-backface-visibility: hidden;
  -o-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-animation-duration: 1s;
  -webkit-animation-delay: .2s;
  -webkit-animation-timing-function: ease;
  -webkit-animation-fill-mode: both;
  -moz-animation-duration: 1s;
  -moz-animation-delay: .2s;
  -moz-animation-timing-function: ease;
  -moz-animation-fill-mode: both;
  -ms-animation-duration: 1s;
  -ms-animation-delay: .2s;
  -ms-animation-timing-function: ease;
  -ms-animation-fill-mode: both;
  -o-animation-duration: 1s;
  -o-animation-delay: .2s;
  -o-animation-timing-function: ease;
  -o-animation-fill-mode: both;
  animation-duration: 1s;
  animation-delay: .2s;
  animation-timing-function: ease;
  animation-fill-mode: both; }

#load {
  display: none;
  position: absolute;
  right: 50%;
  top: 50%;
  background: url("https://ningyu1.github.io/site/images/loading.gif");
  width: 50px;
  height: 50px;
  text-indent: -9999em; }

#social-links li {
  display: inline-block;
  width: 35px;
  height: 35px;
  border-radius: 35px;
  margin-top: 20px;
  margin-right: 9px;
  background-color: #ddd;
  text-align: center;
  line-height: 35px;
  -webkit-transition: compact(compact(background-color 1s ease-in-out, false, false, false, false, false, false, false, false, false) false false);
  -moz-transition: compact(compact(background-color 1s ease-in-out, false, false, false, false, false, false, false, false, false) false false false);
  -o-transition: compact(compact(background-color 1s ease-in-out, false, false, false, false, false, false, false, false, false) false false false);
  transition: compact(background-color 1s ease-in-out, false, false, false, false, false, false, false, false, false); }
  #social-links li:hover {
    background-color: #555; }
#social-links a {
  display: inline-block;
  position: relative;
  width: 100%;
  height: 100%; }
  #social-links a svg {
    position: absolute; }
  #social-links a .github {
    top: 3px;
    left: 2px; }
  #social-links a .sina-weibo {
    top: 8px;
    left: 6px; }
  #social-links a .tencent-weibo {
    top: 6px;
    left: 4px; }
  #social-links a .twitter {
    top: 2px;
    left: 3px; }

a.facebook {
  background: url("https://ningyu1.github.io/site/images/social/Facebook.png") center no-repeat; }

a.facebook:hover {
  background: url("https://ningyu1.github.io/site/images/social/FacebookH.png") center no-repeat; }

a.github {
  background: url("https://ningyu1.github.io/site/images/social/Github.png") center no-repeat; }

a.github:hover {
  background: url("https://ningyu1.github.io/site/images/social/GithubH.png") center no-repeat; }

a.twitter {
  background: url("https://ningyu1.github.io/site/images/social/Twitter.png") center no-repeat; }

a.twitter:hover {
  background: url("https://ningyu1.github.io/site/images/social/TwitterH.png") center no-repeat; }

a.google {
  background: url("https://ningyu1.github.io/site/images/social/Picasa.png") center no-repeat; }

a.google:hover {
  background: url("https://ningyu1.github.io/site/images/social/PicasaH.png") center no-repeat; }

a.skype {
  background: url("https://ningyu1.github.io/site/images/social/Skype.png") center no-repeat; }

a.skype:hover {
  background: url("https://ningyu1.github.io/site/images/social/SkypeH.png") center no-repeat; }

a.linkedin {
  background: url("https://ningyu1.github.io/site/images/social/LinkedIn.png") center no-repeat; }

a.linkedin:hover {
  background: url("https://ningyu1.github.io/site/images/social/LinkedInH.png") center no-repeat; }

a.youtube {
  background: url("https://ningyu1.github.io/site/images/social/Youtube.png") center no-repeat; }

a.youtube:hover {
  background: url("https://ningyu1.github.io/site/images/social/YoutubeH.png") center no-repeat; }

a.lastfm {
  background: url("https://ningyu1.github.io/site/images/social/LastFM.png") center no-repeat; }

a.lastfm:hover {
  background: url("https://ningyu1.github.io/site/images/social/LastFMH.png") center no-repeat; }

/* search bar */
#search {
  display: inline; }

#search input[type="text"] {
  background: url("https://ningyu1.github.io/site/images/search-dark.png") no-repeat 10px 6px #444444;
  border: 0 none;
  font: bold 12px Arial,Helvetica,Sans-serif;
  color: #777;
  width: 110px;
  padding: 6px 15px 6px 35px;
  -webkit-border-radius: 20px;
  -moz-border-radius: 20px;
  border-radius: 20px;
  text-shadow: 0 2px 2px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
  -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
  -webkit-transition: all 0.7s ease 0s;
  -moz-transition: all 0.7s ease 0s;
  -o-transition: all 0.7s ease 0s;
  transition: all 0.7s ease 0s; }

#search input[type="text"]:focus {
  width: 160px; }

#dark {
  display: inline-block;
  height: 70px; }

#dark #search input[type="text"] {
  background: url("https://ningyu1.github.io/site/images/search-dark.png") no-repeat 10px 6px #444444;
  border: 0 none;
  font: bold 12px Arial,Helvetica,Sans-serif;
  color: #ddd;
  width: 110px;
  padding: 6px 15px 6px 35px;
  -webkit-border-radius: 20px;
  -moz-border-radius: 20px;
  border-radius: 20px;
  text-shadow: 0 2px 2px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
  -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 3px rgba(0, 0, 0, 0.2) inset;
  -webkit-transition: all 0.4s ease 0s;
  -moz-transition: all 0.4s ease 0s;
  -o-transition: all 0.4s ease 0s;
  transition: all 0.4s ease 0s; }

#dark #search input[type="text"]:focus {
  width: 160px;
  outline: 0; }

/* nav */
#nav {
  text-align: center;
  position: relative;
  margin: 10px auto; }

ul#nav li {
  display: inline-block; }

ul#nav li {
  list-style-type: none;
  background-repeat: no-repeat;
  overflow: hidden;
  margin-right: 1px; }

ul#nav li a {
  display: inline-block;
  width: 110px;
  height: 40px;
  text-align: center;
  padding-top: 20px;
  padding-bottom: 20px;
  color: #222;
  font-weight: normal;
  text-decoration: none;
  font-family: "Lucida Grande", Arial, Helvetica, sans-serif;
  text-transform: uppercase;
  font-size: 16px;
  font-style: normal;
  text-shadow: 1px 1px 10px #222;
  overflow: hidden; }

ul#nav li a:hover {
  color: #fff;
  font-style: normal;
  font-weight: normal;
  background-image: url("https://ningyu1.github.io/site/images/hover.png");
  background-repeat: no-repeat;
  background-position: center top; }

ul#nav li a:active {
  position: relative;
  top: 2px; }

ul#nav li#active a {
  color: #FFF;
  background-image: url("https://ningyu1.github.io/site/images/active.png");
  background-repeat: no-repeat;
  background-position: center top; }

#pagenavi {
  padding: 20px 0;
  height: 20px;
  line-height: 20px;
  position: relative;
  border-top: 1px solid white;
  border-bottom: 1px solid #dddddd; }
  #pagenavi a:hover {
    text-decoration: underline; }
  #pagenavi .prev, #pagenavi .next {
    position: absolute; }
  #pagenavi .prev {
    padding-left: 30px;
    left: 0; }
    #pagenavi .prev:before {
      content: "\f060";
      font: 1.3em FontAwesome;
      position: absolute;
      left: 0; }
  #pagenavi .next {
    padding-right: 30px;
    right: 0; }
    #pagenavi .next:before {
      content: "\f061";
      font: 1.3em FontAwesome;
      position: absolute;
      right: 0; }
  #pagenavi .center {
    text-align: center;
    width: 100%;
    display: block; }
    @media screen and (max-width: 400px) {
      #pagenavi .center {
        display: none; } }

article {
  border-bottom: 1px solid #dddddd;
  padding: 30px 0;
  position: relative; }
  @media screen and (max-width: 800px) {
    article {
      padding-bottom: 15px; } }
  @media screen and (max-width: 600px) {
    article {
      padding: 15px 0; } }
  article h2.title {
    font-family: 'Fjalla One', sans-serif;
    font-size: 2em;
    font-weight: 300;
    line-height: 35px;
    margin-bottom: 20px; }
    article h2.title a {
      color: #1094e8; }
  article .title a {
    color: #7c7873;
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    transition: all 1s ease-in-out; }
  article .title a:hover {
    color: #084B8A;
    text-shadow: 3px 3px 12px #888;
    -webkit-transform: scale(1.3);
    -moz-transform: scale(1.3); }
  article .entry-content {
    line-height: 2;
    text-align: justify; }
    article .entry-content a:hover {
      text-decoration: underline; }
    article .entry-content .more-link {
      display: block;
      margin-top: 16px;
      padding-left: 30px;
      position: relative; }
      article .entry-content .more-link:before {
        content: "\f061";
        font: 1.3em FontAwesome;
        line-height: 1.6em;
        position: absolute;
        left: 0; }
    article .entry-content p, article .entry-content blockquote, article .entry-content ul, article .entry-content ol, article .entry-content dl, article .entry-content table, article .entry-content iframe, article .entry-content h1, article .entry-content h2, article .entry-content h3, article .entry-content h4, article .entry-content h5, article .entry-content h6, article .entry-content .video-container {
      margin-top: 10px; }
    article .entry-content ul, article .entry-content ol, article .entry-content dl {
      margin-left: 20px; }
      article .entry-content ul ul, article .entry-content ul ol, article .entry-content ul dl, article .entry-content ol ul, article .entry-content ol ol, article .entry-content ol dl, article .entry-content dl ul, article .entry-content dl ol, article .entry-content dl dl {
        margin-top: 0; }
    article .entry-content strong {
      font-weight: bold; }
    article .entry-content em {
      font-style: italic; }
    article .entry-content p {
      margin-top: 10px; }
    article .entry-content h2 {
      font-weight: 300;
      border-bottom: 1px solid #dddddd;
      position: relative; }
      article .entry-content h2:before {
        content: "";
        position: absolute;
        bottom: -2px;
        border-bottom: 1px solid white;
        width: 100%; }
    article .entry-content img, article .entry-content video {
      margin: 10px 0;
      max-width: 100%;
      height: auto;
      -moz-border-radius: 0.3em;
      -webkit-border-radius: 0.3em;
      -o-border-radius: 0.3em;
      -ms-border-radius: 0.3em;
      -khtml-border-radius: 0.3em;
      border-radius: 0.3em;
      -moz-box-shadow: rgba(0, 0, 0, 0.75) 0 1px 4px;
      -webkit-box-shadow: rgba(0, 0, 0, 0.75) 0 1px 4px;
      -o-box-shadow: rgba(0, 0, 0, 0.75) 0 1px 4px;
      box-shadow: rgba(0, 0, 0, 0.75) 0 1px 4px;
      -moz-box-sizing: border-box;
      -webkit-box-sizing: border-box;
      -ms-box-sizing: border-box;
      box-sizing: border-box;
      border: #fff 0.3em solid; }
    article .entry-content img.noborder, article .entry-content video.noborder {
      border: none;
      box-shadow: none; }
    article .entry-content blockquote {
      background: #dddddd;
      border-left: 5px solid #cccccc;
      padding: 15px 20px;
      margin-top: 10px; }
      article .entry-content blockquote > p:first-of-type {
        margin-top: 0; }
    article .entry-content iframe {
      border: none; }
    article .entry-content table {
      background: #dddddd;
      border: 1px solid #cccccc;
      border-spacing: 0;
      margin-top: 10px; }
      article .entry-content table th {
        background: #cccccc;
        padding: 0 15px; }
      article .entry-content table td {
        text-align: center; }
      article .entry-content table tr:nth-of-type(2n) {
        background: #d5d5d5; }
    article .entry-content .caption {
      display: block;
      font-size: 0.9em;
      color: #999999;
      padding-left: 25px;
      position: relative; }
      article .entry-content .caption:before {
        content: "\f040";
        color: #cccccc;
        font: 1.3em FontAwesome;
        line-height: 1.6em;
        position: absolute;
        left: 0; }
    article .entry-content .video-container {
      position: relative;
      padding-bottom: 56.25%;
      padding-top: 30px;
      height: 0;
      overflow: hidden; }
      article .entry-content .video-container iframe, article .entry-content .video-container object, article .entry-content .video-container embed {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        margin-top: 0; }

.share {
  padding: 15px 0;
  border-top: 1px solid white;
  border-bottom: 1px solid #dddddd; }

@media screen and (max-width: 800px) {
  .post h2.title, .post .entry-content {
    margin-left: 0; } }
.post .meta {
  line-height: 2;
  color: #999999;
  width: 370px; }
  @media screen and (max-width: 800px) {
    .post .meta {
      margin-top: 15px;
      position: static;
      width: auto; } }
  .post .meta a {
    color: #999999;
    -webkit-transition: compact(compact(0.3s, false, false, false, false, false, false, false, false, false) false false);
    -moz-transition: compact(compact(0.3s, false, false, false, false, false, false, false, false, false) false false false);
    -o-transition: compact(compact(0.3s, false, false, false, false, false, false, false, false, false) false false false);
    transition: compact(0.3s, false, false, false, false, false, false, false, false, false); }
    .post .meta a:hover {
      color: #666666; }
  .post .meta .date, .post .meta .tags, .post .meta .comments {
    padding-left: 30px;
    position: relative; }
    .post .meta .date:before, .post .meta .tags:before, .post .meta .comments:before {
      color: #cccccc;
      font: 1.3em FontAwesome;
      line-height: 1.6em;
      position: absolute;
      left: 0; }
    @media screen and (max-width: 800px) {
      .post .meta .date, .post .meta .tags, .post .meta .comments {
        display: -moz-inline-stack;
        display: inline-block;
        vertical-align: middle;
        *vertical-align: auto;
        zoom: 1;
        *display: inline;
        margin-right: 30px; } }
  .post .meta .date:before {
    content: "\f073"; }
  .post .meta .tags:before {
    content: "\f02c"; }
  .post .meta .comments:before {
    content: "\f075"; }

.archives {
  position: relative; }
  .archives:last-of-type:before {
    content: "";
    position: absolute;
    bottom: 0;
    width: 200px;
    border-top: 1px solid #dddddd; }
  .archives .top-border-padding {
    border-top: 1px solid #fff; }
    .archives .top-border-padding:before {
      content: "";
      position: absolute;
      top: -1px;
      width: 100%;
      border-top: 1px solid #dddddd; }
  .archives .year {
    line-height: 35px;
    width: 200px;
    position: absolute;
    top: 0;
    padding-top: 15px;
    border-top: 1px solid #fff; }
    .archives .year:before {
      content: "";
      position: absolute;
      top: -2px;
      width: 100%;
      border-top: 1px solid #dddddd; }
    @media screen and (max-width: 600px) {
      .archives .year {
        position: relative;
        width: 100%; } }
  .archives article {
    margin-left: 200px;
    padding: 10px 0; }
    @media screen and (max-width: 600px) {
      .archives article {
        margin-left: 0; }
        .archives article:first-of-type {
          border-top: none;
          padding-top: 30px; } }
    .archives article .title {
      margin-bottom: 0;
      font-size: 25px; }
    .archives article .meta {
      color: #999999;
      font-size: 0.9em;
      line-height: 2;
      margin-top: 10px; }
      @media screen and (max-width: 600px) {
        .archives article .meta {
          display: none; } }
      .archives article .meta span {
        margin-right: 30px;
        display: -moz-inline-stack;
        display: inline-block;
        vertical-align: middle;
        *vertical-align: auto;
        zoom: 1;
        *display: inline; }
        .archives article .meta span:before {
          color: #cccccc;
          font: 1.3em FontAwesome;
          padding-right: 10px; }
      .archives article .meta a {
        color: #999999;
        -webkit-transition: compact(compact(0.3s, false, false, false, false, false, false, false, false, false) false false);
        -moz-transition: compact(compact(0.3s, false, false, false, false, false, false, false, false, false) false false false);
        -o-transition: compact(compact(0.3s, false, false, false, false, false, false, false, false, false) false false false);
        transition: compact(0.3s, false, false, false, false, false, false, false, false, false); }
        .archives article .meta a:hover {
          color: #666666; }
      .archives article .meta .date:before {
        content: "\f073"; }
      .archives article .meta .tags:before {
        content: "\f02c"; }
      .archives article .meta .comments:before {
        content: "\f075"; }

#comment {
  padding: 30px 0;
  border-top: 1px solid white;
  border-bottom: 1px solid #dddddd; }
  #comment h2.title {
    font-size: 25px;
    font-weight: 300;
    line-height: 35px;
    margin-bottom: 20px; }

footer {
  padding: 20px 0;
  text-align: center;
  font-size: 0.6em;
  color: #666; }

footer a {
  color: #123; }

footer a:hover {
  color: #456; }

#banner {
  color: #999999;
  padding: 30px 0;
  line-height: 30px;
  text-align: center;
  position: relative;
  display: none;
  border-top: 1px solid white;
  border-bottom: 1px solid #dddddd; }
  #banner:hover a {
    color: #258fb8; }
  #banner a {
    color: #999999;
    -webkit-transition: compact(compact(0.3s, false, false, false, false, false, false, false, false, false) false false);
    -moz-transition: compact(compact(0.3s, false, false, false, false, false, false, false, false, false) false false false);
    -o-transition: compact(compact(0.3s, false, false, false, false, false, false, false, false, false) false false false);
    transition: compact(0.3s, false, false, false, false, false, false, false, false, false); }
    #banner a:hover {
      text-decoration: underline; }
  #banner small {
    position: absolute;
    right: 0;
    bottom: 0; }
  #banner .loading {
    background: image-url("loading_pacman.gif") center no-repeat;
    text-indent: -9999px; }
  #banner .container {
    height: 30px;
    overflow: hidden;
    position: relative;
    display: none; }
    #banner .container .feed {
      list-style: none;
      position: absolute;
      top: 0;
      width: 100%; }
      #banner .container .feed li {
        position: relative; }
        #banner .container .feed li small {
          position: absolute;
          right: 0; }

/*! fancyBox v2.0.6 fancyapps.com | fancyapps.com/fancybox/#license */
.fancybox-tmp iframe, .fancybox-tmp object {
  vertical-align: top;
  padding: 0;
  margin: 0; }

.fancybox-wrap {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 8020; }

.fancybox-skin {
  position: relative;
  padding: 0;
  margin: 0;
  background: #f9f9f9;
  color: #444;
  text-shadow: none;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  -ms-border-radius: 4px;
  -o-border-radius: 4px;
  border-radius: 4px; }

.fancybox-opened {
  z-index: 8030; }

.fancybox-opened .fancybox-skin {
  -webkit-box-shadow: compact(0 10px 25px rgba(0, 0, 0, 0.5), false, false, false, false, false, false, false, false, false);
  -moz-box-shadow: compact(0 10px 25px rgba(0, 0, 0, 0.5), false, false, false, false, false, false, false, false, false);
  box-shadow: compact(0 10px 25px rgba(0, 0, 0, 0.5), false, false, false, false, false, false, false, false, false); }

.fancybox-outer, .fancybox-inner {
  padding: 0;
  margin: 0;
  position: relative;
  outline: none; }

.fancybox-inner {
  overflow: hidden; }

.fancybox-type-iframe .fancybox-inner {
  -webkit-overflow-scrolling: touch; }

.fancybox-error {
  color: #444;
  font: 14px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;
  margin: 0;
  padding: 10px; }

.fancybox-image, .fancybox-iframe {
  display: block;
  width: 100%;
  height: 100%;
  border: 0;
  padding: 0;
  margin: 0;
  vertical-align: top; }

.fancybox-image {
  max-width: 100%;
  max-height: 100%; }

#fancybox-loading, .fancybox-close, .fancybox-prev span, .fancybox-next span {
  background-image: image-url("fancybox/fancybox_sprite.png"); }

#fancybox-loading {
  position: fixed;
  top: 50%;
  left: 50%;
  margin-top: -22px;
  margin-left: -22px;
  background-position: 0 -108px;
  opacity: 0.8;
  cursor: pointer;
  z-index: 8020; }

#fancybox-loading div {
  width: 44px;
  height: 44px;
  background: image-url("fancybox/fancybox_loading.gif") center center no-repeat; }

.fancybox-close {
  position: absolute;
  top: -18px;
  right: -18px;
  width: 36px;
  height: 36px;
  cursor: pointer;
  z-index: 8040; }

.fancybox-nav {
  position: absolute;
  top: 0;
  width: 40%;
  height: 100%;
  cursor: pointer;
  background: transparent image-url("fancybox/blank.gif");
  /* helps IE */
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  z-index: 8040; }

.fancybox-prev {
  left: 0; }

.fancybox-next {
  right: 0; }

.fancybox-nav span {
  position: absolute;
  top: 50%;
  width: 36px;
  height: 34px;
  margin-top: -18px;
  cursor: pointer;
  z-index: 8040;
  visibility: hidden; }

.fancybox-prev span {
  left: 20px;
  background-position: 0 -36px; }

.fancybox-next span {
  right: 20px;
  background-position: 0 -72px; }

.fancybox-nav:hover span {
  visibility: visible; }

.fancybox-tmp {
  position: absolute;
  top: -9999px;
  left: -9999px;
  padding: 0;
  overflow: visible;
  visibility: hidden; }

/* Overlay helper */
#fancybox-overlay {
  position: absolute;
  top: 0;
  left: 0;
  overflow: hidden;
  display: none;
  z-index: 8010;
  background: #000; }

#fancybox-overlay.overlay-fixed {
  position: fixed;
  bottom: 0;
  right: 0; }

/* Title helper */
.fancybox-title {
  visibility: hidden;
  font: normal 13px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;
  position: relative;
  text-shadow: none;
  z-index: 8050; }

.fancybox-opened .fancybox-title {
  visibility: visible; }

.fancybox-title-float-wrap {
  position: absolute;
  bottom: 0;
  right: 50%;
  margin-bottom: -35px;
  z-index: 8030;
  text-align: center; }

.fancybox-title-float-wrap .child {
  display: inline-block;
  margin-right: -100%;
  padding: 2px 20px;
  background: transparent;
  /* Fallback for web browsers that doesn't support RGBa */
  background: rgba(0, 0, 0, 0.8);
  text-shadow: 0 1px 2px #222;
  color: #FFF;
  font-weight: bold;
  line-height: 24px;
  white-space: nowrap;
  -webkit-border-radius: 15px;
  -moz-border-radius: 15px;
  -ms-border-radius: 15px;
  -o-border-radius: 15px;
  border-radius: 15px; }

.fancybox-title-outside-wrap {
  position: relative;
  margin-top: 10px;
  color: #fff; }

.fancybox-title-inside-wrap {
  margin-top: 10px; }

.fancybox-title-over-wrap {
  position: absolute;
  bottom: 0;
  left: 0;
  color: #fff;
  padding: 10px;
  background: #000;
  background: rgba(0, 0, 0, 0.8); }

/*
Animate.css - http://daneden.me/animate
Licensed under the ☺ license (http://licence.visualidiot.com/)

Copyright (c) 2012 Dan Eden

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
body {
  /* Addresses a small issue in webkit: http://bit.ly/NEdoDq */
  -webkit-backface-visibility: hidden; }

.animated {
  -webkit-animation-duration: 1s;
  -moz-animation-duration: 1s;
  -o-animation-duration: 1s;
  animation-duration: 1s;
  -webkit-animation-fill-mode: both;
  -moz-animation-fill-mode: both;
  -o-animation-fill-mode: both;
  animation-fill-mode: both; }

.animated.hinge {
  -webkit-animation-duration: 2s;
  -moz-animation-duration: 2s;
  -o-animation-duration: 2s;
  animation-duration: 2s; }

@-webkit-keyframes flash {
  0%, 50%, 100% {
    opacity: 1; }

  25%, 75% {
    opacity: 0; } }

@-moz-keyframes flash {
  0%, 50%, 100% {
    opacity: 1; }

  25%, 75% {
    opacity: 0; } }

@-o-keyframes flash {
  0%, 50%, 100% {
    opacity: 1; }

  25%, 75% {
    opacity: 0; } }

@keyframes flash {
  0%, 50%, 100% {
    opacity: 1; }

  25%, 75% {
    opacity: 0; } }

.flash {
  -webkit-animation-name: flash;
  -moz-animation-name: flash;
  -o-animation-name: flash;
  animation-name: flash; }

@-webkit-keyframes shake {
  0%, 100% {
    -webkit-transform: translateX(0); }

  10%, 30%, 50%, 70%, 90% {
    -webkit-transform: translateX(-10px); }

  20%, 40%, 60%, 80% {
    -webkit-transform: translateX(10px); } }

@-moz-keyframes shake {
  0%, 100% {
    -moz-transform: translateX(0); }

  10%, 30%, 50%, 70%, 90% {
    -moz-transform: translateX(-10px); }

  20%, 40%, 60%, 80% {
    -moz-transform: translateX(10px); } }

@-o-keyframes shake {
  0%, 100% {
    -o-transform: translateX(0); }

  10%, 30%, 50%, 70%, 90% {
    -o-transform: translateX(-10px); }

  20%, 40%, 60%, 80% {
    -o-transform: translateX(10px); } }

@keyframes shake {
  0%, 100% {
    transform: translateX(0); }

  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-10px); }

  20%, 40%, 60%, 80% {
    transform: translateX(10px); } }

.shake {
  -webkit-animation-name: shake;
  -moz-animation-name: shake;
  -o-animation-name: shake;
  animation-name: shake; }

@-webkit-keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    -webkit-transform: translateY(0); }

  40% {
    -webkit-transform: translateY(-30px); }

  60% {
    -webkit-transform: translateY(-15px); } }

@-moz-keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    -moz-transform: translateY(0); }

  40% {
    -moz-transform: translateY(-30px); }

  60% {
    -moz-transform: translateY(-15px); } }

@-o-keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    -o-transform: translateY(0); }

  40% {
    -o-transform: translateY(-30px); }

  60% {
    -o-transform: translateY(-15px); } }

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0); }

  40% {
    transform: translateY(-30px); }

  60% {
    transform: translateY(-15px); } }

.bounce {
  -webkit-animation-name: bounce;
  -moz-animation-name: bounce;
  -o-animation-name: bounce;
  animation-name: bounce; }

@-webkit-keyframes tada {
  0% {
    -webkit-transform: scale(1); }

  10%, 20% {
    -webkit-transform: scale(0.9) rotate(-3deg); }

  30%, 50%, 70%, 90% {
    -webkit-transform: scale(1.1) rotate(3deg); }

  40%, 60%, 80% {
    -webkit-transform: scale(1.1) rotate(-3deg); }

  100% {
    -webkit-transform: scale(1) rotate(0); } }

@-moz-keyframes tada {
  0% {
    -moz-transform: scale(1); }

  10%, 20% {
    -moz-transform: scale(0.9) rotate(-3deg); }

  30%, 50%, 70%, 90% {
    -moz-transform: scale(1.1) rotate(3deg); }

  40%, 60%, 80% {
    -moz-transform: scale(1.1) rotate(-3deg); }

  100% {
    -moz-transform: scale(1) rotate(0); } }

@-o-keyframes tada {
  0% {
    -o-transform: scale(1); }

  10%, 20% {
    -o-transform: scale(0.9) rotate(-3deg); }

  30%, 50%, 70%, 90% {
    -o-transform: scale(1.1) rotate(3deg); }

  40%, 60%, 80% {
    -o-transform: scale(1.1) rotate(-3deg); }

  100% {
    -o-transform: scale(1) rotate(0); } }

@keyframes tada {
  0% {
    transform: scale(1); }

  10%, 20% {
    transform: scale(0.9) rotate(-3deg); }

  30%, 50%, 70%, 90% {
    transform: scale(1.1) rotate(3deg); }

  40%, 60%, 80% {
    transform: scale(1.1) rotate(-3deg); }

  100% {
    transform: scale(1) rotate(0); } }

.tada {
  -webkit-animation-name: tada;
  -moz-animation-name: tada;
  -o-animation-name: tada;
  animation-name: tada; }

@-webkit-keyframes swing {
  20%, 40%, 60%, 80%, 100% {
    -webkit-transform-origin: top center; }

  20% {
    -webkit-transform: rotate(15deg); }

  40% {
    -webkit-transform: rotate(-10deg); }

  60% {
    -webkit-transform: rotate(5deg); }

  80% {
    -webkit-transform: rotate(-5deg); }

  100% {
    -webkit-transform: rotate(0deg); } }

@-moz-keyframes swing {
  20% {
    -moz-transform: rotate(15deg); }

  40% {
    -moz-transform: rotate(-10deg); }

  60% {
    -moz-transform: rotate(5deg); }

  80% {
    -moz-transform: rotate(-5deg); }

  100% {
    -moz-transform: rotate(0deg); } }

@-o-keyframes swing {
  20% {
    -o-transform: rotate(15deg); }

  40% {
    -o-transform: rotate(-10deg); }

  60% {
    -o-transform: rotate(5deg); }

  80% {
    -o-transform: rotate(-5deg); }

  100% {
    -o-transform: rotate(0deg); } }

@keyframes swing {
  20% {
    transform: rotate(15deg); }

  40% {
    transform: rotate(-10deg); }

  60% {
    transform: rotate(5deg); }

  80% {
    transform: rotate(-5deg); }

  100% {
    transform: rotate(0deg); } }

.swing {
  -webkit-transform-origin: top center;
  -moz-transform-origin: top center;
  -o-transform-origin: top center;
  transform-origin: top center;
  -webkit-animation-name: swing;
  -moz-animation-name: swing;
  -o-animation-name: swing;
  animation-name: swing; }

/* originally authored by Nick Pettit - https://github.com/nickpettit/glide */
@-webkit-keyframes wobble {
  0% {
    -webkit-transform: translateX(0%); }

  15% {
    -webkit-transform: translateX(-25%) rotate(-5deg); }

  30% {
    -webkit-transform: translateX(20%) rotate(3deg); }

  45% {
    -webkit-transform: translateX(-15%) rotate(-3deg); }

  60% {
    -webkit-transform: translateX(10%) rotate(2deg); }

  75% {
    -webkit-transform: translateX(-5%) rotate(-1deg); }

  100% {
    -webkit-transform: translateX(0%); } }

@-moz-keyframes wobble {
  0% {
    -moz-transform: translateX(0%); }

  15% {
    -moz-transform: translateX(-25%) rotate(-5deg); }

  30% {
    -moz-transform: translateX(20%) rotate(3deg); }

  45% {
    -moz-transform: translateX(-15%) rotate(-3deg); }

  60% {
    -moz-transform: translateX(10%) rotate(2deg); }

  75% {
    -moz-transform: translateX(-5%) rotate(-1deg); }

  100% {
    -moz-transform: translateX(0%); } }

@-o-keyframes wobble {
  0% {
    -o-transform: translateX(0%); }

  15% {
    -o-transform: translateX(-25%) rotate(-5deg); }

  30% {
    -o-transform: translateX(20%) rotate(3deg); }

  45% {
    -o-transform: translateX(-15%) rotate(-3deg); }

  60% {
    -o-transform: translateX(10%) rotate(2deg); }

  75% {
    -o-transform: translateX(-5%) rotate(-1deg); }

  100% {
    -o-transform: translateX(0%); } }

@keyframes wobble {
  0% {
    transform: translateX(0%); }

  15% {
    transform: translateX(-25%) rotate(-5deg); }

  30% {
    transform: translateX(20%) rotate(3deg); }

  45% {
    transform: translateX(-15%) rotate(-3deg); }

  60% {
    transform: translateX(10%) rotate(2deg); }

  75% {
    transform: translateX(-5%) rotate(-1deg); }

  100% {
    transform: translateX(0%); } }

.wobble {
  -webkit-animation-name: wobble;
  -moz-animation-name: wobble;
  -o-animation-name: wobble;
  animation-name: wobble; }

/* originally authored by Nick Pettit - https://github.com/nickpettit/glide */
@-webkit-keyframes pulse {
  0% {
    -webkit-transform: scale(1); }

  50% {
    -webkit-transform: scale(1.1); }

  100% {
    -webkit-transform: scale(1); } }

@-moz-keyframes pulse {
  0% {
    -moz-transform: scale(1); }

  50% {
    -moz-transform: scale(1.1); }

  100% {
    -moz-transform: scale(1); } }

@-o-keyframes pulse {
  0% {
    -o-transform: scale(1); }

  50% {
    -o-transform: scale(1.1); }

  100% {
    -o-transform: scale(1); } }

@keyframes pulse {
  0% {
    transform: scale(1); }

  50% {
    transform: scale(1.1); }

  100% {
    transform: scale(1); } }

.pulse {
  -webkit-animation-name: pulse;
  -moz-animation-name: pulse;
  -o-animation-name: pulse;
  animation-name: pulse; }

@-webkit-keyframes flip {
  0% {
    -webkit-transform: perspective(400px) rotateY(0);
    -webkit-animation-timing-function: ease-out; }

  40% {
    -webkit-transform: perspective(400px) translateZ(150px) rotateY(170deg);
    -webkit-animation-timing-function: ease-out; }

  50% {
    -webkit-transform: perspective(400px) translateZ(150px) rotateY(190deg) scale(1);
    -webkit-animation-timing-function: ease-in; }

  80% {
    -webkit-transform: perspective(400px) rotateY(360deg) scale(0.95);
    -webkit-animation-timing-function: ease-in; }

  100% {
    -webkit-transform: perspective(400px) scale(1);
    -webkit-animation-timing-function: ease-in; } }

@-moz-keyframes flip {
  0% {
    -moz-transform: perspective(400px) rotateY(0);
    -moz-animation-timing-function: ease-out; }

  40% {
    -moz-transform: perspective(400px) translateZ(150px) rotateY(170deg);
    -moz-animation-timing-function: ease-out; }

  50% {
    -moz-transform: perspective(400px) translateZ(150px) rotateY(190deg) scale(1);
    -moz-animation-timing-function: ease-in; }

  80% {
    -moz-transform: perspective(400px) rotateY(360deg) scale(0.95);
    -moz-animation-timing-function: ease-in; }

  100% {
    -moz-transform: perspective(400px) scale(1);
    -moz-animation-timing-function: ease-in; } }

@-o-keyframes flip {
  0% {
    -o-transform: perspective(400px) rotateY(0);
    -o-animation-timing-function: ease-out; }

  40% {
    -o-transform: perspective(400px) translateZ(150px) rotateY(170deg);
    -o-animation-timing-function: ease-out; }

  50% {
    -o-transform: perspective(400px) translateZ(150px) rotateY(190deg) scale(1);
    -o-animation-timing-function: ease-in; }

  80% {
    -o-transform: perspective(400px) rotateY(360deg) scale(0.95);
    -o-animation-timing-function: ease-in; }

  100% {
    -o-transform: perspective(400px) scale(1);
    -o-animation-timing-function: ease-in; } }

@keyframes flip {
  0% {
    transform: perspective(400px) rotateY(0);
    animation-timing-function: ease-out; }

  40% {
    transform: perspective(400px) translateZ(150px) rotateY(170deg);
    animation-timing-function: ease-out; }

  50% {
    transform: perspective(400px) translateZ(150px) rotateY(190deg) scale(1);
    animation-timing-function: ease-in; }

  80% {
    transform: perspective(400px) rotateY(360deg) scale(0.95);
    animation-timing-function: ease-in; }

  100% {
    transform: perspective(400px) scale(1);
    animation-timing-function: ease-in; } }

.flip {
  -webkit-backface-visibility: visible !important;
  -webkit-animation-name: flip;
  -moz-backface-visibility: visible !important;
  -moz-animation-name: flip;
  -o-backface-visibility: visible !important;
  -o-animation-name: flip;
  backface-visibility: visible !important;
  animation-name: flip; }

@-webkit-keyframes flipInX {
  0% {
    -webkit-transform: perspective(400px) rotateX(90deg);
    opacity: 0; }

  40% {
    -webkit-transform: perspective(400px) rotateX(-10deg); }

  70% {
    -webkit-transform: perspective(400px) rotateX(10deg); }

  100% {
    -webkit-transform: perspective(400px) rotateX(0deg);
    opacity: 1; } }

@-moz-keyframes flipInX {
  0% {
    -moz-transform: perspective(400px) rotateX(90deg);
    opacity: 0; }

  40% {
    -moz-transform: perspective(400px) rotateX(-10deg); }

  70% {
    -moz-transform: perspective(400px) rotateX(10deg); }

  100% {
    -moz-transform: perspective(400px) rotateX(0deg);
    opacity: 1; } }

@-o-keyframes flipInX {
  0% {
    -o-transform: perspective(400px) rotateX(90deg);
    opacity: 0; }

  40% {
    -o-transform: perspective(400px) rotateX(-10deg); }

  70% {
    -o-transform: perspective(400px) rotateX(10deg); }

  100% {
    -o-transform: perspective(400px) rotateX(0deg);
    opacity: 1; } }

@keyframes flipInX {
  0% {
    transform: perspective(400px) rotateX(90deg);
    opacity: 0; }

  40% {
    transform: perspective(400px) rotateX(-10deg); }

  70% {
    transform: perspective(400px) rotateX(10deg); }

  100% {
    transform: perspective(400px) rotateX(0deg);
    opacity: 1; } }

.flipInX {
  -webkit-backface-visibility: visible !important;
  -webkit-animation-name: flipInX;
  -moz-backface-visibility: visible !important;
  -moz-animation-name: flipInX;
  -o-backface-visibility: visible !important;
  -o-animation-name: flipInX;
  backface-visibility: visible !important;
  animation-name: flipInX; }

@-webkit-keyframes flipOutX {
  0% {
    -webkit-transform: perspective(400px) rotateX(0deg);
    opacity: 1; }

  100% {
    -webkit-transform: perspective(400px) rotateX(90deg);
    opacity: 0; } }

@-moz-keyframes flipOutX {
  0% {
    -moz-transform: perspective(400px) rotateX(0deg);
    opacity: 1; }

  100% {
    -moz-transform: perspective(400px) rotateX(90deg);
    opacity: 0; } }

@-o-keyframes flipOutX {
  0% {
    -o-transform: perspective(400px) rotateX(0deg);
    opacity: 1; }

  100% {
    -o-transform: perspective(400px) rotateX(90deg);
    opacity: 0; } }

@keyframes flipOutX {
  0% {
    transform: perspective(400px) rotateX(0deg);
    opacity: 1; }

  100% {
    transform: perspective(400px) rotateX(90deg);
    opacity: 0; } }

.flipOutX {
  -webkit-animation-name: flipOutX;
  -webkit-backface-visibility: visible !important;
  -moz-animation-name: flipOutX;
  -moz-backface-visibility: visible !important;
  -o-animation-name: flipOutX;
  -o-backface-visibility: visible !important;
  animation-name: flipOutX;
  backface-visibility: visible !important; }

@-webkit-keyframes flipInY {
  0% {
    -webkit-transform: perspective(400px) rotateY(90deg);
    opacity: 0; }

  40% {
    -webkit-transform: perspective(400px) rotateY(-10deg); }

  70% {
    -webkit-transform: perspective(400px) rotateY(10deg); }

  100% {
    -webkit-transform: perspective(400px) rotateY(0deg);
    opacity: 1; } }

@-moz-keyframes flipInY {
  0% {
    -moz-transform: perspective(400px) rotateY(90deg);
    opacity: 0; }

  40% {
    -moz-transform: perspective(400px) rotateY(-10deg); }

  70% {
    -moz-transform: perspective(400px) rotateY(10deg); }

  100% {
    -moz-transform: perspective(400px) rotateY(0deg);
    opacity: 1; } }

@-o-keyframes flipInY {
  0% {
    -o-transform: perspective(400px) rotateY(90deg);
    opacity: 0; }

  40% {
    -o-transform: perspective(400px) rotateY(-10deg); }

  70% {
    -o-transform: perspective(400px) rotateY(10deg); }

  100% {
    -o-transform: perspective(400px) rotateY(0deg);
    opacity: 1; } }

@keyframes flipInY {
  0% {
    transform: perspective(400px) rotateY(90deg);
    opacity: 0; }

  40% {
    transform: perspective(400px) rotateY(-10deg); }

  70% {
    transform: perspective(400px) rotateY(10deg); }

  100% {
    transform: perspective(400px) rotateY(0deg);
    opacity: 1; } }

.flipInY {
  -webkit-backface-visibility: visible !important;
  -webkit-animation-name: flipInY;
  -moz-backface-visibility: visible !important;
  -moz-animation-name: flipInY;
  -o-backface-visibility: visible !important;
  -o-animation-name: flipInY;
  backface-visibility: visible !important;
  animation-name: flipInY; }

@-webkit-keyframes flipOutY {
  0% {
    -webkit-transform: perspective(400px) rotateY(0deg);
    opacity: 1; }

  100% {
    -webkit-transform: perspective(400px) rotateY(90deg);
    opacity: 0; } }

@-moz-keyframes flipOutY {
  0% {
    -moz-transform: perspective(400px) rotateY(0deg);
    opacity: 1; }

  100% {
    -moz-transform: perspective(400px) rotateY(90deg);
    opacity: 0; } }

@-o-keyframes flipOutY {
  0% {
    -o-transform: perspective(400px) rotateY(0deg);
    opacity: 1; }

  100% {
    -o-transform: perspective(400px) rotateY(90deg);
    opacity: 0; } }

@keyframes flipOutY {
  0% {
    transform: perspective(400px) rotateY(0deg);
    opacity: 1; }

  100% {
    transform: perspective(400px) rotateY(90deg);
    opacity: 0; } }

.flipOutY {
  -webkit-backface-visibility: visible !important;
  -webkit-animation-name: flipOutY;
  -moz-backface-visibility: visible !important;
  -moz-animation-name: flipOutY;
  -o-backface-visibility: visible !important;
  -o-animation-name: flipOutY;
  backface-visibility: visible !important;
  animation-name: flipOutY; }

@-webkit-keyframes fadeIn {
  0% {
    opacity: 0; }

  100% {
    opacity: 1; } }

@-moz-keyframes fadeIn {
  0% {
    opacity: 0; }

  100% {
    opacity: 1; } }

@-o-keyframes fadeIn {
  0% {
    opacity: 0; }

  100% {
    opacity: 1; } }

@keyframes fadeIn {
  0% {
    opacity: 0; }

  100% {
    opacity: 1; } }

.fadeIn {
  -webkit-animation-name: fadeIn;
  -moz-animation-name: fadeIn;
  -o-animation-name: fadeIn;
  animation-name: fadeIn; }

@-webkit-keyframes fadeInUp {
  0% {
    opacity: 0;
    -webkit-transform: translateY(20px); }

  100% {
    opacity: 1;
    -webkit-transform: translateY(0); } }

@-moz-keyframes fadeInUp {
  0% {
    opacity: 0;
    -moz-transform: translateY(20px); }

  100% {
    opacity: 1;
    -moz-transform: translateY(0); } }

@-o-keyframes fadeInUp {
  0% {
    opacity: 0;
    -o-transform: translateY(20px); }

  100% {
    opacity: 1;
    -o-transform: translateY(0); } }

@keyframes fadeInUp {
  0% {
    opacity: 0;
    transform: translateY(20px); }

  100% {
    opacity: 1;
    transform: translateY(0); } }

.fadeInUp {
  -webkit-animation-name: fadeInUp;
  -moz-animation-name: fadeInUp;
  -o-animation-name: fadeInUp;
  animation-name: fadeInUp; }

@-webkit-keyframes fadeInDown {
  0% {
    opacity: 0;
    -webkit-transform: translateY(-20px); }

  100% {
    opacity: 1;
    -webkit-transform: translateY(0); } }

@-moz-keyframes fadeInDown {
  0% {
    opacity: 0;
    -moz-transform: translateY(-20px); }

  100% {
    opacity: 1;
    -moz-transform: translateY(0); } }

@-o-keyframes fadeInDown {
  0% {
    opacity: 0;
    -o-transform: translateY(-20px); }

  100% {
    opacity: 1;
    -o-transform: translateY(0); } }

@keyframes fadeInDown {
  0% {
    opacity: 0;
    transform: translateY(-20px); }

  100% {
    opacity: 1;
    transform: translateY(0); } }

.fadeInDown {
  -webkit-animation-name: fadeInDown;
  -moz-animation-name: fadeInDown;
  -o-animation-name: fadeInDown;
  animation-name: fadeInDown; }

@-webkit-keyframes fadeInLeft {
  0% {
    opacity: 0;
    -webkit-transform: translateX(-20px); }

  100% {
    opacity: 1;
    -webkit-transform: translateX(0); } }

@-moz-keyframes fadeInLeft {
  0% {
    opacity: 0;
    -moz-transform: translateX(-20px); }

  100% {
    opacity: 1;
    -moz-transform: translateX(0); } }

@-o-keyframes fadeInLeft {
  0% {
    opacity: 0;
    -o-transform: translateX(-20px); }

  100% {
    opacity: 1;
    -o-transform: translateX(0); } }

@keyframes fadeInLeft {
  0% {
    opacity: 0;
    transform: translateX(-20px); }

  100% {
    opacity: 1;
    transform: translateX(0); } }

.fadeInLeft {
  -webkit-animation-name: fadeInLeft;
  -moz-animation-name: fadeInLeft;
  -o-animation-name: fadeInLeft;
  animation-name: fadeInLeft; }

@-webkit-keyframes fadeInRight {
  0% {
    opacity: 0;
    -webkit-transform: translateX(20px); }

  100% {
    opacity: 1;
    -webkit-transform: translateX(0); } }

@-moz-keyframes fadeInRight {
  0% {
    opacity: 0;
    -moz-transform: translateX(20px); }

  100% {
    opacity: 1;
    -moz-transform: translateX(0); } }

@-o-keyframes fadeInRight {
  0% {
    opacity: 0;
    -o-transform: translateX(20px); }

  100% {
    opacity: 1;
    -o-transform: translateX(0); } }

@keyframes fadeInRight {
  0% {
    opacity: 0;
    transform: translateX(20px); }

  100% {
    opacity: 1;
    transform: translateX(0); } }

.fadeInRight {
  -webkit-animation-name: fadeInRight;
  -moz-animation-name: fadeInRight;
  -o-animation-name: fadeInRight;
  animation-name: fadeInRight; }

@-webkit-keyframes fadeInUpBig {
  0% {
    opacity: 0;
    -webkit-transform: translateY(2000px); }

  100% {
    opacity: 1;
    -webkit-transform: translateY(0); } }

@-moz-keyframes fadeInUpBig {
  0% {
    opacity: 0;
    -moz-transform: translateY(2000px); }

  100% {
    opacity: 1;
    -moz-transform: translateY(0); } }

@-o-keyframes fadeInUpBig {
  0% {
    opacity: 0;
    -o-transform: translateY(2000px); }

  100% {
    opacity: 1;
    -o-transform: translateY(0); } }

@keyframes fadeInUpBig {
  0% {
    opacity: 0;
    transform: translateY(2000px); }

  100% {
    opacity: 1;
    transform: translateY(0); } }

.fadeInUpBig {
  -webkit-animation-name: fadeInUpBig;
  -moz-animation-name: fadeInUpBig;
  -o-animation-name: fadeInUpBig;
  animation-name: fadeInUpBig; }

@-webkit-keyframes fadeInDownBig {
  0% {
    opacity: 0;
    -webkit-transform: translateY(-2000px); }

  100% {
    opacity: 1;
    -webkit-transform: translateY(0); } }

@-moz-keyframes fadeInDownBig {
  0% {
    opacity: 0;
    -moz-transform: translateY(-2000px); }

  100% {
    opacity: 1;
    -moz-transform: translateY(0); } }

@-o-keyframes fadeInDownBig {
  0% {
    opacity: 0;
    -o-transform: translateY(-2000px); }

  100% {
    opacity: 1;
    -o-transform: translateY(0); } }

@keyframes fadeInDownBig {
  0% {
    opacity: 0;
    transform: translateY(-2000px); }

  100% {
    opacity: 1;
    transform: translateY(0); } }

.fadeInDownBig {
  -webkit-animation-name: fadeInDownBig;
  -moz-animation-name: fadeInDownBig;
  -o-animation-name: fadeInDownBig;
  animation-name: fadeInDownBig; }

@-webkit-keyframes fadeInLeftBig {
  0% {
    opacity: 0;
    -webkit-transform: translateX(-2000px); }

  100% {
    opacity: 1;
    -webkit-transform: translateX(0); } }

@-moz-keyframes fadeInLeftBig {
  0% {
    opacity: 0;
    -moz-transform: translateX(-2000px); }

  100% {
    opacity: 1;
    -moz-transform: translateX(0); } }

@-o-keyframes fadeInLeftBig {
  0% {
    opacity: 0;
    -o-transform: translateX(-2000px); }

  100% {
    opacity: 1;
    -o-transform: translateX(0); } }

@keyframes fadeInLeftBig {
  0% {
    opacity: 0;
    transform: translateX(-2000px); }

  100% {
    opacity: 1;
    transform: translateX(0); } }

.fadeInLeftBig {
  -webkit-animation-name: fadeInLeftBig;
  -moz-animation-name: fadeInLeftBig;
  -o-animation-name: fadeInLeftBig;
  animation-name: fadeInLeftBig; }

@-webkit-keyframes fadeInRightBig {
  0% {
    opacity: 0;
    -webkit-transform: translateX(2000px); }

  100% {
    opacity: 1;
    -webkit-transform: translateX(0); } }

@-moz-keyframes fadeInRightBig {
  0% {
    opacity: 0;
    -moz-transform: translateX(2000px); }

  100% {
    opacity: 1;
    -moz-transform: translateX(0); } }

@-o-keyframes fadeInRightBig {
  0% {
    opacity: 0;
    -o-transform: translateX(2000px); }

  100% {
    opacity: 1;
    -o-transform: translateX(0); } }

@keyframes fadeInRightBig {
  0% {
    opacity: 0;
    transform: translateX(2000px); }

  100% {
    opacity: 1;
    transform: translateX(0); } }

.fadeInRightBig {
  -webkit-animation-name: fadeInRightBig;
  -moz-animation-name: fadeInRightBig;
  -o-animation-name: fadeInRightBig;
  animation-name: fadeInRightBig; }

@-webkit-keyframes fadeOut {
  0% {
    opacity: 1; }

  100% {
    opacity: 0; } }

@-moz-keyframes fadeOut {
  0% {
    opacity: 1; }

  100% {
    opacity: 0; } }

@-o-keyframes fadeOut {
  0% {
    opacity: 1; }

  100% {
    opacity: 0; } }

@keyframes fadeOut {
  0% {
    opacity: 1; }

  100% {
    opacity: 0; } }

.fadeOut {
  -webkit-animation-name: fadeOut;
  -moz-animation-name: fadeOut;
  -o-animation-name: fadeOut;
  animation-name: fadeOut; }

@-webkit-keyframes fadeOutUp {
  0% {
    opacity: 1;
    -webkit-transform: translateY(0); }

  100% {
    opacity: 0;
    -webkit-transform: translateY(-20px); } }

@-moz-keyframes fadeOutUp {
  0% {
    opacity: 1;
    -moz-transform: translateY(0); }

  100% {
    opacity: 0;
    -moz-transform: translateY(-20px); } }

@-o-keyframes fadeOutUp {
  0% {
    opacity: 1;
    -o-transform: translateY(0); }

  100% {
    opacity: 0;
    -o-transform: translateY(-20px); } }

@keyframes fadeOutUp {
  0% {
    opacity: 1;
    transform: translateY(0); }

  100% {
    opacity: 0;
    transform: translateY(-20px); } }

.fadeOutUp {
  -webkit-animation-name: fadeOutUp;
  -moz-animation-name: fadeOutUp;
  -o-animation-name: fadeOutUp;
  animation-name: fadeOutUp; }

@-webkit-keyframes fadeOutDown {
  0% {
    opacity: 1;
    -webkit-transform: translateY(0); }

  100% {
    opacity: 0;
    -webkit-transform: translateY(20px); } }

@-moz-keyframes fadeOutDown {
  0% {
    opacity: 1;
    -moz-transform: translateY(0); }

  100% {
    opacity: 0;
    -moz-transform: translateY(20px); } }

@-o-keyframes fadeOutDown {
  0% {
    opacity: 1;
    -o-transform: translateY(0); }

  100% {
    opacity: 0;
    -o-transform: translateY(20px); } }

@keyframes fadeOutDown {
  0% {
    opacity: 1;
    transform: translateY(0); }

  100% {
    opacity: 0;
    transform: translateY(20px); } }

.fadeOutDown {
  -webkit-animation-name: fadeOutDown;
  -moz-animation-name: fadeOutDown;
  -o-animation-name: fadeOutDown;
  animation-name: fadeOutDown; }

@-webkit-keyframes fadeOutLeft {
  0% {
    opacity: 1;
    -webkit-transform: translateX(0); }

  100% {
    opacity: 0;
    -webkit-transform: translateX(-20px); } }

@-moz-keyframes fadeOutLeft {
  0% {
    opacity: 1;
    -moz-transform: translateX(0); }

  100% {
    opacity: 0;
    -moz-transform: translateX(-20px); } }

@-o-keyframes fadeOutLeft {
  0% {
    opacity: 1;
    -o-transform: translateX(0); }

  100% {
    opacity: 0;
    -o-transform: translateX(-20px); } }

@keyframes fadeOutLeft {
  0% {
    opacity: 1;
    transform: translateX(0); }

  100% {
    opacity: 0;
    transform: translateX(-20px); } }

.fadeOutLeft {
  -webkit-animation-name: fadeOutLeft;
  -moz-animation-name: fadeOutLeft;
  -o-animation-name: fadeOutLeft;
  animation-name: fadeOutLeft; }

@-webkit-keyframes fadeOutRight {
  0% {
    opacity: 1;
    -webkit-transform: translateX(0); }

  100% {
    opacity: 0;
    -webkit-transform: translateX(20px); } }

@-moz-keyframes fadeOutRight {
  0% {
    opacity: 1;
    -moz-transform: translateX(0); }

  100% {
    opacity: 0;
    -moz-transform: translateX(20px); } }

@-o-keyframes fadeOutRight {
  0% {
    opacity: 1;
    -o-transform: translateX(0); }

  100% {
    opacity: 0;
    -o-transform: translateX(20px); } }

@keyframes fadeOutRight {
  0% {
    opacity: 1;
    transform: translateX(0); }

  100% {
    opacity: 0;
    transform: translateX(20px); } }

.fadeOutRight {
  -webkit-animation-name: fadeOutRight;
  -moz-animation-name: fadeOutRight;
  -o-animation-name: fadeOutRight;
  animation-name: fadeOutRight; }

@-webkit-keyframes fadeOutUpBig {
  0% {
    opacity: 1;
    -webkit-transform: translateY(0); }

  100% {
    opacity: 0;
    -webkit-transform: translateY(-2000px); } }

@-moz-keyframes fadeOutUpBig {
  0% {
    opacity: 1;
    -moz-transform: translateY(0); }

  100% {
    opacity: 0;
    -moz-transform: translateY(-2000px); } }

@-o-keyframes fadeOutUpBig {
  0% {
    opacity: 1;
    -o-transform: translateY(0); }

  100% {
    opacity: 0;
    -o-transform: translateY(-2000px); } }

@keyframes fadeOutUpBig {
  0% {
    opacity: 1;
    transform: translateY(0); }

  100% {
    opacity: 0;
    transform: translateY(-2000px); } }

.fadeOutUpBig {
  -webkit-animation-name: fadeOutUpBig;
  -moz-animation-name: fadeOutUpBig;
  -o-animation-name: fadeOutUpBig;
  animation-name: fadeOutUpBig; }

@-webkit-keyframes fadeOutDownBig {
  0% {
    opacity: 1;
    -webkit-transform: translateY(0); }

  100% {
    opacity: 0;
    -webkit-transform: translateY(2000px); } }

@-moz-keyframes fadeOutDownBig {
  0% {
    opacity: 1;
    -moz-transform: translateY(0); }

  100% {
    opacity: 0;
    -moz-transform: translateY(2000px); } }

@-o-keyframes fadeOutDownBig {
  0% {
    opacity: 1;
    -o-transform: translateY(0); }

  100% {
    opacity: 0;
    -o-transform: translateY(2000px); } }

@keyframes fadeOutDownBig {
  0% {
    opacity: 1;
    transform: translateY(0); }

  100% {
    opacity: 0;
    transform: translateY(2000px); } }

.fadeOutDownBig {
  -webkit-animation-name: fadeOutDownBig;
  -moz-animation-name: fadeOutDownBig;
  -o-animation-name: fadeOutDownBig;
  animation-name: fadeOutDownBig; }

@-webkit-keyframes fadeOutLeftBig {
  0% {
    opacity: 1;
    -webkit-transform: translateX(0); }

  100% {
    opacity: 0;
    -webkit-transform: translateX(-2000px); } }

@-moz-keyframes fadeOutLeftBig {
  0% {
    opacity: 1;
    -moz-transform: translateX(0); }

  100% {
    opacity: 0;
    -moz-transform: translateX(-2000px); } }

@-o-keyframes fadeOutLeftBig {
  0% {
    opacity: 1;
    -o-transform: translateX(0); }

  100% {
    opacity: 0;
    -o-transform: translateX(-2000px); } }

@keyframes fadeOutLeftBig {
  0% {
    opacity: 1;
    transform: translateX(0); }

  100% {
    opacity: 0;
    transform: translateX(-2000px); } }

.fadeOutLeftBig {
  -webkit-animation-name: fadeOutLeftBig;
  -moz-animation-name: fadeOutLeftBig;
  -o-animation-name: fadeOutLeftBig;
  animation-name: fadeOutLeftBig; }

@-webkit-keyframes fadeOutRightBig {
  0% {
    opacity: 1;
    -webkit-transform: translateX(0); }

  100% {
    opacity: 0;
    -webkit-transform: translateX(2000px); } }

@-moz-keyframes fadeOutRightBig {
  0% {
    opacity: 1;
    -moz-transform: translateX(0); }

  100% {
    opacity: 0;
    -moz-transform: translateX(2000px); } }

@-o-keyframes fadeOutRightBig {
  0% {
    opacity: 1;
    -o-transform: translateX(0); }

  100% {
    opacity: 0;
    -o-transform: translateX(2000px); } }

@keyframes fadeOutRightBig {
  0% {
    opacity: 1;
    transform: translateX(0); }

  100% {
    opacity: 0;
    transform: translateX(2000px); } }

.fadeOutRightBig {
  -webkit-animation-name: fadeOutRightBig;
  -moz-animation-name: fadeOutRightBig;
  -o-animation-name: fadeOutRightBig;
  animation-name: fadeOutRightBig; }

@-webkit-keyframes bounceIn {
  0% {
    opacity: 0;
    -webkit-transform: scale(0.3); }

  50% {
    opacity: 1;
    -webkit-transform: scale(1.05); }

  70% {
    -webkit-transform: scale(0.9); }

  100% {
    -webkit-transform: scale(1); } }

@-moz-keyframes bounceIn {
  0% {
    opacity: 0;
    -moz-transform: scale(0.3); }

  50% {
    opacity: 1;
    -moz-transform: scale(1.05); }

  70% {
    -moz-transform: scale(0.9); }

  100% {
    -moz-transform: scale(1); } }

@-o-keyframes bounceIn {
  0% {
    opacity: 0;
    -o-transform: scale(0.3); }

  50% {
    opacity: 1;
    -o-transform: scale(1.05); }

  70% {
    -o-transform: scale(0.9); }

  100% {
    -o-transform: scale(1); } }

@keyframes bounceIn {
  0% {
    opacity: 0;
    transform: scale(0.3); }

  50% {
    opacity: 1;
    transform: scale(1.05); }

  70% {
    transform: scale(0.9); }

  100% {
    transform: scale(1); } }

.bounceIn {
  -webkit-animation-name: bounceIn;
  -moz-animation-name: bounceIn;
  -o-animation-name: bounceIn;
  animation-name: bounceIn; }

@-webkit-keyframes bounceInUp {
  0% {
    opacity: 0;
    -webkit-transform: translateY(2000px); }

  60% {
    opacity: 1;
    -webkit-transform: translateY(-30px); }

  80% {
    -webkit-transform: translateY(10px); }

  100% {
    -webkit-transform: translateY(0); } }

@-moz-keyframes bounceInUp {
  0% {
    opacity: 0;
    -moz-transform: translateY(2000px); }

  60% {
    opacity: 1;
    -moz-transform: translateY(-30px); }

  80% {
    -moz-transform: translateY(10px); }

  100% {
    -moz-transform: translateY(0); } }

@-o-keyframes bounceInUp {
  0% {
    opacity: 0;
    -o-transform: translateY(2000px); }

  60% {
    opacity: 1;
    -o-transform: translateY(-30px); }

  80% {
    -o-transform: translateY(10px); }

  100% {
    -o-transform: translateY(0); } }

@keyframes bounceInUp {
  0% {
    opacity: 0;
    transform: translateY(2000px); }

  60% {
    opacity: 1;
    transform: translateY(-30px); }

  80% {
    transform: translateY(10px); }

  100% {
    transform: translateY(0); } }

.bounceInUp {
  -webkit-animation-name: bounceInUp;
  -moz-animation-name: bounceInUp;
  -o-animation-name: bounceInUp;
  animation-name: bounceInUp; }

@-webkit-keyframes bounceInDown {
  0% {
    opacity: 0;
    -webkit-transform: translateY(-2000px); }

  60% {
    opacity: 1;
    -webkit-transform: translateY(30px); }

  80% {
    -webkit-transform: translateY(-10px); }

  100% {
    -webkit-transform: translateY(0); } }

@-moz-keyframes bounceInDown {
  0% {
    opacity: 0;
    -moz-transform: translateY(-2000px); }

  60% {
    opacity: 1;
    -moz-transform: translateY(30px); }

  80% {
    -moz-transform: translateY(-10px); }

  100% {
    -moz-transform: translateY(0); } }

@-o-keyframes bounceInDown {
  0% {
    opacity: 0;
    -o-transform: translateY(-2000px); }

  60% {
    opacity: 1;
    -o-transform: translateY(30px); }

  80% {
    -o-transform: translateY(-10px); }

  100% {
    -o-transform: translateY(0); } }

@keyframes bounceInDown {
  0% {
    opacity: 0;
    transform: translateY(-2000px); }

  60% {
    opacity: 1;
    transform: translateY(30px); }

  80% {
    transform: translateY(-10px); }

  100% {
    transform: translateY(0); } }

.bounceInDown {
  -webkit-animation-name: bounceInDown;
  -moz-animation-name: bounceInDown;
  -o-animation-name: bounceInDown;
  animation-name: bounceInDown; }

@-webkit-keyframes bounceInLeft {
  0% {
    opacity: 0;
    -webkit-transform: translateX(-2000px); }

  60% {
    opacity: 1;
    -webkit-transform: translateX(30px); }

  80% {
    -webkit-transform: translateX(-10px); }

  100% {
    -webkit-transform: translateX(0); } }

@-moz-keyframes bounceInLeft {
  0% {
    opacity: 0;
    -moz-transform: translateX(-2000px); }

  60% {
    opacity: 1;
    -moz-transform: translateX(30px); }

  80% {
    -moz-transform: translateX(-10px); }

  100% {
    -moz-transform: translateX(0); } }

@-o-keyframes bounceInLeft {
  0% {
    opacity: 0;
    -o-transform: translateX(-2000px); }

  60% {
    opacity: 1;
    -o-transform: translateX(30px); }

  80% {
    -o-transform: translateX(-10px); }

  100% {
    -o-transform: translateX(0); } }

@keyframes bounceInLeft {
  0% {
    opacity: 0;
    transform: translateX(-2000px); }

  60% {
    opacity: 1;
    transform: translateX(30px); }

  80% {
    transform: translateX(-10px); }

  100% {
    transform: translateX(0); } }

.bounceInLeft {
  -webkit-animation-name: bounceInLeft;
  -moz-animation-name: bounceInLeft;
  -o-animation-name: bounceInLeft;
  animation-name: bounceInLeft; }

@-webkit-keyframes bounceInRight {
  0% {
    opacity: 0;
    -webkit-transform: translateX(2000px); }

  60% {
    opacity: 1;
    -webkit-transform: translateX(-30px); }

  80% {
    -webkit-transform: translateX(10px); }

  100% {
    -webkit-transform: translateX(0); } }

@-moz-keyframes bounceInRight {
  0% {
    opacity: 0;
    -moz-transform: translateX(2000px); }

  60% {
    opacity: 1;
    -moz-transform: translateX(-30px); }

  80% {
    -moz-transform: translateX(10px); }

  100% {
    -moz-transform: translateX(0); } }

@-o-keyframes bounceInRight {
  0% {
    opacity: 0;
    -o-transform: translateX(2000px); }

  60% {
    opacity: 1;
    -o-transform: translateX(-30px); }

  80% {
    -o-transform: translateX(10px); }

  100% {
    -o-transform: translateX(0); } }

@keyframes bounceInRight {
  0% {
    opacity: 0;
    transform: translateX(2000px); }

  60% {
    opacity: 1;
    transform: translateX(-30px); }

  80% {
    transform: translateX(10px); }

  100% {
    transform: translateX(0); } }

.bounceInRight {
  -webkit-animation-name: bounceInRight;
  -moz-animation-name: bounceInRight;
  -o-animation-name: bounceInRight;
  animation-name: bounceInRight; }

@-webkit-keyframes bounceOut {
  0% {
    -webkit-transform: scale(1); }

  25% {
    -webkit-transform: scale(0.95); }

  50% {
    opacity: 1;
    -webkit-transform: scale(1.1); }

  100% {
    opacity: 0;
    -webkit-transform: scale(0.3); } }

@-moz-keyframes bounceOut {
  0% {
    -moz-transform: scale(1); }

  25% {
    -moz-transform: scale(0.95); }

  50% {
    opacity: 1;
    -moz-transform: scale(1.1); }

  100% {
    opacity: 0;
    -moz-transform: scale(0.3); } }

@-o-keyframes bounceOut {
  0% {
    -o-transform: scale(1); }

  25% {
    -o-transform: scale(0.95); }

  50% {
    opacity: 1;
    -o-transform: scale(1.1); }

  100% {
    opacity: 0;
    -o-transform: scale(0.3); } }

@keyframes bounceOut {
  0% {
    transform: scale(1); }

  25% {
    transform: scale(0.95); }

  50% {
    opacity: 1;
    transform: scale(1.1); }

  100% {
    opacity: 0;
    transform: scale(0.3); } }

.bounceOut {
  -webkit-animation-name: bounceOut;
  -moz-animation-name: bounceOut;
  -o-animation-name: bounceOut;
  animation-name: bounceOut; }

@-webkit-keyframes bounceOutUp {
  0% {
    -webkit-transform: translateY(0); }

  20% {
    opacity: 1;
    -webkit-transform: translateY(20px); }

  100% {
    opacity: 0;
    -webkit-transform: translateY(-2000px); } }

@-moz-keyframes bounceOutUp {
  0% {
    -moz-transform: translateY(0); }

  20% {
    opacity: 1;
    -moz-transform: translateY(20px); }

  100% {
    opacity: 0;
    -moz-transform: translateY(-2000px); } }

@-o-keyframes bounceOutUp {
  0% {
    -o-transform: translateY(0); }

  20% {
    opacity: 1;
    -o-transform: translateY(20px); }

  100% {
    opacity: 0;
    -o-transform: translateY(-2000px); } }

@keyframes bounceOutUp {
  0% {
    transform: translateY(0); }

  20% {
    opacity: 1;
    transform: translateY(20px); }

  100% {
    opacity: 0;
    transform: translateY(-2000px); } }

.bounceOutUp {
  -webkit-animation-name: bounceOutUp;
  -moz-animation-name: bounceOutUp;
  -o-animation-name: bounceOutUp;
  animation-name: bounceOutUp; }

@-webkit-keyframes bounceOutDown {
  0% {
    -webkit-transform: translateY(0); }

  20% {
    opacity: 1;
    -webkit-transform: translateY(-20px); }

  100% {
    opacity: 0;
    -webkit-transform: translateY(2000px); } }

@-moz-keyframes bounceOutDown {
  0% {
    -moz-transform: translateY(0); }

  20% {
    opacity: 1;
    -moz-transform: translateY(-20px); }

  100% {
    opacity: 0;
    -moz-transform: translateY(2000px); } }

@-o-keyframes bounceOutDown {
  0% {
    -o-transform: translateY(0); }

  20% {
    opacity: 1;
    -o-transform: translateY(-20px); }

  100% {
    opacity: 0;
    -o-transform: translateY(2000px); } }

@keyframes bounceOutDown {
  0% {
    transform: translateY(0); }

  20% {
    opacity: 1;
    transform: translateY(-20px); }

  100% {
    opacity: 0;
    transform: translateY(2000px); } }

.bounceOutDown {
  -webkit-animation-name: bounceOutDown;
  -moz-animation-name: bounceOutDown;
  -o-animation-name: bounceOutDown;
  animation-name: bounceOutDown; }

@-webkit-keyframes bounceOutLeft {
  0% {
    -webkit-transform: translateX(0); }

  20% {
    opacity: 1;
    -webkit-transform: translateX(20px); }

  100% {
    opacity: 0;
    -webkit-transform: translateX(-2000px); } }

@-moz-keyframes bounceOutLeft {
  0% {
    -moz-transform: translateX(0); }

  20% {
    opacity: 1;
    -moz-transform: translateX(20px); }

  100% {
    opacity: 0;
    -moz-transform: translateX(-2000px); } }

@-o-keyframes bounceOutLeft {
  0% {
    -o-transform: translateX(0); }

  20% {
    opacity: 1;
    -o-transform: translateX(20px); }

  100% {
    opacity: 0;
    -o-transform: translateX(-2000px); } }

@keyframes bounceOutLeft {
  0% {
    transform: translateX(0); }

  20% {
    opacity: 1;
    transform: translateX(20px); }

  100% {
    opacity: 0;
    transform: translateX(-2000px); } }

.bounceOutLeft {
  -webkit-animation-name: bounceOutLeft;
  -moz-animation-name: bounceOutLeft;
  -o-animation-name: bounceOutLeft;
  animation-name: bounceOutLeft; }

@-webkit-keyframes bounceOutRight {
  0% {
    -webkit-transform: translateX(0); }

  20% {
    opacity: 1;
    -webkit-transform: translateX(-20px); }

  100% {
    opacity: 0;
    -webkit-transform: translateX(2000px); } }

@-moz-keyframes bounceOutRight {
  0% {
    -moz-transform: translateX(0); }

  20% {
    opacity: 1;
    -moz-transform: translateX(-20px); }

  100% {
    opacity: 0;
    -moz-transform: translateX(2000px); } }

@-o-keyframes bounceOutRight {
  0% {
    -o-transform: translateX(0); }

  20% {
    opacity: 1;
    -o-transform: translateX(-20px); }

  100% {
    opacity: 0;
    -o-transform: translateX(2000px); } }

@keyframes bounceOutRight {
  0% {
    transform: translateX(0); }

  20% {
    opacity: 1;
    transform: translateX(-20px); }

  100% {
    opacity: 0;
    transform: translateX(2000px); } }

.bounceOutRight {
  -webkit-animation-name: bounceOutRight;
  -moz-animation-name: bounceOutRight;
  -o-animation-name: bounceOutRight;
  animation-name: bounceOutRight; }

@-webkit-keyframes rotateIn {
  0% {
    -webkit-transform-origin: center center;
    -webkit-transform: rotate(-200deg);
    opacity: 0; }

  100% {
    -webkit-transform-origin: center center;
    -webkit-transform: rotate(0);
    opacity: 1; } }

@-moz-keyframes rotateIn {
  0% {
    -moz-transform-origin: center center;
    -moz-transform: rotate(-200deg);
    opacity: 0; }

  100% {
    -moz-transform-origin: center center;
    -moz-transform: rotate(0);
    opacity: 1; } }

@-o-keyframes rotateIn {
  0% {
    -o-transform-origin: center center;
    -o-transform: rotate(-200deg);
    opacity: 0; }

  100% {
    -o-transform-origin: center center;
    -o-transform: rotate(0);
    opacity: 1; } }

@keyframes rotateIn {
  0% {
    transform-origin: center center;
    transform: rotate(-200deg);
    opacity: 0; }

  100% {
    transform-origin: center center;
    transform: rotate(0);
    opacity: 1; } }

.rotateIn {
  -webkit-animation-name: rotateIn;
  -moz-animation-name: rotateIn;
  -o-animation-name: rotateIn;
  animation-name: rotateIn; }

@-webkit-keyframes rotateInUpLeft {
  0% {
    -webkit-transform-origin: left bottom;
    -webkit-transform: rotate(90deg);
    opacity: 0; }

  100% {
    -webkit-transform-origin: left bottom;
    -webkit-transform: rotate(0);
    opacity: 1; } }

@-moz-keyframes rotateInUpLeft {
  0% {
    -moz-transform-origin: left bottom;
    -moz-transform: rotate(90deg);
    opacity: 0; }

  100% {
    -moz-transform-origin: left bottom;
    -moz-transform: rotate(0);
    opacity: 1; } }

@-o-keyframes rotateInUpLeft {
  0% {
    -o-transform-origin: left bottom;
    -o-transform: rotate(90deg);
    opacity: 0; }

  100% {
    -o-transform-origin: left bottom;
    -o-transform: rotate(0);
    opacity: 1; } }

@keyframes rotateInUpLeft {
  0% {
    transform-origin: left bottom;
    transform: rotate(90deg);
    opacity: 0; }

  100% {
    transform-origin: left bottom;
    transform: rotate(0);
    opacity: 1; } }

.rotateInUpLeft {
  -webkit-animation-name: rotateInUpLeft;
  -moz-animation-name: rotateInUpLeft;
  -o-animation-name: rotateInUpLeft;
  animation-name: rotateInUpLeft; }

@-webkit-keyframes rotateInDownLeft {
  0% {
    -webkit-transform-origin: left bottom;
    -webkit-transform: rotate(-90deg);
    opacity: 0; }

  100% {
    -webkit-transform-origin: left bottom;
    -webkit-transform: rotate(0);
    opacity: 1; } }

@-moz-keyframes rotateInDownLeft {
  0% {
    -moz-transform-origin: left bottom;
    -moz-transform: rotate(-90deg);
    opacity: 0; }

  100% {
    -moz-transform-origin: left bottom;
    -moz-transform: rotate(0);
    opacity: 1; } }

@-o-keyframes rotateInDownLeft {
  0% {
    -o-transform-origin: left bottom;
    -o-transform: rotate(-90deg);
    opacity: 0; }

  100% {
    -o-transform-origin: left bottom;
    -o-transform: rotate(0);
    opacity: 1; } }

@keyframes rotateInDownLeft {
  0% {
    transform-origin: left bottom;
    transform: rotate(-90deg);
    opacity: 0; }

  100% {
    transform-origin: left bottom;
    transform: rotate(0);
    opacity: 1; } }

.rotateInDownLeft {
  -webkit-animation-name: rotateInDownLeft;
  -moz-animation-name: rotateInDownLeft;
  -o-animation-name: rotateInDownLeft;
  animation-name: rotateInDownLeft; }

@-webkit-keyframes rotateInUpRight {
  0% {
    -webkit-transform-origin: right bottom;
    -webkit-transform: rotate(-90deg);
    opacity: 0; }

  100% {
    -webkit-transform-origin: right bottom;
    -webkit-transform: rotate(0);
    opacity: 1; } }

@-moz-keyframes rotateInUpRight {
  0% {
    -moz-transform-origin: right bottom;
    -moz-transform: rotate(-90deg);
    opacity: 0; }

  100% {
    -moz-transform-origin: right bottom;
    -moz-transform: rotate(0);
    opacity: 1; } }

@-o-keyframes rotateInUpRight {
  0% {
    -o-transform-origin: right bottom;
    -o-transform: rotate(-90deg);
    opacity: 0; }

  100% {
    -o-transform-origin: right bottom;
    -o-transform: rotate(0);
    opacity: 1; } }

@keyframes rotateInUpRight {
  0% {
    transform-origin: right bottom;
    transform: rotate(-90deg);
    opacity: 0; }

  100% {
    transform-origin: right bottom;
    transform: rotate(0);
    opacity: 1; } }

.rotateInUpRight {
  -webkit-animation-name: rotateInUpRight;
  -moz-animation-name: rotateInUpRight;
  -o-animation-name: rotateInUpRight;
  animation-name: rotateInUpRight; }

@-webkit-keyframes rotateInDownRight {
  0% {
    -webkit-transform-origin: right bottom;
    -webkit-transform: rotate(90deg);
    opacity: 0; }

  100% {
    -webkit-transform-origin: right bottom;
    -webkit-transform: rotate(0);
    opacity: 1; } }

@-moz-keyframes rotateInDownRight {
  0% {
    -moz-transform-origin: right bottom;
    -moz-transform: rotate(90deg);
    opacity: 0; }

  100% {
    -moz-transform-origin: right bottom;
    -moz-transform: rotate(0);
    opacity: 1; } }

@-o-keyframes rotateInDownRight {
  0% {
    -o-transform-origin: right bottom;
    -o-transform: rotate(90deg);
    opacity: 0; }

  100% {
    -o-transform-origin: right bottom;
    -o-transform: rotate(0);
    opacity: 1; } }

@keyframes rotateInDownRight {
  0% {
    transform-origin: right bottom;
    transform: rotate(90deg);
    opacity: 0; }

  100% {
    transform-origin: right bottom;
    transform: rotate(0);
    opacity: 1; } }

.rotateInDownRight {
  -webkit-animation-name: rotateInDownRight;
  -moz-animation-name: rotateInDownRight;
  -o-animation-name: rotateInDownRight;
  animation-name: rotateInDownRight; }

@-webkit-keyframes rotateOut {
  0% {
    -webkit-transform-origin: center center;
    -webkit-transform: rotate(0);
    opacity: 1; }

  100% {
    -webkit-transform-origin: center center;
    -webkit-transform: rotate(200deg);
    opacity: 0; } }

@-moz-keyframes rotateOut {
  0% {
    -moz-transform-origin: center center;
    -moz-transform: rotate(0);
    opacity: 1; }

  100% {
    -moz-transform-origin: center center;
    -moz-transform: rotate(200deg);
    opacity: 0; } }

@-o-keyframes rotateOut {
  0% {
    -o-transform-origin: center center;
    -o-transform: rotate(0);
    opacity: 1; }

  100% {
    -o-transform-origin: center center;
    -o-transform: rotate(200deg);
    opacity: 0; } }

@keyframes rotateOut {
  0% {
    transform-origin: center center;
    transform: rotate(0);
    opacity: 1; }

  100% {
    transform-origin: center center;
    transform: rotate(200deg);
    opacity: 0; } }

.rotateOut {
  -webkit-animation-name: rotateOut;
  -moz-animation-name: rotateOut;
  -o-animation-name: rotateOut;
  animation-name: rotateOut; }

@-webkit-keyframes rotateOutUpLeft {
  0% {
    -webkit-transform-origin: left bottom;
    -webkit-transform: rotate(0);
    opacity: 1; }

  100% {
    -webkit-transform-origin: left bottom;
    -webkit-transform: rotate(-90deg);
    opacity: 0; } }

@-moz-keyframes rotateOutUpLeft {
  0% {
    -moz-transform-origin: left bottom;
    -moz-transform: rotate(0);
    opacity: 1; }

  100% {
    -moz-transform-origin: left bottom;
    -moz-transform: rotate(-90deg);
    opacity: 0; } }

@-o-keyframes rotateOutUpLeft {
  0% {
    -o-transform-origin: left bottom;
    -o-transform: rotate(0);
    opacity: 1; }

  100% {
    -o-transform-origin: left bottom;
    -o-transform: rotate(-90deg);
    opacity: 0; } }

@keyframes rotateOutUpLeft {
  0% {
    transform-origin: left bottom;
    transform: rotate(0);
    opacity: 1; }

  100% {
    transform-origin: left bottom;
    transform: rotate(-90deg);
    opacity: 0; } }

.rotateOutUpLeft {
  -webkit-animation-name: rotateOutUpLeft;
  -moz-animation-name: rotateOutUpLeft;
  -o-animation-name: rotateOutUpLeft;
  animation-name: rotateOutUpLeft; }

@-webkit-keyframes rotateOutDownLeft {
  0% {
    -webkit-transform-origin: left bottom;
    -webkit-transform: rotate(0);
    opacity: 1; }

  100% {
    -webkit-transform-origin: left bottom;
    -webkit-transform: rotate(90deg);
    opacity: 0; } }

@-moz-keyframes rotateOutDownLeft {
  0% {
    -moz-transform-origin: left bottom;
    -moz-transform: rotate(0);
    opacity: 1; }

  100% {
    -moz-transform-origin: left bottom;
    -moz-transform: rotate(90deg);
    opacity: 0; } }

@-o-keyframes rotateOutDownLeft {
  0% {
    -o-transform-origin: left bottom;
    -o-transform: rotate(0);
    opacity: 1; }

  100% {
    -o-transform-origin: left bottom;
    -o-transform: rotate(90deg);
    opacity: 0; } }

@keyframes rotateOutDownLeft {
  0% {
    transform-origin: left bottom;
    transform: rotate(0);
    opacity: 1; }

  100% {
    transform-origin: left bottom;
    transform: rotate(90deg);
    opacity: 0; } }

.rotateOutDownLeft {
  -webkit-animation-name: rotateOutDownLeft;
  -moz-animation-name: rotateOutDownLeft;
  -o-animation-name: rotateOutDownLeft;
  animation-name: rotateOutDownLeft; }

@-webkit-keyframes rotateOutUpRight {
  0% {
    -webkit-transform-origin: right bottom;
    -webkit-transform: rotate(0);
    opacity: 1; }

  100% {
    -webkit-transform-origin: right bottom;
    -webkit-transform: rotate(90deg);
    opacity: 0; } }

@-moz-keyframes rotateOutUpRight {
  0% {
    -moz-transform-origin: right bottom;
    -moz-transform: rotate(0);
    opacity: 1; }

  100% {
    -moz-transform-origin: right bottom;
    -moz-transform: rotate(90deg);
    opacity: 0; } }

@-o-keyframes rotateOutUpRight {
  0% {
    -o-transform-origin: right bottom;
    -o-transform: rotate(0);
    opacity: 1; }

  100% {
    -o-transform-origin: right bottom;
    -o-transform: rotate(90deg);
    opacity: 0; } }

@keyframes rotateOutUpRight {
  0% {
    transform-origin: right bottom;
    transform: rotate(0);
    opacity: 1; }

  100% {
    transform-origin: right bottom;
    transform: rotate(90deg);
    opacity: 0; } }

.rotateOutUpRight {
  -webkit-animation-name: rotateOutUpRight;
  -moz-animation-name: rotateOutUpRight;
  -o-animation-name: rotateOutUpRight;
  animation-name: rotateOutUpRight; }

@-webkit-keyframes rotateOutDownRight {
  0% {
    -webkit-transform-origin: right bottom;
    -webkit-transform: rotate(0);
    opacity: 1; }

  100% {
    -webkit-transform-origin: right bottom;
    -webkit-transform: rotate(-90deg);
    opacity: 0; } }

@-moz-keyframes rotateOutDownRight {
  0% {
    -moz-transform-origin: right bottom;
    -moz-transform: rotate(0);
    opacity: 1; }

  100% {
    -moz-transform-origin: right bottom;
    -moz-transform: rotate(-90deg);
    opacity: 0; } }

@-o-keyframes rotateOutDownRight {
  0% {
    -o-transform-origin: right bottom;
    -o-transform: rotate(0);
    opacity: 1; }

  100% {
    -o-transform-origin: right bottom;
    -o-transform: rotate(-90deg);
    opacity: 0; } }

@keyframes rotateOutDownRight {
  0% {
    transform-origin: right bottom;
    transform: rotate(0);
    opacity: 1; }

  100% {
    transform-origin: right bottom;
    transform: rotate(-90deg);
    opacity: 0; } }

.rotateOutDownRight {
  -webkit-animation-name: rotateOutDownRight;
  -moz-animation-name: rotateOutDownRight;
  -o-animation-name: rotateOutDownRight;
  animation-name: rotateOutDownRight; }

@-webkit-keyframes hinge {
  0% {
    -webkit-transform: rotate(0);
    -webkit-transform-origin: top left;
    -webkit-animation-timing-function: ease-in-out; }

  20%, 60% {
    -webkit-transform: rotate(80deg);
    -webkit-transform-origin: top left;
    -webkit-animation-timing-function: ease-in-out; }

  40% {
    -webkit-transform: rotate(60deg);
    -webkit-transform-origin: top left;
    -webkit-animation-timing-function: ease-in-out; }

  80% {
    -webkit-transform: rotate(60deg) translateY(0);
    opacity: 1;
    -webkit-transform-origin: top left;
    -webkit-animation-timing-function: ease-in-out; }

  100% {
    -webkit-transform: translateY(700px);
    opacity: 0; } }

@-moz-keyframes hinge {
  0% {
    -moz-transform: rotate(0);
    -moz-transform-origin: top left;
    -moz-animation-timing-function: ease-in-out; }

  20%, 60% {
    -moz-transform: rotate(80deg);
    -moz-transform-origin: top left;
    -moz-animation-timing-function: ease-in-out; }

  40% {
    -moz-transform: rotate(60deg);
    -moz-transform-origin: top left;
    -moz-animation-timing-function: ease-in-out; }

  80% {
    -moz-transform: rotate(60deg) translateY(0);
    opacity: 1;
    -moz-transform-origin: top left;
    -moz-animation-timing-function: ease-in-out; }

  100% {
    -moz-transform: translateY(700px);
    opacity: 0; } }

@-o-keyframes hinge {
  0% {
    -o-transform: rotate(0);
    -o-transform-origin: top left;
    -o-animation-timing-function: ease-in-out; }

  20%, 60% {
    -o-transform: rotate(80deg);
    -o-transform-origin: top left;
    -o-animation-timing-function: ease-in-out; }

  40% {
    -o-transform: rotate(60deg);
    -o-transform-origin: top left;
    -o-animation-timing-function: ease-in-out; }

  80% {
    -o-transform: rotate(60deg) translateY(0);
    opacity: 1;
    -o-transform-origin: top left;
    -o-animation-timing-function: ease-in-out; }

  100% {
    -o-transform: translateY(700px);
    opacity: 0; } }

@keyframes hinge {
  0% {
    transform: rotate(0);
    transform-origin: top left;
    animation-timing-function: ease-in-out; }

  20%, 60% {
    transform: rotate(80deg);
    transform-origin: top left;
    animation-timing-function: ease-in-out; }

  40% {
    transform: rotate(60deg);
    transform-origin: top left;
    animation-timing-function: ease-in-out; }

  80% {
    transform: rotate(60deg) translateY(0);
    opacity: 1;
    transform-origin: top left;
    animation-timing-function: ease-in-out; }

  100% {
    transform: translateY(700px);
    opacity: 0; } }

.hinge {
  -webkit-animation-name: hinge;
  -moz-animation-name: hinge;
  -o-animation-name: hinge;
  animation-name: hinge; }

/* originally authored by Nick Pettit - https://github.com/nickpettit/glide */
@-webkit-keyframes rollIn {
  0% {
    opacity: 0;
    -webkit-transform: translateX(-100%) rotate(-120deg); }

  100% {
    opacity: 1;
    -webkit-transform: translateX(0px) rotate(0deg); } }

@-moz-keyframes rollIn {
  0% {
    opacity: 0;
    -moz-transform: translateX(-100%) rotate(-120deg); }

  100% {
    opacity: 1;
    -moz-transform: translateX(0px) rotate(0deg); } }

@-o-keyframes rollIn {
  0% {
    opacity: 0;
    -o-transform: translateX(-100%) rotate(-120deg); }

  100% {
    opacity: 1;
    -o-transform: translateX(0px) rotate(0deg); } }

@keyframes rollIn {
  0% {
    opacity: 0;
    transform: translateX(-100%) rotate(-120deg); }

  100% {
    opacity: 1;
    transform: translateX(0px) rotate(0deg); } }

.rollIn {
  -webkit-animation-name: rollIn;
  -moz-animation-name: rollIn;
  -o-animation-name: rollIn;
  animation-name: rollIn; }

/* originally authored by Nick Pettit - https://github.com/nickpettit/glide */
@-webkit-keyframes rollOut {
  0% {
    opacity: 1;
    -webkit-transform: translateX(0px) rotate(0deg); }

  100% {
    opacity: 0;
    -webkit-transform: translateX(100%) rotate(120deg); } }

@-moz-keyframes rollOut {
  0% {
    opacity: 1;
    -moz-transform: translateX(0px) rotate(0deg); }

  100% {
    opacity: 0;
    -moz-transform: translateX(100%) rotate(120deg); } }

@-o-keyframes rollOut {
  0% {
    opacity: 1;
    -o-transform: translateX(0px) rotate(0deg); }

  100% {
    opacity: 0;
    -o-transform: translateX(100%) rotate(120deg); } }

@keyframes rollOut {
  0% {
    opacity: 1;
    transform: translateX(0px) rotate(0deg); }

  100% {
    opacity: 0;
    transform: translateX(100%) rotate(120deg); } }

.rollOut {
  -webkit-animation-name: rollOut;
  -moz-animation-name: rollOut;
  -o-animation-name: rollOut;
  animation-name: rollOut; }

/* originally authored by Angelo Rohit - https://github.com/angelorohit */
@-webkit-keyframes lightSpeedIn {
  0% {
    -webkit-transform: translateX(100%) skewX(-30deg);
    opacity: 0; }

  60% {
    -webkit-transform: translateX(-20%) skewX(30deg);
    opacity: 1; }

  80% {
    -webkit-transform: translateX(0%) skewX(-15deg);
    opacity: 1; }

  100% {
    -webkit-transform: translateX(0%) skewX(0deg);
    opacity: 1; } }

@-moz-keyframes lightSpeedIn {
  0% {
    -moz-transform: translateX(100%) skewX(-30deg);
    opacity: 0; }

  60% {
    -moz-transform: translateX(-20%) skewX(30deg);
    opacity: 1; }

  80% {
    -moz-transform: translateX(0%) skewX(-15deg);
    opacity: 1; }

  100% {
    -moz-transform: translateX(0%) skewX(0deg);
    opacity: 1; } }

@-o-keyframes lightSpeedIn {
  0% {
    -o-transform: translateX(100%) skewX(-30deg);
    opacity: 0; }

  60% {
    -o-transform: translateX(-20%) skewX(30deg);
    opacity: 1; }

  80% {
    -o-transform: translateX(0%) skewX(-15deg);
    opacity: 1; }

  100% {
    -o-transform: translateX(0%) skewX(0deg);
    opacity: 1; } }

@keyframes lightSpeedIn {
  0% {
    transform: translateX(100%) skewX(-30deg);
    opacity: 0; }

  60% {
    transform: translateX(-20%) skewX(30deg);
    opacity: 1; }

  80% {
    transform: translateX(0%) skewX(-15deg);
    opacity: 1; }

  100% {
    transform: translateX(0%) skewX(0deg);
    opacity: 1; } }

.lightSpeedIn {
  -webkit-animation-name: lightSpeedIn;
  -moz-animation-name: lightSpeedIn;
  -o-animation-name: lightSpeedIn;
  animation-name: lightSpeedIn;
  -webkit-animation-timing-function: ease-out;
  -moz-animation-timing-function: ease-out;
  -o-animation-timing-function: ease-out;
  animation-timing-function: ease-out; }

.animated.lightSpeedIn {
  -webkit-animation-duration: 0.5s;
  -moz-animation-duration: 0.5s;
  -o-animation-duration: 0.5s;
  animation-duration: 0.5s; }

/* originally authored by Angelo Rohit - https://github.com/angelorohit */
@-webkit-keyframes lightSpeedOut {
  0% {
    -webkit-transform: translateX(0%) skewX(0deg);
    opacity: 1; }

  100% {
    -webkit-transform: translateX(100%) skewX(-30deg);
    opacity: 0; } }

@-moz-keyframes lightSpeedOut {
  0% {
    -moz-transform: translateX(0%) skewX(0deg);
    opacity: 1; }

  100% {
    -moz-transform: translateX(100%) skewX(-30deg);
    opacity: 0; } }

@-o-keyframes lightSpeedOut {
  0% {
    -o-transform: translateX(0%) skewX(0deg);
    opacity: 1; }

  100% {
    -o-transform: translateX(100%) skewX(-30deg);
    opacity: 0; } }

@keyframes lightSpeedOut {
  0% {
    transform: translateX(0%) skewX(0deg);
    opacity: 1; }

  100% {
    transform: translateX(100%) skewX(-30deg);
    opacity: 0; } }

.lightSpeedOut {
  -webkit-animation-name: lightSpeedOut;
  -moz-animation-name: lightSpeedOut;
  -o-animation-name: lightSpeedOut;
  animation-name: lightSpeedOut;
  -webkit-animation-timing-function: ease-in;
  -moz-animation-timing-function: ease-in;
  -o-animation-timing-function: ease-in;
  animation-timing-function: ease-in; }

.animated.lightSpeedOut {
  -webkit-animation-duration: 0.25s;
  -moz-animation-duration: 0.25s;
  -o-animation-duration: 0.25s;
  animation-duration: 0.25s; }

/* originally authored by Angelo Rohit - https://github.com/angelorohit */
@-webkit-keyframes wiggle {
  0% {
    -webkit-transform: skewX(9deg); }

  10% {
    -webkit-transform: skewX(-8deg); }

  20% {
    -webkit-transform: skewX(7deg); }

  30% {
    -webkit-transform: skewX(-6deg); }

  40% {
    -webkit-transform: skewX(5deg); }

  50% {
    -webkit-transform: skewX(-4deg); }

  60% {
    -webkit-transform: skewX(3deg); }

  70% {
    -webkit-transform: skewX(-2deg); }

  80% {
    -webkit-transform: skewX(1deg); }

  90% {
    -webkit-transform: skewX(0deg); }

  100% {
    -webkit-transform: skewX(0deg); } }

@-moz-keyframes wiggle {
  0% {
    -moz-transform: skewX(9deg); }

  10% {
    -moz-transform: skewX(-8deg); }

  20% {
    -moz-transform: skewX(7deg); }

  30% {
    -moz-transform: skewX(-6deg); }

  40% {
    -moz-transform: skewX(5deg); }

  50% {
    -moz-transform: skewX(-4deg); }

  60% {
    -moz-transform: skewX(3deg); }

  70% {
    -moz-transform: skewX(-2deg); }

  80% {
    -moz-transform: skewX(1deg); }

  90% {
    -moz-transform: skewX(0deg); }

  100% {
    -moz-transform: skewX(0deg); } }

@-o-keyframes wiggle {
  0% {
    -o-transform: skewX(9deg); }

  10% {
    -o-transform: skewX(-8deg); }

  20% {
    -o-transform: skewX(7deg); }

  30% {
    -o-transform: skewX(-6deg); }

  40% {
    -o-transform: skewX(5deg); }

  50% {
    -o-transform: skewX(-4deg); }

  60% {
    -o-transform: skewX(3deg); }

  70% {
    -o-transform: skewX(-2deg); }

  80% {
    -o-transform: skewX(1deg); }

  90% {
    -o-transform: skewX(0deg); }

  100% {
    -o-transform: skewX(0deg); } }

@keyframes wiggle {
  0% {
    transform: skewX(9deg); }

  10% {
    transform: skewX(-8deg); }

  20% {
    transform: skewX(7deg); }

  30% {
    transform: skewX(-6deg); }

  40% {
    transform: skewX(5deg); }

  50% {
    transform: skewX(-4deg); }

  60% {
    transform: skewX(3deg); }

  70% {
    transform: skewX(-2deg); }

  80% {
    transform: skewX(1deg); }

  90% {
    transform: skewX(0deg); }

  100% {
    transform: skewX(0deg); } }

.wiggle {
  -webkit-animation-name: wiggle;
  -moz-animation-name: wiggle;
  -o-animation-name: wiggle;
  animation-name: wiggle;
  -webkit-animation-timing-function: ease-in;
  -moz-animation-timing-function: ease-in;
  -o-animation-timing-function: ease-in;
  animation-timing-function: ease-in; }

.animated.wiggle {
  -webkit-animation-duration: 0.75s;
  -moz-animation-duration: 0.75s;
  -o-animation-duration: 0.75s;
  animation-duration: 0.75s; }
  

    </style>

    <link href="https://ningyu1.github.io/site/css/custom.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    

    <script type="text/javascript" src="https://ningyu1.github.io/site/js/jquery-tapir.js"></script>

    

    <link rel="stylesheet" href="https://ningyu1.github.io/site/css/hljs.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>


<body>
    <div id="wrapper">
        <header id="header" class="inner">
<h1 class="animated bounceInDown">
    <div id="headerbg">
        凝雨 - Yun
    </div>
</h1>

<span class="subtitle">快乐编程每一天 - Happy Coding Every Days</span>
<br>


<ul id="social-links" style="text-align:center; clear:both;">
    
    
    <li>
    <a href="https://github.com/ningyu1" class="github" title="Github"></a>
    </li>
    
    
    
    
    
    
    
    
</ul>



<ul id="nav">
    <li id="ajax"><a href="https://ningyu1.github.io/site/index.html">Home</a></li>
    <li id="ajax"><a href="https://ningyu1.github.io/site/archives/index.html">Blog</a></li>
	<li id="ajax"><a href="https://ningyu1.github.io/site/categories/index.html">Categories</a></li>
    <li id="ajax"><a href="https://ningyu1.github.io/site/tags/index.html">Tags</a></li>
    <li><a href="https://ningyu1.github.io/site/atom.xml">RSS</a></li>
    <li>
    <div id="dark">
        <form action="//www.google.com.hk/search" method="get" accept-charset="UTF-8" id="search">
            <input type="hidden" name="sitesearch" value="https://ningyu1.github.io/site" />
            <input type="text" name="q" results="0" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
</ul>

</header>

<div id="toload">

    <div id="content" class="inner">
        




    
    <script id="dsq-count-scr" src="//wdicc.disqus.com/count.js" async></script>
    




  <article class="post">
    <h2 class="title"> 
        <a href="https://ningyu1.github.io/site/post/04-lombok-quick-start/">Lombok使用说明</a>
    </h2>
    <div class="entry-content">
    <div class="meta">
        <div class="date">Published on: <time datetime='2017-07-19T15:22:56.000&#43;00:00' itemprop="datePublished">2017-07-19</time>
</div>
        <div class="tags">Tags: 

<a href="https://ningyu1.github.io/site/tags/lombok">Lombok</a>

<a href="https://ningyu1.github.io/site/tags/java">Java</a>


</div>
    </div>
        

<h3 id="一-项目背景">一、项目背景</h3>

<p>在写Java程序的时候经常会遇到如下情形：</p>

<p>新建了一个Class类，然后在其中设置了几个字段，最后还需要花费很多时间来建立getter和setter方法</p>

<p>lombok项目的产生就是为了省去我们手动创建getter和setter方法的麻烦，它能够在我们编译源码的时候自动帮我们生成getter和setter方法。即它最终能够达到的效果是：在源码中没有getter和setter方法，但是在编译生成的字节码文件中有getter和setter方法</p>

<p>比如源码文件：</p>

<pre><code class="language-java">import java.io.Serializable;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.extern.slf4j.Slf4j;
 
@Data
@Slf4j
@NoArgsConstructor
@AllArgsConstructor
public class TestUserVo implements Serializable{
    private static final long serialVersionUID = -5648809805573016853L;
    private Long id;
    private Long userId;
    /**
     * 获取 id
     * @return the id
     */
    public Long getId() {
        System.out.println(&quot;getId&quot;);
        return id;
    }
    /**
     * 设置 id
     * @param id the id to set
     */
    public void setId(Long id) {
        System.out.println(&quot;setId&quot;);
        this.id = id;
    }
}
</code></pre>

<p>以下是编译上述源码文件得到的字节码文件，对其反编译得到的结果</p>

<pre><code class="language-java">import java.io.Serializable;
import java.beans.ConstructorProperties;
import java.io.PrintStream;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
 
public class TestUserVo implements Serializable {
    public String toString() {
        return &quot;TestUserVo(id=&quot; + getId() + &quot;, userId=&quot; + getUserId() + &quot;)&quot;;
    }
 
    public int hashCode() {
        int PRIME = 59;
        int result = 1;
        Object $id = getId();
        result = result * 59 + ($id == null ? 43 : $id.hashCode());
        Object $userId = getUserId();
        result = result * 59 + ($userId == null ? 43 : $userId.hashCode());
        return result;
    }
 
    public void setUserId(Long userId) {
        this.userId = userId;
    }
 
    public boolean equals(Object o) {
        if (o == this) {
            return true;
        }
        if (!(o instanceof TestUserVo)) {
            return false;
        }
        TestUserVo other = (TestUserVo) o;
        if (!other.canEqual(this)) {
            return false;
        }
        Object this$id = getId();
        Object other$id = other.getId();
        if (this$id == null ? other$id != null : !this$id.equals(other$id)) {
            return false;
        }
        Object this$userId = getUserId();
        Object other$userId = other.getUserId();
        return this$userId == null ? other$userId == null : this$userId.equals(other$userId);
    }
 
    protected boolean canEqual(Object other) {
        return other instanceof TestUserVo;
    }
 
    private static final Logger log = LoggerFactory.getLogger(TestUserVo.class);
    private static final long serialVersionUID = -5648809805573016853L;
    private Long id;
    private Long userId;
 
    @ConstructorProperties({ &quot;id&quot;, &quot;userId&quot; })
    public TestUserVo(Long id, Long userId) {
        this.id = id;
        this.userId = userId;
    }
 
    public Long getUserId() {
        return this.userId;
    }
 
    public Long getId() {
        System.out.println(&quot;getId&quot;);
        return this.id;
    }
 
    public void setId(Long id) {
        System.out.println(&quot;setId&quot;);
        this.id = id;
    }
 
    public TestUserVo() {
    }
}
</code></pre>

<p>为什么推荐使用它呢，因为我们一般写一个<code>pojo</code>时很容易遗漏（<code>equals</code>、<code>toString</code>、<code>hashCode</code>、<code>canEqual</code>）这几个方法，使用<code>Lombok</code>不但可以在编译的时候自动生成<code>getter</code>、<code>setter</code>方法还会根据字段来生成（<code>equals</code>、<code>toString</code>、<code>hashCode</code>、<code>canEqual</code>）这几个方法.</p>

<p><code>Lombok</code>在生成<code>getter</code>、<code>setter</code>方法时不会覆盖我们源码中已经编写的<code>getter</code>、<code>setter</code>方法，所以可以大胆的使用。</p>

<p>下面介绍几个常用的 lombok 注解：</p>

<p><code>@Data</code>   ：注解在类上；提供类所有属性的 <code>getting</code> 和 <code>setting</code> 方法，此外还提供了<code>equals</code>、<code>canEqual</code>、<code>hashCode</code>、<code>toString</code> 方法</p>

<p><code>@Setter</code>：注解在属性上；为属性提供 <code>setting</code> 方法</p>

<p><code>@Getter</code>：注解在属性上；为属性提供 <code>getting</code> 方法</p>

<p><code>@Log4j</code> | <code>@Slf4j</code> | <code>@Log</code> ：注解在类上；为类提供一个 属性名为<code>log</code> 的 <code>log4j</code> | <code>SLF4j</code> | <code>Log(java logging)</code>日志对象</p>

<p><code>@NoArgsConstructor</code>：注解在类上；为类提供一个无参的构造方法</p>

<p><code>@AllArgsConstructor</code>：注解在类上；为类提供一个全参的构造方法</p>

<p>其他的查看官网的文档：<a href="https://projectlombok.org/features/all" title="https://projectlombok.org/features/all">https://projectlombok.org/features/all</a></p>

<h3 id="二-使用方法">二、使用方法</h3>

<p>Maven依赖：</p>

<pre><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
  &lt;artifactId&gt;lombok&lt;/artifactId&gt;
  &lt;version&gt;lombok&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>ps.版本为：1.16.18，并且<code>scope</code>为：<code>provided</code>，我们只在编译时使用。</p>

<p>使用<code>lombok</code>项目的方法很简单，分为四个步骤：</p>

<p>1)在需要自动生成类上，加上自动生成注解（<code>@Data</code>、<code>@Setter</code>、<code>@Getter</code>、<code>@Log4j</code>、<code>@Slf4j</code>、<code>@Log</code>、<code>@NoArgsConstructor</code>、<code>@AllArgsConstructor</code>，等等）</p>

<p>2)在编译类路径中加入<code>lombok.jar</code>包 ，<code>maven</code>中添加依赖</p>

<p>3)使用支持<code>lombok</code>的编译工具编译源代码（关于支持<code>lombok</code>的编译工具，见“四、支持<code>lombok</code>的编译工具”）</p>

<p>4)编译得到的字节码文件中自动生成相应配置的代码</p>

<h3 id="三-原理分析">三、原理分析</h3>

<p>接下来进行<code>lombok</code>能够工作的原理分析，以<code>Oracle</code>的<code>javac</code>编译工具为例。</p>

<p>自从Java 6起，javac就支持“JSR 269 Pluggable Annotation Processing API”规范，只要程序实现了该API，就能在javac运行的时候得到调用。</p>

<p>举例来说，现在有一个实现了&rdquo;JSR 269 API&rdquo;的程序A,那么使用javac编译源码的时候具体流程如下：</p>

<p>1)javac对源代码进行分析，生成一棵抽象语法树(AST)</p>

<p>2)运行过程中调用实现了&rdquo;JSR 269 API&rdquo;的A程序</p>

<p>3)此时A程序就可以完成它自己的逻辑，包括修改第一步骤得到的抽象语法树(AST)</p>

<p>4)javac使用修改后的抽象语法树(AST)生成字节码文件</p>

<p>详细的流程图如下：
<img src="https://ningyu1.github.io/site/img/lombok/1.jpg" alt="流程图" />
<code>lombok</code>本质上就是这样的一个实现了&rdquo;JSR 269 API&rdquo;的程序。在使用javac的过程中，它产生作用的具体流程如下：</p>

<p>1)javac对源代码进行分析，生成一棵抽象语法树(AST)</p>

<p>2)运行过程中调用实现了&rdquo;JSR 269 API&rdquo;的lombok程序</p>

<p>3)此时<code>lombok</code>就对第一步骤得到的AST进行处理，找到@Data注解所在类对应的语法树(AST)，然后修改该语法树(AST)，增加<code>getter</code>和<code>setter</code>方法定义的相应树节点</p>

<p>4)javac使用修改后的抽象语法树(AST)生成字节码文件</p>

<h3 id="四-支持lombok的编译工具">四、支持lombok的编译工具</h3>

<ol>
<li>由“三、原理分析”可知，<code>Oracle</code> javac直接支持<code>lombok</code></li>
<li>常用的项目管理工具<code>Maven</code>所使用的java编译工具来源于配置的第三方工具，如果我们配置这个第三方工具为<code>Oracle</code> javac的话，那么<code>Maven</code>也就直接支持<code>lombok</code>了</li>
<li>Intellij Idea中配置，可以下载安装Intellij Idea中的&rdquo;Lombok plugin&rdquo;。</li>
<li>Eclipse中配置lombok支持（或者使用官方的plugin：<a href="https://projectlombok.org/setup/eclipse" title="https://projectlombok.org/setup/eclipse">https://projectlombok.org/setup/eclipse</a>）

<ol>
<li>去官网下载：<a href="http://projectlombok.org/" title="http://projectlombok.org/ ">http://projectlombok.org/ </a></li>
<li>eclipse / myeclipse 手动安装 <code>lombok</code></li>
<li>将 lombok.jar 复制到 myeclipse.ini / eclipse.ini 所在的文件夹目录下</li>
<li>打开 eclipse.ini / myeclipse.ini，在最后面插入以下两行并保存：</li>
<li><code>-Xbootclasspath/lombok.jar -javaagent:lombok.jar</code></li>
<li>重启 eclipse / myeclipse
如上配置后，在类以后用上无需书写<code>getter</code>、<code>setter</code>程序中也可以直接引用<code>getter</code>、<code>setter</code>方法
其他IDE支持，请去官网：<a href="https://projectlombok.org/" title="https://projectlombok.org/">https://projectlombok.org/</a> 点击Install选择不同的IDE插件安装说明</li>
</ol></li>
</ol>

<h3 id="五-lombok的罪恶">五、lombok的罪恶</h3>

<p>使用<code>lombok</code>虽然能够省去手动创建<code>setter</code>和<code>getter</code>方法的麻烦，但是却大大降低了源代码文件的可读性和完整性，降低了阅读源代码的舒适度。</p>

    </div>

<div class="meta">
    
    
    <span class="comments"><a href="https://ningyu1.github.io/site/post/04-lombok-quick-start/#disqus_thread">Comments</a></span>
    
    
</div>
</article>

  <article class="post">
    <h2 class="title"> 
        <a href="https://ningyu1.github.io/site/post/02-fastdfs-installer/">Fastdfs安装说明与常见问题解决</a>
    </h2>
    <div class="entry-content">
    <div class="meta">
        <div class="date">Published on: <time datetime='2017-07-04T00:00:00.000&#43;00:00' itemprop="datePublished">2017-07-04</time>
</div>
        <div class="tags">Tags: 

<a href="https://ningyu1.github.io/site/tags/fastdfs">FASTDFS</a>


</div>
    </div>
        

<h1 id="fastdfs安装说明与常见问题解决">Fastdfs安装说明与常见问题解决</h1>

<h2 id="docker中安装">docker中安装</h2>

<pre><code class="language-bash">docker pull season/fastdfs
docker tag season/fastdfs 192.168.0.34:5000/season/fastdfs
docker push 192.168.0.34:5000/season/fastdfs
</code></pre>

<p>启动会获取tracker ip
<code>192.168.0.54:22122</code></p>

<p>monitor检测</p>

<pre><code>/usr/local/bin/fdfs_monitor /etc/fdfs/storage.conf
</code></pre>

<p>storage
store_path0路径与base_path路径必须不同</p>

<h2 id="物理机安装">物理机安装</h2>

<h3 id="1-安装git">1.安装git</h3>

<p><code>yum install -y git</code></p>

<h3 id="2-下载fastdfs源码">2.下载fastdfs源码</h3>

<pre><code class="language-bash">git clone https://github.com/happyfish100/fastdfs.git
git clone https://github.com/happyfish100/libfastcommon.git
git clone https://github.com/happyfish100/fastdfs-nginx-module.git
</code></pre>

<h3 id="3-下载nginx">3.下载nginx</h3>

<pre><code class="language-bash">cp /home/jyftp/nginx-1.10.1.tar.gz ./
tar -xvf nginx-1.10.1.tar.gz 
rm -rf nginx-1.10.1.tar.gz 
chown -R root.root nginx-1.10.1/
mv nginx-1.10.1/ nginx
</code></pre>

<h3 id="4-安装libfastcommon-fastdfs依赖的系统库">4.安装libfastcommon (fastdfs依赖的系统库）</h3>

<pre><code class="language-bash">cd /usr/local/fastdfs/libfastcommon
./make.sh
./make.sh install
</code></pre>

<h3 id="5-安装fastdfs">5.安装fastdfs</h3>

<pre><code class="language-bash">cd /usr/local/fastdfs/fastdfs
./make.sh
./make.sh install
</code></pre>

<h3 id="6-安装nginx">6.安装nginx</h3>

<pre><code class="language-bash">cd /usr/local/nginx
./configure --prefix=/usr/local/nginx --conf-path=/usr/local/nginx/nginx.conf --add-module=/usr/local/fastdfs/fastdfs-nginx-module/src
make 
make install
</code></pre>

<p>安装nginx错误处理
错误信息：</p>

<pre><code>./configure: error: the HTTP rewrite module requires the PCRE library. 
</code></pre>

<p>安装pcre-devel与openssl-devel解决问题，执行下面命令</p>

<pre><code>yum -y install pcre-devel openssl openssl-devel
</code></pre>

<p>错误信息：</p>

<pre><code>/data/soft/fastdfs-nginx-module/src/ngx_http_fastdfs_module.c:894: 错误：‘struct fdfs_http_context’没有名为‘if_modified_since’的成员
/data/soft/fastdfs-nginx-module/src/ngx_http_fastdfs_module.c:897: 错误：‘struct fdfs_http_context’没有名为‘if_modified_since’的成员
/data/soft/fastdfs-nginx-module/src/ngx_http_fastdfs_module.c:927: 错误：‘struct fdfs_http_context’没有名为‘range’的成员
/data/soft/fastdfs-nginx-module/src/ngx_http_fastdfs_module.c:933: 错误：‘struct fdfs_http_context’没有名为‘if_range’的成员
/data/soft/fastdfs-nginx-module/src/ngx_http_fastdfs_module.c:933: 错误：‘true’未声明(在此函数内第一次使用)
make[1]: *** [objs/addon/src/ngx_http_fastdfs_module.o] 错误 1
make[1]: Leaving directory `/data/soft/nginx-1.8.0'
make: *** [build] 错误 2
</code></pre>

<p>解决办法
执行以下2条命令，然后重新make</p>

<pre><code>ln -sv /usr/include/fastcommon /usr/local/include/fastcommon
ln -sv /usr/include/fastdfs /usr/local/include/fastdfs
</code></pre>

<p>拷贝相关文件到/etc/fdfs目录下：</p>

<pre><code>cp /usr/local/fastdfs/fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/
cp /usr/local/fastdfs/fastdfs/conf/mime.types /etc/fdfs/
cp /usr/local/fastdfs/fastdfs/conf/http.conf /etc/fdfs/
cp /usr/local/fastdfs/fastdfs/conf/anti-steal.jpg /etc/fdfs/
</code></pre>

<p>如果是下面错误，需要安装fastdfs最新版，直接从github上下载源码安装</p>

<pre><code>local/fastdfs-nginx-module/src/common.c:1245: 错误：‘FDFSHTTPParams’没有名为‘support_multi_range’的成员
make[1]: *** [objs/addon/src/ngx_http_fastdfs_module.o] 错误 1
make[1]: Leaving directory `/usr/local/nginx-1.10.1'
</code></pre>

<p>解决办法：github上下载最新FastDFS master源码，重新编译安装即可。</p>

<h3 id="7-配置fastdfs">7.配置fastdfs</h3>

<h4 id="7-1-创建数据存放目录-用于存放数据">7.1 创建数据存放目录（用于存放数据）</h4>

<pre><code class="language-bash">cd /usr/local/fastdfs
mkdir fast_data
cd fast_data
</code></pre>

<h5 id="tracker基础数据和日志">tracker基础数据和日志</h5>

<pre><code>mkdir tracker
</code></pre>

<h5 id="storage基础数据和日志">storage基础数据和日志</h5>

<pre><code>mkdir storage
</code></pre>

<h5 id="storage-数据存放目录">storage 数据存放目录</h5>

<pre><code>mkdir store_path
</code></pre>

<h5 id="fast-nginx模块基础数据和日志">fast nginx模块基础数据和日志</h5>

<pre><code>mkdir nginx_module
</code></pre>

<h4 id="7-2-创建配置文件目录-用于存放使用的配置文件">7.2 创建配置文件目录（用于存放使用的配置文件）</h4>

<pre><code>mkdir fast_conf
cd /usr/local/fastdfs/fastdfs/conf
cp ./* /usr/local/fastdfs/fast_conf/
</code></pre>

<h4 id="7-3-配置tracker">7.3 配置tracker</h4>

<h5 id="编辑basepath">编辑basepath</h5>

<pre><code>＃basepath(用于存放tracker的基本数据，包括日志）
base_path=/usr/local/fastdfs/fast_data/tracker
</code></pre>

<h4 id="7-4-配置storage">7.4 配置storage</h4>

<h5 id="修改如下配置">修改如下配置：</h5>

<pre><code>＃用于存储storage基本数据的目录（包括日志）
base_path=/usr/local/fastdfs/fast_data/storage
＃数据存放的目录
store_path0=/usr/local/fastdfs/fast_data/store_path
＃group的名字
group_name=group1
# tracker地址
tracker_server=10.30.193.163:22122
</code></pre>

<h5 id="这个是tracker的ip地址和端口号">这个是tracker的ip地址和端口号</h5>

<p><code>tracker_server=192.168.0.48:22122</code></p>

<h4 id="7-5-修改nginx相关的fastdfs配置文件">7.5 修改nginx相关的fastdfs配置文件</h4>

<p>将nginx module的配置文件拷贝到fastdfs的配置目录</p>

<pre><code>cp /usr/local/fastdfs/fastdfs-nginx-module/src/mod_fastdfs.conf /usr/local/fastdfs/fast_conf
</code></pre>

<p>修改mod_fastdfs.conf</p>

<pre><code>#存放日志等文件
base_path=/usr/local/fastdfs/fast_data/nginx_module
#tracker的地址（这个是nginx中的plugin使用的）
tracker_server=192.168.0.48:22122
#本地对应的group名字（当前nginx对应的storage存储的group的名字）
group_name=group1
#这个配置用于说明nginx对应的storage存储文件的实际位置
store_path0=/usr/local/fastdfs/fast_data/store_path
#这个是url是否需要带groupname
url_have_group_name = true
</code></pre>

<h4 id="9-编写启动脚本">9. 编写启动脚本</h4>

<pre><code>cd /usr/local/fastdfs
</code></pre>

<h4 id="9-1-创建-启动文件目录">9.1 创建 启动文件目录</h4>

<pre><code>mkdir bin
</code></pre>

<p>tracker的启动脚本</p>

<h5 id="9-2-在bin目录下-创建tracker-sh">9.2 在bin目录下，创建tracker.sh</h5>

<pre><code class="language-bash">#!/bin/sh

case &quot;$1&quot; in

    start) 
    /usr/local/fastdfs/fastdfs/tracker/fdfs_trackerd /usr/local/fastdfs/fast_conf/tracker.conf
    ;;
    stop) 
    /usr/local/fastdfs/fastdfs/tracker/fdfs_trackerd /usr/local/fastdfs/fast_conf/tracker.conf stop
    ;;
    restart)
    /usr/local/fastdfs/fastdfs/tracker/fdfs_trackerd /usr/local/fastdfs/fast_conf/tracker.conf restart 
    ;;

esac   

# tailf /usr/local/fastdfs/fast_data/tracker/logs/trackerd.log

exit 0
</code></pre>

<p>将文件变成可执行</p>

<pre><code>chmod +x tracker.sh
</code></pre>

<h5 id="9-3-在bin目录下-创建storage-sh">9.3 在bin目录下，创建storage.sh</h5>

<pre><code class="language-bash">#!/bin/sh

case &quot;$1&quot; in

    start)
    /usr/local/fastdfs/fastdfs/storage/fdfs_storaged /usr/local/fastdfs/fast_conf/storage.conf 
    ;;
    stop)
    /usr/local/fastdfs/fastdfs/storage/fdfs_storaged /usr/local/fastdfs/fast_conf/storage.conf stop 
    ;;
    restart)
    /usr/local/fastdfs/fastdfs/storage/fdfs_storaged /usr/local/fastdfs/fast_conf/storage.conf restart
    ;;

esac   

# tailf /usr/local/fastdfs/fast_data/storage/logs/storaged.log

exit 0
</code></pre>

<p>将文件变成可执行</p>

<pre><code>chmod +x storage.sh
</code></pre>

<h5 id="9-4-配置-启动nginx">9.4 配置、启动nginx</h5>

<p>修改<code>mod_fastdfs.conf</code>配置文件</p>

<pre><code>cd /usr/local/fastdfs/fast_conf/
vi mod_fastdfs.conf
</code></pre>

<pre><code class="language-bash"># FastDFS tracker_server can ocur more than once, and tracker_server format is
#  &quot;host:port&quot;, host can be hostname or ip address
# valid only when load_fdfs_parameters_from_tracker is true
tracker_server=192.168.0.48:22122

# the port of the local storage server
# the default value is 23000
storage_server_port=23000

# if the url / uri including the group name
# set to false when uri like /M00/00/00/xxx
# set to true when uri like ${group_name}/M00/00/00/xxx, such as group1/M00/xxx
# default value is false
url_have_group_name = true

# store_path#, based 0, if store_path0 not exists, it's value is base_path
# the paths must be exist
# must same as storage.conf
store_path0=/usr/local/fastdfs/fast_data/store_path
#store_path1=/home/yuqing/fastdfs1
</code></pre>

<p>copy配置文件到 <code>/etc/fdfs</code>下</p>

<pre><code class="language-bash">cd /usr/local/fastdfs/fast_conf/
cp anti-steal.jpg http.conf mime.types mod_fastdfs.conf /etc/fdfs/
</code></pre>

<p>修改nginx的配置文件</p>

<pre><code class="language-bash">cd /usr/local/nginx
vi nginx.conf
server {
listen 8079;
    location ~/M00 {
        root /usr/local/fastdfs/fast_data/store_path/data;
        ngx_fastdfs_module;
    }
}
</code></pre>

<p>创建软连接</p>

<pre><code>ln -s /usr/local/fastdfs/fast_data/store_path/data /usr/local/fastdfs/fast_data/store_path/data/M00
</code></pre>

<p>启动nginx之前先-t检查一下配置文件是否有错误</p>

<pre><code>/usr/local/nginx/sbin/nginx -t
</code></pre>

<p>输出一下信息表示正确</p>

<pre><code>[root@localhost bin]# /usr/local/nginx/sbin/nginx -t
ngx_http_fastdfs_set pid=125936
nginx: the configuration file /usr/local/nginx/nginx.conf syntax is ok
nginx: configuration file /usr/local/nginx/nginx.conf test is successful
</code></pre>

<p>启动nginx</p>

<pre><code>/usr/local/nginx/sbin/nginx
</code></pre>

<p>启动 Nginx 后会打印出fastdfs模块的pid，看看日志是否报错，正常不会报错的</p>

<pre><code class="language-bash">[root@localhost fdfs]# /usr/local/nginx/sbin/nginx
ngx_http_fastdfs_set pid=126276
</code></pre>

<h4 id="遇到的错误">遇到的错误</h4>

<p>错误：</p>

<pre><code>ERROR - file: storage_ip_changed_dealer.c, line: 186, connect to tracker server 172.0.0.1:22122 fail, errno: 110, error info: Connection timed out
</code></pre>

<p>防火墙中打开tracker服务器端口（ 默认为 22122）</p>

<pre><code>vi /etc/sysconfig/iptables 
</code></pre>

<p>附加：若/etc/sysconfig 目录下没有iptables文件可随便写一条iptables命令配置个防火墙规则：如：</p>

<pre><code>iptables -P OUTPUT ACCEPT
</code></pre>

<p>然后用命令：service iptables save 进行保存，默认就保存到 /etc/sysconfig/iptables 文件里。这时既有了这个文件。防火墙也可以启动了。接下来要写策略，也可以直接写在/etc/sysconfig/iptables 里了。
添加如下端口行：</p>

<pre><code class="language-bash">-A INPUT -m state --state NEW -m tcp -p tcp --dport 22122 -j ACCEPT 
-A INPUT -m state --state NEW -m tcp -p tcp --dport 23000 -j ACCEPT 
-A INPUT -m state --state NEW -m tcp -p tcp --dport 8079 -j ACCEPT 
# 22122 tracker 端口
# 23000 storage 端口
# 8079 nginx listen端口
</code></pre>

<p>重启防火墙</p>

<pre><code>service iptables restart
</code></pre>

<h4 id="fastdfs-client测试">Fastdfs Client测试</h4>

<p>执行命令</p>

<pre><code>/usr/bin/fdfs_test /usr/local/fastdfs/fast_conf/client.conf  upload /usr/local/fastdfs/fast_conf/
</code></pre>

<p>输出</p>

<pre><code class="language-bash">This is FastDFS client test program v5.11

Copyright (C) 2008, Happy Fish / YuQing

FastDFS may be copied only under the terms of the GNU General
Public License V3, which may be found in the FastDFS source kit.
Please visit the FastDFS Home Page http://www.csource.org/ 
for more detail.

[2017-05-16 14:03:07] DEBUG - base_path=/usr/local/fastdfs/fast_data, connect_timeout=30, network_timeout=60, tracker_server_count=1, anti_steal_token=0, anti_steal_secret_key length=0, use_connection_pool=0, g_connection_pool_max_idle_time=3600s, use_storage_id=0, storage server id count: 0

tracker_query_storage_store_list_without_group: 
    server 1. group_name=, ip_addr=192.168.0.48, port=23000

group_name=group1, ip_addr=192.168.0.48, port=23000
storage_upload_by_filename
group_name=group1, remote_filename=M00/00/00/wKgAMFkalhuARwsaAAAFvLZ-36489.conf
source ip address: 192.168.0.48
file timestamp=2017-05-16 14:03:07
file size=1468
file crc32=3061768110
example file url: http://192.168.0.48/group1/M00/00/00/wKgAMFkalhuARwsaAAAFvLZ-36489.conf
storage_upload_slave_by_filename
group_name=group1, remote_filename=M00/00/00/wKgAMFkalhuARwsaAAAFvLZ-36489_big.conf
source ip address: 192.168.0.48
file timestamp=2017-05-16 14:03:08
file size=1468
file crc32=3061768110
example file url: http://192.168.0.48/group1/M00/00/00/wKgAMFkalhuARwsaAAAFvLZ-36489_big.conf
</code></pre>

<h4 id="查看fastdfs集群监控信息">查看Fastdfs集群监控信息</h4>

<p>执行命令</p>

<pre><code>/usr/bin/fdfs_monitor /usr/local/fastdfs/fast_conf/client.conf
</code></pre>

<p>输出</p>

<pre><code class="language-bash">[2017-05-16 14:17:38] DEBUG - base_path=/usr/local/fastdfs/fast_data, connect_timeout=30, network_timeout=60, tracker_server_count=1, anti_steal_token=0, anti_steal_secret_key length=0, use_connection_pool=0, g_connection_pool_max_idle_time=3600s, use_storage_id=0, storage server id count: 0

server_count=1, server_index=0

tracker server is 192.168.0.48:22122

group count: 1

Group 1:
group name = group1
disk total space = 46161 MB
disk free space = 33446 MB
trunk free space = 0 MB
storage server count = 1
active server count = 1
storage server port = 23000
storage HTTP port = 8888
store path count = 1
subdir count per path = 256
current write server index = 0
current trunk file id = 0

    Storage 1:
        id = 192.168.0.48
        ip_addr = 192.168.0.48  ACTIVE
        http domain = 
        version = 5.11
        join time = 2017-05-16 11:40:48
        up time = 2017-05-16 13:04:57
        total storage = 46161 MB
        free storage = 33446 MB
        upload priority = 10
        store_path_count = 1
        subdir_count_per_path = 256
        storage_port = 23000
        storage_http_port = 8888
        current_write_path = 0
        source storage id = 
        if_trunk_server = 0
        connection.alloc_count = 256
        connection.current_count = 0
        connection.max_count = 2
        total_upload_count = 3
        success_upload_count = 3
        total_append_count = 0
        success_append_count = 0
        total_modify_count = 0
        success_modify_count = 0
        total_truncate_count = 0
        success_truncate_count = 0
        total_set_meta_count = 3
        success_set_meta_count = 3
        total_delete_count = 0
        success_delete_count = 0
        total_download_count = 0
        success_download_count = 0
        total_get_meta_count = 0
        success_get_meta_count = 0
        total_create_link_count = 0
        success_create_link_count = 0
        total_delete_link_count = 0
        success_delete_link_count = 0
        total_upload_bytes = 4738
        success_upload_bytes = 4738
        total_append_bytes = 0
        success_append_bytes = 0
        total_modify_bytes = 0
        success_modify_bytes = 0
        stotal_download_bytes = 0
        success_download_bytes = 0
        total_sync_in_bytes = 0
        success_sync_in_bytes = 0
        total_sync_out_bytes = 0
        success_sync_out_bytes = 0
        total_file_open_count = 3
        success_file_open_count = 3
        total_file_read_count = 0
        success_file_read_count = 0
        total_file_write_count = 3
        success_file_write_count = 3
        last_heart_beat_time = 2017-05-16 14:17:31
        last_source_update = 2017-05-16 14:14:16
        last_sync_update = 1970-01-01 08:00:00
        last_synced_timestamp = 1970-01-01 08:00:00 
</code></pre>

    </div>

<div class="meta">
    
    
    <span class="comments"><a href="https://ningyu1.github.io/site/post/02-fastdfs-installer/#disqus_thread">Comments</a></span>
    
    
</div>
</article>

  <article class="post">
    <h2 class="title"> 
        <a href="https://ningyu1.github.io/site/post/03-nginx-502-bad-gateway/">Nginx 502 Bad Gateway问题分析与踩过的坑</a>
    </h2>
    <div class="entry-content">
    <div class="meta">
        <div class="date">Published on: <time datetime='2017-06-30T18:36:44.000&#43;00:00' itemprop="datePublished">2017-06-30</time>
</div>
        <div class="tags">Tags: 

<a href="https://ningyu1.github.io/site/tags/nginx">Nginx</a>

<a href="https://ningyu1.github.io/site/tags/bad-gateway">Bad Gateway</a>


</div>
    </div>
        

<h3 id="我相信使用nginx的都会遇到过502-504-这种bad-gateway错误-下面我把碰到这个问题分析过程记录并分享出来">我相信使用Nginx的都会遇到过502 504 这种bad gateway错误，下面我把碰到这个问题分析过程记录并分享出来。</h3>

<p>先让我们看一下具体的错误信息</p>

<pre><code class="language-prolog">502 Bad Gateway
The proxy server received an invalid response from an upstream server
</code></pre>

<p>从字面上的意思理解，nginx从upstream没有接受到信息，第一感觉就是连接被close？还是超时了？超时的话一般错误信息是 timeout</p>

<p>下面是尝试解决这个问题尝试过的手段</p>

<h3 id="1-第一感觉是proxy返回超时-因此查找nginx官方文档-找到关于proxy的timeout设置">1. 第一感觉是proxy返回超时，因此查找nginx官方文档，找到关于proxy的timeout设置</h3>

<pre><code class="language-nginx">Syntax: proxy_connect_timeout time;
Default:    
proxy_connect_timeout 60s;
Context:    http, server, location
Defines a timeout for establishing a connection with a proxied server. It should be noted that this timeout cannot usually exceed 75 seconds.
</code></pre>

<p>ps. 这个时间不能超过75秒</p>

<pre><code class="language-nginx">Syntax: proxy_read_timeout time;
Default:    
proxy_read_timeout 60s;
Context:    http, server, location
Defines a timeout for reading a response from the proxied server. The timeout is set only between two successive read operations, not for the transmission of the whole response. If the proxied server does not transmit anything within this time, the connection is closed.
</code></pre>

<p>ps. 两次read的超时时间，并不是整个的response的超时时间</p>

<pre><code class="language-nginx">Syntax: proxy_send_timeout time;
Default:    
proxy_send_timeout 60s;
Context:    http, server, location
Sets a timeout for transmitting a request to the proxied server. The timeout is set only between two successive write operations, not for the transmission of the whole request. If the proxied server does not receive anything within this time, the connection is closed.
</code></pre>

<p>ps. 两次write的超时时间，并不是整个request的超时时间</p>

<p>配置后重启nginx服务进行测试仍然有502错误爆出，继续分析</p>

<h3 id="2-于是想到了keepalive-分析我们的请求报文头-报文是有keep-alive的头信息">2. 于是想到了keepalive，分析我们的请求报文头，报文是有keep-alive的头信息</h3>

<p><img src="https://ningyu1.github.io/site/img/nginx/2.jpg" alt="site Architecture" />
那问题出在哪里？我们应该知道前端请求如果设置为长连接必须要服务端也支持长连接才行，难道是服务器上没有配置长连接导致的？</p>

<p>翻nginx官网找keepalive的相关配置</p>

<pre><code class="language-nginx">Syntax: keepalive_timeout timeout [header_timeout];
Default:    
keepalive_timeout 75s;
Context:    http, server, location
The first parameter sets a timeout during which a keep-alive client connection will stay open on the server side. The zero value disables keep-alive client connections. The optional second parameter sets a value in the “Keep-Alive: timeout=time” response header field. Two parameters may differ.

The “Keep-Alive: timeout=time” header field is recognized by Mozilla and Konqueror. MSIE closes keep-alive connections by itself in about 60 seconds.
</code></pre>

<p>ps.长连接保持的超时时间设置</p>

<pre><code class="language-nginx">Syntax: keepalive connections;
Default:    —
Context:    upstream
This directive appeared in version 1.1.4.
Activates the cache for connections to upstream servers.

The connections parameter sets the maximum number of idle keepalive connections to upstream servers that are preserved in the cache of each worker process. When this number is exceeded, the least recently used connections are closed.
</code></pre>

<p>ps. 设置upstream长连接的数量</p>

<p>查看tomcat的keepalive的设置</p>

<p>keepAliveTimeout：表示在下次请求过来之前，tomcat保持该连接多久。这就是说假如客户端不断有请求过来，且为超过过期时间，则该连接将一直保持。</p>

<p>maxKeepAliveRequests：表示该连接最大支持的请求数。超过该请求数的连接也将被关闭（此时就会返回一个Connection: close头给客户端）。</p>

<p>以上设置调整后重启服务进行测试，仍然有502错误爆出，继续分析</p>

<h3 id="3-在nginx的log中发现了请求都是使用的http-1-0-大家应该知道http-1-0是不支持长连接的-于是顺着这条线继续查下去-为什么请求进来都是http1-0呢">3. 在nginx的log中发现了请求都是使用的HTTP 1.0，大家应该知道HTTP 1.0是不支持长连接的，于是顺着这条线继续查下去，为什么请求进来都是HTTP1.0呢？</h3>

<p>查看nginx官网的文档，发现proxy是可以只定HTTP版本的</p>

<pre><code class="language-nginx">Syntax: proxy_http_version 1.0 | 1.1;
Default:    
proxy_http_version 1.0;
Context:    http, server, location
This directive appeared in version 1.1.4.
Sets the HTTP protocol version for proxying. By default, version 1.0 is used. Version 1.1 is recommended for use with keepalive connections and NTLM authentication.
</code></pre>

<p>ps. 1.1.4以后的版本nginx默认使用的是HTTP1.1</p>

<p>于是我们查看一下nginx的版本 nginx -v，我们用的是nginx version: nginx/1.10.1，理论上默认开启的http1.1，不过没关系我们配置一下proxy_http_version 1.1试一下，这个参数要结合上面说道的upstream中的keepalive一起使用才能有效果。</p>

<p>修改好之后重启服务再次进行测试，依然有502的错误爆出，无解！！！，继续分析，为什么版本不生效呢？</p>

<p>我们前端请求的报文：</p>

<p><img src="https://ningyu1.github.io/site/img/nginx/3.jpg" alt="site Architecture" />
请求的明明是HTTP 1.1为什么到nginx中成了HTTP 1.0？</p>

<p>于是想到我们使用了阿里云的SLB，会不会是SLB的问题，先测试一下不通过SLB直接访问，查看日志</p>

<pre><code class="language-prolog">100.97.90.213 - - [30/Jun/2017:10:44:09 +0800] &quot;GET /api/v1/saleorder?dataSource=&amp;salesStatus=01&amp;shopNo=&amp;carrierAssignStatus=&amp;creTimeBegin=
2017-06-30+00:00:00&amp;creTimeEnd=2017-06-30+23:59:59&amp;salesNo=&amp;status=&amp;carrierStatus=&amp;warehouseStatus=&amp;dataTranslateStatus=&amp;buyerAccount=&amp;changeBuyer=-1
&amp;changeSeller=-1&amp;platformOrderTime=&amp;platformOrderEndTime=&amp;confirmPayTime=&amp;confirmPayEndTime=&amp;receiverMobile=&amp;receiverProvince=&amp;receiverCity=&amp;
receiverArea=&amp;referenceNo=&amp;receiverName=&amp;page=1&amp;pageSize=50&amp;__preventCache=1498790641974 HTTP/1.1&quot; 200 105705 &quot;https://erp-uat.jiuyescm.com/&quot; 
&quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36&quot;
</code></pre>

<p>日志果然出现了HTTP/1.1，这个让我们找到了希望，但是还有个区别，直接访问走的是ip+port普通的http，slb访问走的是域名而且是ssl，这个会不会跟ssl有关系，于是查询了ssl的http版本支持情况排除了这个问题，那就是继续往SLB上怀疑，翻阿里云负载均衡的说明文档。</p>

<p>让我找到了说明，查看如下信息</p>

<p><img src="https://ningyu1.github.io/site/img/nginx/1.jpg" alt="site Architecture" /></p>

<p>找了半天原来是SLB强制转换了协议版本，具体查看阿里云负载均衡的<a href="https://help.aliyun.com/knowledge_detail/55201.html#httpversion" title="常见问题">常见问题</a></p>

<p>问题没有解决，需要咨询阿里云工作人员看对于这类问题是否有好的解决方法，问题持续跟踪</p>

<h3 id="跟阿里云客服沟通后-官方人员建议使用长连接通过slb的tcp协议-我们当初为了ssl方便配置slb选择的是http和https-因此就需要修改部署的结构">跟阿里云客服沟通后，官方人员建议使用长连接通过slb的tcp协议，我们当初为了ssl方便配置slb选择的是http和https，因此就需要修改部署的结构</h3>

<ol>
<li>删除原有的slb</li>
<li>增加一个新的slb，协议选择tcp，添加两个端口监听，80-xxxx，443-xxxx</li>
<li>域名绑定的ip切换到新创建的slb</li>
<li>nginx中添加ssl-module，添加ssl证书配置，添加http跳转到https，调整80-xxxx，443-xxxx</li>

<li><p>重启nginx进行测试</p>

<h4 id="测试通过">测试通过</h4>

<p><img src="https://ningyu1.github.io/site/img/nginx/4.jpg" alt="site Architecture" /></p></li>
</ol>

<p>采用这种部署方式来解决nginx 502问题</p>

    </div>

<div class="meta">
    
    
    <span class="comments"><a href="https://ningyu1.github.io/site/post/03-nginx-502-bad-gateway/#disqus_thread">Comments</a></span>
    
    
</div>
</article>

  <article class="post">
    <h2 class="title"> 
        <a href="https://ningyu1.github.io/site/post/05-cache-design/">Cache设计和使用上的套路</a>
    </h2>
    <div class="entry-content">
    <div class="meta">
        <div class="date">Published on: <time datetime='2017-06-02T14:06:34.000&#43;00:00' itemprop="datePublished">2017-06-02</time>
</div>
        <div class="tags">Tags: 

<a href="https://ningyu1.github.io/site/tags/cache">Cache</a>

<a href="https://ningyu1.github.io/site/tags/redis">Redis</a>


</div>
    </div>
        

<h1 id="一-管道-pipeline-提升效率">一、管道（pipeline）提升效率</h1>

<p>Redis是一个cs模式的tcp server，使用和http类似的请求响应协议。一个client可以通过一个socket连接发起多个请求命令。每个请求命令发出后client通常会阻塞并等待redis服务处理，redis处理完后请求命令后会将结果通过响应报文返回给client。每执行一个命令需要2个tcp报文才能完成，由于通信会有网络延迟,假如从client和server之间的包传输时间需要0.125秒，那么执行四个命令8个报文至少会需要1秒才能完成，这样即使redis每秒能处理100k命令，而我们的client也只能一秒钟发出四个命令。这显示没有充分利用 redis的处理能力。因此我们需要使用管道（pipeline）的方式从client打包多条命令一起发出，不需要等待单条命令的响应返回，而redis服务端会处理完多条命令后会将多条命令的处理结果打包到一起返回给客户端（它能够让（多条）执行命令简单的，更加快速的发送给服务器，但是没有任何原子性的保证）<a href="https://redis.io/topics/pipelining" title="https://redis.io/topics/pipelining">官方资料</a></p>

<p>【反例】</p>

<p><img src="https://ningyu1.github.io/site/img/cache/1.jpg" alt="cache1" />
【正例】</p>

<pre><code>//管道，批量发送多条命令，但是不支持namespace需要手动添加namespace
Pipeline pipelined = redisClient.pipelined();
pipelined.set(key, value);
pipelined.get(key);
pipelined.syncAndReturnAll(); //发送命令并接受返回值
pipelined.sync();//发送命令不接受返回值
</code></pre>

<p>使用管道注意事项：
1. tcp报文过长会被拆分。
2. 如果使用pipeline服务器会被迫使用内存队列来发送应答（服务器会在处理完命令前先缓存所有的命令处理结果）
3. 打包的命令越多，缓存消耗内存也越多，所以并不是打包命令越多越好，需要结合测试找到合适我们业务场景的量（双刃剑）
4. 不保证原子性，因此在Redis中没有数据需要走DB获取数据，Redis也支持事务（multi、watch）但是会影响性能（没有事务和有事务相差还是蛮大的），不是非要强一致的场景请不要使用。</p>

<h1 id="二-连接池使用问题">二、连接池使用问题</h1>

<p>jedis客户端2.4版本以上对连接池资源使用上进行了优化，提供了更优雅的资源回收方法并且支持broken处理，提供close方法替换原来的回收资源方法（returnBrokenResource 、returnResource）</p>

<p>【反例】</p>

<p><img src="https://ningyu1.github.io/site/img/cache/2.jpg" alt="cache2" />
【正例】</p>

<p><img src="https://ningyu1.github.io/site/img/cache/3.jpg" alt="cache3" /></p>

<h1 id="三-使用key值前缀来作命名空间">三、使用key值前缀来作命名空间</h1>

<p>虽然说Redis支持多个数据库（默认32个，可以配置更多），但是除了默认的0号库以外，其它的都需要通过一个额外请求才能使用。所以用前缀作为命名空间可能会更明智一点。另外，在使用前缀作为命名空间区隔不同key的时候，最好在程序中使用全局配置来实现，直接在代码里写前缀的做法要严格避免，这样可维护性实在太差了。</p>

<p>命名分割符使用 “.” 分隔</p>

<p>【正例】</p>

<p><img src="https://ningyu1.github.io/site/img/cache/4.jpg" alt="cache4" /></p>

<h1 id="四-expire对于key过期时间来控制垃圾回收">四、expire对于key过期时间来控制垃圾回收</h1>

<p>Redis是一个提供持久化功能的内存数据库，如果你不指定上面值的过期时间（TTL），并且也不进行定期的清理工作，那么你的Redis内存占用会越来越大，当有一天它超过了系统可用内存，那么swap上场，离性能陡降的时间就不远了。所以在Redis中保存数据时，一定要预先考虑好数据的生命周期，这有很多方法可以实现。</p>

<p>比如你可以采用Redis自带的过期时间（setEX）为你的数据设定过期时间。但是自动过期有一个问题，很有可能导致你还有大量内存可用时，就让key过期去释放内存，或者是内存已经不足了key还没有过期。</p>

<p>（LRU）如果你想更精准的控制你的数据过期，你可以用一个ZSET来维护你的数据更新程度，你可以用时间戳作为score值，每次更新操作时更新一下score，这样你就得到了一个按更新时间排序序列串，你可以轻松地找到最老的数据，并且从最老的数据开始进行删除，一直删除到你的空间足够为止。</p>

<p>【正例】</p>

<pre><code>redisClient.setex(bizkey, 60, value);//set一个key并设置ttl60秒
</code></pre>

<h1 id="五-乱用-不要有个锤子看哪都是钉子">五、乱用（不要有个锤子看哪都是钉子）</h1>

<p>当你使用Redis构建你的服务的时候，一定要记住，你只是找了一个合适的工具来实现你需要的功能。而不是说你在用Redis构建一个服务，这是很不同的，你把Redis当作你很多工具中的一个，只在合适使用的时候再使用它，在不合适的时候选择其它的方法。</p>

<p>我们对它的定位更多是Cache服务而非DB</p>

<h1 id="六-缓存设计的误区">六、缓存设计的误区</h1>

<p>我们通常是这样设计的，应用程序先从cache取数据，没有得到，则从数据库中取数据，成功后，放到缓存中。</p>

<p>那试想一下，如果取出来的null，需不需要放入cache呢？答案当然是需要的。</p>

<p>我们试想一下如果取出为null不放入cache会有什么结果？很显然每次取cache没有走db返回null，很容易让攻击者利用这个漏洞搞垮你的服务器，利用洪水攻击让你的程序夯在这个地方导致你的正常流程抢不到资源。</p>

<h1 id="七-缓存更新的问题">七、缓存更新的问题</h1>

<p>很多人在写更新缓存数据代码时，先删除缓存，然后再更新数据库，而后续的操作会把数据再装载的缓存中。然而，这个是逻辑是错误的。试想，两个并发操作，一个是更新操作，另一个是查询操作，更新操作删除缓存后，查询操作没有命中缓存，先把老数据读出来后放到缓存中，然后更新操作更新了数据库。于是，在缓存中的数据还是老的数据，导致缓存中的数据是脏的，而且还一直这样脏下去了。</p>

<p>正确更新缓存的Design Pattern有四种：Cache aside, Read through, Write through, Write behind caching</p>

<p>Cache Aside Pattern</p>

<p>这是最常用最常用的pattern了。其具体逻辑如下：</p>

<p><img src="https://ningyu1.github.io/site/img/cache/Cache-Aside-Design-Pattern-Flow-Diagram.jpg" alt="cache5" /></p>

<p>失效：应用程序先从cache取数据，没有得到，则从数据库中取数据，成功后，放到缓存中。</p>

<p>命中：应用程序从cache中取数据，取到后返回。</p>

<p>更新：先把数据存到数据库中，成功后，再让缓存失效。</p>

<p>注意，我们的更新是先更新数据库，成功后，让缓存失效。那么，这种方式是否可以没有文章前面提到过的那个问题呢？我们可以脑补一下。</p>

<p>一个是查询操作，一个是更新操作的并发，首先，没有了删除cache数据的操作了，而是先更新了数据库中的数据，此时，缓存依然有效，所以，并发的查询操作拿的是没有更新的数据，但是，更新操作马上让缓存的失效了，后续的查询操作再把数据从数据库中拉出来。而不会像文章开头的那个逻辑产生的问题，后续的查询操作一直都在取老的数据。</p>

<p>这是标准的design pattern，包括Facebook的论文<a href="https://www.usenix.org/system/files/conference/nsdi13/nsdi13-final170_update.pdf" title="《Scaling Memcache at Facebook》">《Scaling Memcache at Facebook》</a>也使用了这个策略。为什么不是写完数据库后更新缓存？你可以看一下Quora上的这个问答<a href="https://www.quora.com/Why-does-Facebook-use-delete-to-remove-the-key-value-pair-in-Memcached-instead-of-updating-the-Memcached-during-write-request-to-the-backend" title="《Why does Facebook use delete to remove the key-value pair in Memcached instead of updating the Memcached during write request to the backend?》">《Why does Facebook use delete to remove the key-value pair in Memcached instead of updating the Memcached during write request to the backend?》</a>，主要是怕两个并发的写操作导致脏数据</p>

<p>那么，是不是Cache Aside这个就不会有并发问题了？不是的，比如，一个是读操作，但是没有命中缓存，然后就到数据库中取数据，此时来了一个写操作，写完数据库后，让缓存失效，然后，之前的那个读操作再把老的数据放进去，所以，会造成脏数据。</p>

<p>但，这个case理论上会出现，不过，实际上出现的概率可能非常低，因为这个条件需要发生在读缓存时缓存失效，而且并发着有一个写操作。而实际上数据库的写操作会比读操作慢得多，而且还要锁表，而读操作必需在写操作前进入数据库操作，而又要晚于写操作更新缓存，所有的这些条件都具备的概率基本并不大。</p>

<p>所以，这也就是Quora上的那个答案里说的，要么通过2PC或是Paxos协议保证一致性，要么就是拼命的降低并发时脏数据的概率，而Facebook使用了这个降低概率的玩法，因为2PC太慢，而Paxos太复杂。当然，最好还是为缓存设置上过期时间。</p>

<p>Read/Write Through Pattern</p>

<p>我们可以看到，在上面的Cache Aside套路中，我们的应用代码需要维护两个数据存储，一个是缓存（Cache），一个是数据库（Repository）。所以，应用程序比较啰嗦。而Read/Write Through套路是把更新数据库（Repository）的操作由缓存自己代理了，所以，对于应用层来说，就简单很多了。可以理解为，应用认为后端就是一个单一的存储，而存储自己维护自己的Cache。</p>

<p>Read Through</p>

<p>Read Through 套路就是在查询操作中更新缓存，也就是说，当缓存失效的时候（过期或LRU换出），Cache Aside是由调用方负责把数据加载入缓存，而Read Through则用缓存服务自己来加载，从而对应用方是透明的。</p>

<p>Write Through</p>

<p>Write Through 套路和Read Through相仿，不过是在更新数据时发生。当有数据更新的时候，如果没有命中缓存，直接更新数据库，然后返回。如果命中了缓存，则更新缓存，然后再由Cache自己更新数据库（这是一个同步操作）</p>

<p>下图自来Wikipedia的<a href="https://en.wikipedia.org/wiki/Cache_&amp;#40;computing&amp;#41;" title="Cache词条">Cache词条</a>。其中的Memory你可以理解为就是我们例子里的数据库。</p>

<p><img src="https://ningyu1.github.io/site/img/cache/Write-through_with_no-write-allocation.jpg" alt="cache6" />
Write Behind Caching Pattern</p>

<p>Write Behind 又叫 Write Back。一些了解Linux操作系统内核的同学对write back应该非常熟悉，这不就是Linux文件系统的Page Cache的算法吗？是的，你看基础这玩意全都是相通的。所以，基础很重要，我已经不是一次说过基础很重要这事了。</p>

<p>Write Back套路，一句说就是，在更新数据的时候，只更新缓存，不更新数据库，而我们的缓存会异步地批量更新数据库。这个设计的好处就是让数据的I/O操作飞快无比（因为直接操作内存嘛 ），因为异步，write backg还可以合并对同一个数据的多次操作，所以性能的提高是相当可观的。</p>

<p>但是，其带来的问题是，数据不是强一致性的，而且可能会丢失（我们知道Unix/Linux非正常关机会导致数据丢失，就是因为这个事）。在软件设计上，我们基本上不可能做出一个没有缺陷的设计，就像算法设计中的时间换空间，空间换时间一个道理，有时候，强一致性和高性能，高可用和高性性是有冲突的。软件设计从来都是取舍Trade-Off。</p>

<p>另外，Write Back实现逻辑比较复杂，因为他需要track有哪数据是被更新了的，需要刷到持久层上。操作系统的write back会在仅当这个cache需要失效的时候，才会被真正持久起来，比如，内存不够了，或是进程退出了等情况，这又叫lazy write。</p>

<p>在wikipedia上有一张write back的流程图，基本逻辑如下：</p>

<p><img src="https://ningyu1.github.io/site/img/cache/Write-back_with_write-allocation.jpg" alt="cache7" /></p>

    </div>

<div class="meta">
    
    
    <span class="comments"><a href="https://ningyu1.github.io/site/post/05-cache-design/#disqus_thread">Comments</a></span>
    
    
</div>
</article>

  <article class="post">
    <h2 class="title"> 
        <a href="https://ningyu1.github.io/site/post/06-activemq-settings/">ActiveMQ使用经验分享，配置详解</a>
    </h2>
    <div class="entry-content">
    <div class="meta">
        <div class="date">Published on: <time datetime='2017-05-11T12:03:10.000&#43;00:00' itemprop="datePublished">2017-05-11</time>
</div>
        <div class="tags">Tags: 

<a href="https://ningyu1.github.io/site/tags/mq">MQ</a>

<a href="https://ningyu1.github.io/site/tags/activemq">ActiveMQ</a>


</div>
    </div>
        

<p>根据我们的使用场景抽取出来了一系列activemq公共配置参数mq.properties</p>

<h2 id="mq-properties">mq.properties</h2>

<pre><code>activemq.connnect.brokerurl=failover:(tcp://192.168.0.66:61616)
activemq.connnect.useAsyncSend=true
# object对象接受报名单,true不受限制,false需要设置白名单
activemq.connnect.trustAllPackages=true
 
# 最大连接数
activemq.pool.maxConnections=20
# 空闲失效时间,毫秒
activemq.pool.idleTimeout=60000
 
# 初始数量
activemq.listener.pool.corePoolSize=5
activemq.listener.pool.maxPoolSize=10
# 启动守护进程
activemq.listener.pool.daemon=true
# 单位秒
activemq.listener.pool.keepAliveSeconds=120

# 由于jms:listener-container不支持propertyPlaceholder替换，因此这些参数值写在spring-mq.xml文件中，参考值
# 
# 接收消息时的超时时间,单位毫秒
activemq.consumer.receiveTimeout=60000
# 监听目标类型
activemq.listener.destinationtype=queue
# 监听确认消息方式
activemq.listener.acknowledge=auto
# 监听数量
activemq.listener.concurrency=2-10
</code></pre>

<h2 id="spring-mq-xml">spring-mq.xml</h2>

<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:amq=&quot;http://activemq.apache.org/schema/core&quot;
    xmlns:jms=&quot;http://www.springframework.org/schema/jms&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans   
        http://www.springframework.org/schema/beans/spring-beans-4.0.xsd   
        http://www.springframework.org/schema/context   
        http://www.springframework.org/schema/context/spring-context-4.0.xsd
        http://www.springframework.org/schema/jms
        http://www.springframework.org/schema/jms/spring-jms-4.0.xsd
        http://activemq.apache.org/schema/core
        http://activemq.apache.org/schema/core/activemq-core-5.8.0.xsd&quot;&gt;
 
    &lt;!-- 配置activeMQ连接 tcp://192.168.0.66:61616 --&gt;
    &lt;bean id=&quot;targetConnectionFactory&quot; class=&quot;org.apache.activemq.ActiveMQConnectionFactory&quot;&gt;
        &lt;property name=&quot;brokerURL&quot; value=&quot;${activemq.connnect.brokerurl}&quot; /&gt;
        &lt;!-- useAsyncSend 异步发送 --&gt;
        &lt;property name=&quot;useAsyncSend&quot; value=&quot;${activemq.connnect.useAsyncSend}&quot;&gt;&lt;/property&gt;
        &lt;!-- 关闭对象传输有白名单限制 --&gt;
        &lt;property name=&quot;trustAllPackages&quot; value=&quot;${activemq.connnect.trustAllPackages}&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
 
    &lt;!-- 通过往PooledConnectionFactory注入一个ActiveMQConnectionFactory可以用来将Connection，Session和MessageProducer池化 
        这样可以大大减少我们的资源消耗， --&gt;
    &lt;bean id=&quot;pooledConnectionFactory&quot; class=&quot;org.apache.activemq.pool.PooledConnectionFactory&quot;&gt;
        &lt;property name=&quot;connectionFactory&quot; ref=&quot;targetConnectionFactory&quot; /&gt;
        &lt;property name=&quot;maxConnections&quot; value=&quot;${activemq.pool.maxConnections}&quot; /&gt;
        &lt;property name=&quot;idleTimeout&quot; value=&quot;${activemq.pool.idleTimeout}&quot; /&gt;
        &lt;!-- maximumActiveSessionPerConnection : 500  每个连接中使用的最大活动会话数 --&gt;
        &lt;!-- idleTimeout : 30 * 1000 单位毫秒 --&gt;
        &lt;!-- blockIfSessionPoolIsFull : true --&gt;
        &lt;!-- blockIfSessionPoolIsFullTimeout : -1L --&gt;
        &lt;!-- expiryTimeout : 0L --&gt;
        &lt;!-- createConnectionOnStartup : true --&gt;
        &lt;!-- useAnonymousProducers : true --&gt;
        &lt;!-- reconnectOnException : true --&gt;
        &lt;!-- maxConnections : 默认1 --&gt;
        &lt;!-- timeBetweenExpirationCheckMillis : -1 --&gt;
    &lt;/bean&gt;
 
    &lt;!-- 线程池配置 --&gt;
    &lt;bean id=&quot;queueMessagee x e cutor&quot;
        class=&quot;org.springframework.scheduling.concurrent.ThreadPoolTaske x e cutor&quot;&gt;
        &lt;property name=&quot;corePoolSize&quot; value=&quot;${activemq.listener.pool.corePoolSize}&quot; /&gt;
        &lt;property name=&quot;maxPoolSize&quot; value=&quot;${activemq.listener.pool.maxPoolSize}&quot; /&gt;
        &lt;property name=&quot;daemon&quot; value=&quot;${activemq.listener.pool.daemon}&quot; /&gt;
        &lt;property name=&quot;keepAliveSeconds&quot; value=&quot;${activemq.listener.pool.keepAliveSeconds}&quot; /&gt;
    &lt;/bean&gt;
 
    &lt;!-- 定义JmsTemplate的Queue类型 --&gt;
    &lt;bean id=&quot;jmsTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&gt;
        &lt;constructor-arg ref=&quot;pooledConnectionFactory&quot; /&gt;
        &lt;!-- deliveryMode : PERSISTENT 默认保存消息 --&gt;
        &lt;!-- messageIdEnabled : true 默认有消息id --&gt;
        &lt;!-- messageTimestampEnabled : true 默认有消息发送时间 --&gt;
        &lt;!-- pubSubNoLocal : false,默认点对点(Queues) --&gt;
        &lt;!-- receiveTimeout : 0 阻塞接收不超时,接收消息时的超时时间,单位毫秒  --&gt;
        &lt;!-- deliveryDelay : 0  --&gt;
        &lt;!-- explicitQosEnabled : false  --&gt;
        &lt;!-- priority : 4  --&gt;
        &lt;!-- timeToLive : 0  --&gt;
        &lt;!-- pubSubDomain : false  --&gt;
        &lt;!-- defaultDestination : 默认目标，默认null  --&gt;
        &lt;!-- messageConverter : 消息转换器，默认SimpleMessageConverter  --&gt;
        &lt;!-- sessionTransacted : 事务控制，默认false  --&gt;
    &lt;/bean&gt;
 
    &lt;!-- 定义Queue监听器 --&gt;
    &lt;!-- 由于jms:listener-container不支持propertyPlaceholder替换，因此这些参数值写在spring-mq.xml文件中，参考值：mq.properties文件中 --&gt;
    &lt;jms:listener-container task-e x e cutor=&quot;queueMessagee x e cutor&quot; receive-timeout=&quot;60000&quot;
        destination-type=&quot;queue&quot; container-type=&quot;default&quot; connection-factory=&quot;pooledConnectionFactory&quot;
        acknowledge=&quot;auto&quot; concurrency=&quot;2-10&quot; &gt;
        &lt;jms:listener destination=&quot;QUEUE.EMAIL&quot; ref=&quot;mailMessageListener&quot; /&gt;
        &lt;jms:listener destination=&quot;QUEUE.SMS&quot; ref=&quot;smsMessageListener&quot; /&gt;
    &lt;/jms:listener-container&gt;
 
    &lt;bean id=&quot;smsMessageListener&quot;
        class=&quot;org.springframework.jms.listener.adapter.MessageListenerAdapter&quot;&gt;
        &lt;!-- 默认调用方法handleMessage --&gt;
        &lt;property name=&quot;delegate&quot;&gt;
            &lt;bean class=&quot;com.domain.framework.message.sms.listener.SMSMessageListener&quot; /&gt;
        &lt;/property&gt;
        &lt;property name=&quot;defaultListenerMethod&quot; value=&quot;receiveMessage&quot;/&gt;
    &lt;/bean&gt;
     
    &lt;bean id=&quot;mailMessageListener&quot;
        class=&quot;org.springframework.jms.listener.adapter.MessageListenerAdapter&quot;&gt;
        &lt;!-- 默认调用方法handleMessage --&gt;
        &lt;property name=&quot;delegate&quot;&gt;
            &lt;bean class=&quot;com.domain.framework.message.mail.listener.EmailMessageListener&quot; /&gt;
        &lt;/property&gt;
        &lt;property name=&quot;defaultListenerMethod&quot; value=&quot;receiveMessage&quot;/&gt;
    &lt;/bean&gt;
 
&lt;/beans&gt;
</code></pre>

<h2 id="配置说明">配置说明</h2>

<ol>
<li>trustAllPackages

<ol>
<li>等于false时，在做object序列化时会有Class Not Found Exception：This class is not trusted to be serialized as ObjectMessage payload异常抛出，是因为activemq服务器默认是不接受object序列化对象，需要配置白名单（接受的object对象class全名）</li>
<li>等于true时关闭验证</li>
<li>传输对象安全说明: <a href="http://activemq.apache.org/objectmessage.htm" title="http://activemq.apache.org/objectmessage.htm">http://activemq.apache.org/objectmessage.htm</a></li>
</ol></li>
<li>useAsyncSend

<ol>
<li>开启异步消息发送，主要是一个性能上的提升从而提升消息吞吐量，但是不能拿到消息发送后的回执消息，消息不会丢失</li>
<li>异步发送的说明：<a href="http://activemq.apache.org/async-sends.html" title="http://activemq.apache.org/async-sends.html">http://activemq.apache.org/async-sends.html</a></li>
</ol></li>

<li><p>executor corePoolSize</p>

<ol>
<li>该值的配置需要结合listener的个数和concurrency的数量去灵活配置
<br /></li>
</ol>

<p>案例分析</p>

<pre><code>&lt;bean id=&quot;queueMessageExecutor&quot;
    class=&quot;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&quot;&gt;
    &lt;property name=&quot;corePoolSize&quot; value=&quot;2&quot; /&gt;
    &lt;property name=&quot;maxPoolSize&quot; value=&quot;10&quot; /&gt;
    &lt;property name=&quot;daemon&quot; value=&quot;true&quot; /&gt;
    &lt;property name=&quot;keepAliveSeconds&quot; value=&quot;120&quot; /&gt;
&lt;/bean&gt;
&lt;jms:listener-container task-executor=&quot;queueMessageExecutor&quot; receive-timeout=&quot;60000&quot;
    destination-type=&quot;queue&quot; container-type=&quot;default&quot; connection-factory=&quot;pooledConnectionFactory&quot;
    acknowledge=&quot;auto&quot; concurrency=&quot;2-10&quot; &gt;
    &lt;jms:listener destination=&quot;QUEUE.EMAIL&quot; ref=&quot;mailMessageListener&quot; /&gt;
    &lt;jms:listener destination=&quot;QUEUE.SMS&quot; ref=&quot;smsMessageListener&quot; /&gt;
&lt;/jms:listener-container&gt;
</code></pre>

<p>项目中有2个listener并且项目希望启动初始每个listener启动2个consumer最大10个consumer，如果e x e cutor corePoolSize配置为2，那么启动后只会给一个listener分配2个consumer，因为e x e cutor pool的初始配置数量不够，见下图</p>

<p><img src="https://ningyu1.github.io/site/img/activemq/1.jpg" alt="activemq1" />
修改corePoolSize之后</p>

<pre><code>&lt;property name=&quot;corePoolSize&quot; value=&quot;5&quot; /&gt;
</code></pre>

<p><img src="https://ningyu1.github.io/site/img/activemq/2.jpg" alt="activemq2" /></p></li>

<li><p>executor daemon</p>

<ol>
<li>是否创建守护线程</li>
<li>设置为true时，在应用程序在紧急关闭时，任然会执行没有完成的runtime线程</li>
</ol></li>

<li><p>jms:listener-container</p>

<ol>
<li>由于不支持propertyPlaceholder替换，因此这些参数值写在spring-mq.xml文件中，参考值：mq.properties文件中</li>
<li>destination-type 目标类型（QUEUE, TOPIC, DURABLETOPIC）</li>
<li>acknowledge 消息确认方式（auto、client、dups-ok、transacted）</li>
<li>concurrency listener consumer个数</li>
</ol></li>

<li><p>message-converter</p>

<ol>
<li>消息转换器，我们这里不配置特殊的转换器，使用Spring提供的org.springframework.jms.support.converter.SimpleMessageConverter.SimpleMessageConverter()简单转换器，支持对象（String、byte[]、Map、Serializable）</li>
<li>结合org.springframework.jms.listener.adapter.MessageListenerAdapter做接受消息自动转换对象</li>
<li>结合org.springframework.jms.core.JmsTemplate使用convertAndSend系列方法对象转换并发送，实现发送消息自动转换。</li>
<li>我们为什么不使用json做消息转换，因为json转换在反序列话时需要明确序列化Class类型，丢失了消息转换器的通用性。</li>
</ol></li>

<li><p>Listener</p>

<ol>
<li>支持实现JMS接口的类javax.jms.MessageListener，它是一个来自JMS规范的标准化接口，但是你要处理线程。。</li>
<li>支持Spring SessionAwareMessageListener，这是一个Spring特定的接口，提供对JMS会话对象的访问。 这对于请求 - 响应消息传递非常有用。 只需要注意，你必须做自己的异常处理（即，重写handleListenerException方法，这样异常不会丢失）。</li>
<li>支持Spring MessageListenerAdapter，这是一个Spring特定接口，允许特定类型的消息处理。 使用此接口可避免代码中任何特定于JMS的依赖关系。</li>
</ol></li>

<li><p>MessageListenerAdapter</p>

<ol>
<li>可以代理任意POJO类，无需实现JMS接口，任意指定回调方法，并且消息转换内置实现，JMS会话默认封装
使用示例：
消息接收
<br /></li>
</ol>

<pre><code>&lt;bean id=&quot;mailMessageListener&quot;
    class=&quot;org.springframework.jms.listener.adapter.MessageListenerAdapter&quot;&gt;
    &lt;!-- 默认调用方法handleMessage --&gt;
    &lt;property name=&quot;delegate&quot;&gt;
        &lt;bean class=&quot;com.domain.framework.message.mail.listener.EmailMessageListener&quot; /&gt;
    &lt;/property&gt;
    &lt;property name=&quot;defaultListenerMethod&quot; value=&quot;receiveMessage&quot;/&gt;
&lt;/bean&gt;
    
public class EmailMessageListener {
    public void receiveMessage(EmailMessageVo message) {
        ...someing....
    }
}
</code></pre>

<p>消息发送</p>

<pre><code>&lt;bean id=&quot;jmsTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&gt;
    &lt;constructor-arg ref=&quot;pooledConnectionFactory&quot; /&gt;
&lt;/bean&gt;
    
@Component(&quot;emailService&quot;)
public class EmailServiceImpl implements IEmailService {
    @Autowired
    private JmsTemplate jmsTemplate;
         
    @Override
    public void sendEmailMessage(EmailMessageVo message) throws BizException {
        if(message != null) {
            jmsTemplate.convertAndSend(QueueNames.EMAIL, message);
        } else {
            logger.warn(&quot;sendEmailMessage() param[message] is null ,can't send message!&quot;);
        }
    }
}
</code></pre>

<p><strong>ps.上面的示例主要是org.springframework.jms.core.JmsTemplate与org.springframework.jms.listener.adapter.MessageListenerAdapter和业务的POJO做消费者的一个结合使用示例，无需关注序列化，发送与接受对象直接使用业务POJO</strong></p></li>

<li><p>Q名称的命名规则</p>

<ol>
<li>名称我们采用大写字母，多个单词之间分隔符使用“.”,例如：QUEUE.XXX、TOPIC.XXX</li>
<li>根据产品线或项目名称增加namespace，例如：APP1.QUEUE.XXX、APP2.QUEUE.XXX</li>
</ol></li>

<li><p>Active MQ包使用说明</p>

<ol>
<li>不要使用activemq-all这个包，这个包打包了依赖（pool源码，spring源码，log4j源码，jms源码），会跟我们的日志框架产生冲突</li>
<li>我们使用activemq-pool、activemq-client、activemq-broker、spring-jms去替换上面的activemq-all包</li>
</ol>

<p><img src="https://ningyu1.github.io/site/img/activemq/3.jpg" alt="activemq3" /></p></li>
</ol>

<p><strong>Spring+Activemq使用配置非常灵活，我们不拘泥于一种形式，如果有更好的经验尽管提出来我们共同努力和进步。</strong></p>

    </div>

<div class="meta">
    
    
    <span class="comments"><a href="https://ningyu1.github.io/site/post/06-activemq-settings/#disqus_thread">Comments</a></span>
    
    
</div>
</article>

  <article class="post">
    <h2 class="title"> 
        <a href="https://ningyu1.github.io/site/post/07-maven-settings/">Maven settings.xml详解</a>
    </h2>
    <div class="entry-content">
    <div class="meta">
        <div class="date">Published on: <time datetime='2017-05-10T10:05:37.000&#43;00:00' itemprop="datePublished">2017-05-10</time>
</div>
        <div class="tags">Tags: 

<a href="https://ningyu1.github.io/site/tags/maven">Maven</a>

<a href="https://ningyu1.github.io/site/tags/settings">Settings</a>


</div>
    </div>
        

<h2 id="settings-xml有什么用">settings.xml有什么用</h2>

<p>从settings.xml的文件名就可以看出，它是用来设置maven参数的配置文件。并且，settings.xml是maven的全局配置文件。而pom.xml文件是所在项目的局部配置。</p>

<p>Settings.xml中包含类似本地仓储位置、修改远程仓储服务器、认证信息等配置。</p>

<h2 id="settings-xml文件位置">settings.xml文件位置</h2>

<p>全局配置: ${M2_HOME}/conf/settings.xml</p>

<p>用户配置: user.home/.m2/settings.xmlnote：用户配置优先于全局配置。user.home/.m2/settings.xmlnote：用户配置优先于全局配置。{user.home} 和和所有其他系统属性只能在3.0+版本上使用。请注意windows和Linux使用变量的区别。</p>

<h2 id="配置优先级">配置优先级</h2>

<p>需要注意的是：局部配置优先于全局配置。</p>

<p>配置优先级从高到低：pom.xml&gt; user settings &gt; global settings</p>

<p>如果这些文件同时存在，在应用配置时，会合并它们的内容，如果有重复的配置，优先级高的配置会覆盖优先级低的。</p>

<p><strong>ps.修改了配置文件最好吧cmd和eclipse重开一下</strong></p>

<h2 id="settings-xml元素详解">settings.xml元素详解</h2>

<h3 id="顶级元素概览">顶级元素概览</h3>

<p>下面列举了<code>settings.xml</code>中的顶级元素</p>

<pre><code>&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;      xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0                          https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;
  &lt;localRepository/&gt;
  &lt;interactiveMode/&gt;
  &lt;usePluginRegistry/&gt;
  &lt;offline/&gt;
  &lt;pluginGroups/&gt;
  &lt;servers/&gt;
  &lt;mirrors/&gt;
  &lt;proxies/&gt;
  &lt;profiles/&gt;
  &lt;activeProfiles/&gt;
&lt;/settings&gt;
</code></pre>

<h3 id="localrepository">LocalRepository</h3>

<p>作用：该值表示构建系统本地仓库的路径。</p>

<p>其默认值：~/.m2/repository。
<code>&lt;localRepository&gt;${user.home}/.m2/repository&lt;/localRepository&gt;</code></p>

<h3 id="interactivemode">InteractiveMode</h3>

<p>作用：表示maven是否需要和用户交互以获得输入。</p>

<p>如果maven需要和用户交互以获得输入，则设置成true，反之则应为false。默认为true。
<code>&lt;interactiveMode&gt;true&lt;/interactiveMode&gt;</code></p>

<h3 id="usepluginregistry">UsePluginRegistry</h3>

<p>作用：maven是否需要使用plugin-registry.xml文件来管理插件版本。</p>

<p>如果需要让maven使用文件~/.m2/plugin-registry.xml来管理插件版本，则设为true。默认为false。
<code>&lt;usePluginRegistry&gt;false&lt;/usePluginRegistry&gt;</code></p>

<h3 id="offline">Offline</h3>

<p>作用：表示maven是否需要在离线模式下运行。</p>

<p>如果构建系统需要在离线模式下运行，则为true，默认为false。</p>

<p>当由于网络设置原因或者安全因素，构建服务器不能连接远程仓库的时候，该配置就十分有用。
<code>&lt;offline&gt;false&lt;/offline&gt;</code></p>

<h3 id="plugingroups">PluginGroups</h3>

<p>作用：当插件的组织id（groupId）没有显式提供时，供搜寻插件组织Id（groupId）的列表。</p>

<p>该元素包含一个pluginGroup元素列表，每个子元素包含了一个组织Id（groupId）。</p>

<p>当我们使用某个插件，并且没有在命令行为其提供组织Id（groupId）的时候，Maven就会使用该列表。默认情况下该列表包含了org.apache.maven.plugins和org.codehaus.mojo。</p>

<pre><code>&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0
                      https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;
  ...
  &lt;pluginGroups&gt;
    &lt;!--plugin的组织Id（groupId） --&gt;
    &lt;pluginGroup&gt;org.codehaus.mojo&lt;/pluginGroup&gt;
  &lt;/pluginGroups&gt;
  ...
&lt;/settings&gt;
</code></pre>

<h3 id="servers">Servers</h3>

<p>作用：一般，仓库的下载和部署是在pom.xml文件中的repositories和distributionManagement元素中定义的。然而，一般类似用户名、密码（有些仓库访问是需要安全认证的）等信息不应该在pom.xml文件中配置，这些信息可以配置在settings.xml中。</p>

<pre><code>&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0
                      https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;
  ...
  &lt;!--配置服务端的一些设置。一些设置如安全证书不应该和pom.xml一起分发。这种类型的信息应该存在于构建服务器上的settings.xml文件中。 --&gt;
  &lt;servers&gt;
    &lt;!--服务器元素包含配置服务器时需要的信息 --&gt;
    &lt;server&gt;
      &lt;!--这是server的id（注意不是用户登陆的id），该id与distributionManagement中repository元素的id相匹配。 --&gt;
      &lt;id&gt;server001&lt;/id&gt;
      &lt;!--鉴权用户名。鉴权用户名和鉴权密码表示服务器认证所需要的登录名和密码。 --&gt;
      &lt;username&gt;my_login&lt;/username&gt;
      &lt;!--鉴权密码 。鉴权用户名和鉴权密码表示服务器认证所需要的登录名和密码。密码加密功能已被添加到2.1.0 +。详情请访问密码加密页面 --&gt;
      &lt;password&gt;my_password&lt;/password&gt;
      &lt;!--鉴权时使用的私钥位置。和前两个元素类似，私钥位置和私钥密码指定了一个私钥的路径（默认是${user.home}/.ssh/id_dsa）以及如果需要的话，一个密语。将来passphrase和password元素可能会被提取到外部，但目前它们必须在settings.xml文件以纯文本的形式声明。 --&gt;
      &lt;privateKey&gt;${usr.home}/.ssh/id_dsa&lt;/privateKey&gt;
      &lt;!--鉴权时使用的私钥密码。 --&gt;
      &lt;passphrase&gt;some_passphrase&lt;/passphrase&gt;
      &lt;!--文件被创建时的权限。如果在部署的时候会创建一个仓库文件或者目录，这时候就可以使用权限（permission）。这两个元素合法的值是一个三位数字，其对应了unix文件系统的权限，如664，或者775。 --&gt;
      &lt;filePermissions&gt;664&lt;/filePermissions&gt;
      &lt;!--目录被创建时的权限。 --&gt;
      &lt;directoryPermissions&gt;775&lt;/directoryPermissions&gt;
    &lt;/server&gt;
  &lt;/servers&gt;
  ...
&lt;/settings&gt;
</code></pre>

<h3 id="mirrors">Mirrors</h3>

<p>作用：为仓库列表配置的下载镜像列表。</p>

<pre><code>&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0
                      https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;
  ...
  &lt;mirrors&gt;
    &lt;!-- 给定仓库的下载镜像。 --&gt;
    &lt;mirror&gt;
      &lt;!-- 该镜像的唯一标识符。id用来区分不同的mirror元素。 --&gt;
      &lt;id&gt;planetmirror.com&lt;/id&gt;
      &lt;!-- 镜像名称 --&gt;
      &lt;name&gt;PlanetMirror Australia&lt;/name&gt;
      &lt;!-- 该镜像的URL。构建系统会优先考虑使用该URL，而非使用默认的服务器URL。 --&gt;
      &lt;url&gt;http://downloads.planetmirror.com/pub/maven2&lt;/url&gt;
      &lt;!-- 被镜像的服务器的id。例如，如果我们要设置了一个Maven中央仓库（http://repo.maven.apache.org/maven2/）的镜像，就需要将该元素设置成central。这必须和中央仓库的id central完全一致。 --&gt;
      &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;
    &lt;/mirror&gt;
  &lt;/mirrors&gt;
  ...
&lt;/settings&gt;
</code></pre>

<h3 id="proxies">Proxies</h3>

<p>作用：用来配置不同的代理。</p>

<pre><code>&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0
                      https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;
  ...
  &lt;proxies&gt;
    &lt;!--代理元素包含配置代理时需要的信息 --&gt;
    &lt;proxy&gt;
      &lt;!--代理的唯一定义符，用来区分不同的代理元素。 --&gt;
      &lt;id&gt;myproxy&lt;/id&gt;
      &lt;!--该代理是否是激活的那个。true则激活代理。当我们声明了一组代理，而某个时候只需要激活一个代理的时候，该元素就可以派上用处。 --&gt;
      &lt;active&gt;true&lt;/active&gt;
      &lt;!--代理的协议。 协议://主机名:端口，分隔成离散的元素以方便配置。 --&gt;
      &lt;protocol&gt;http&lt;/protocol&gt;
      &lt;!--代理的主机名。协议://主机名:端口，分隔成离散的元素以方便配置。 --&gt;
      &lt;host&gt;proxy.somewhere.com&lt;/host&gt;
      &lt;!--代理的端口。协议://主机名:端口，分隔成离散的元素以方便配置。 --&gt;
      &lt;port&gt;8080&lt;/port&gt;
      &lt;!--代理的用户名，用户名和密码表示代理服务器认证的登录名和密码。 --&gt;
      &lt;username&gt;proxyuser&lt;/username&gt;
      &lt;!--代理的密码，用户名和密码表示代理服务器认证的登录名和密码。 --&gt;
      &lt;password&gt;somepassword&lt;/password&gt;
      &lt;!--不该被代理的主机名列表。该列表的分隔符由代理服务器指定；例子中使用了竖线分隔符，使用逗号分隔也很常见。 --&gt;
      &lt;nonProxyHosts&gt;*.google.com|ibiblio.org&lt;/nonProxyHosts&gt;
    &lt;/proxy&gt;
  &lt;/proxies&gt;
  ...
&lt;/settings&gt;
</code></pre>

<h3 id="profiles">Profiles</h3>

<p>作用：根据环境参数来调整构建配置的列表。</p>

<p>settings.xml中的profile元素是pom.xml中profile元素的裁剪版本。</p>

<p>它包含了id、activation、repositories、pluginRepositories和 properties元素。这里的profile元素只包含这五个子元素是因为这里只关心构建系统这个整体（这正是settings.xml文件的角色定位），而非单独的项目对象模型设置。如果一个settings.xml中的profile被激活，它的值会覆盖任何其它定义在pom.xml中带有相同id的profile。</p>

<pre><code>&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0
                      https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;
  ...
  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;!-- profile的唯一标识 --&gt;
      &lt;id&gt;test&lt;/id&gt;
      &lt;!-- 自动触发profile的条件逻辑 --&gt;
      &lt;activation /&gt;
      &lt;!-- 扩展属性列表 --&gt;
      &lt;properties /&gt;
      &lt;!-- 远程仓库列表 --&gt;
      &lt;repositories /&gt;
      &lt;!-- 插件仓库列表 --&gt;
      &lt;pluginRepositories /&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;
  ...
&lt;/settings&gt;
</code></pre>

<h3 id="activation">Activation</h3>

<p>作用：自动触发profile的条件逻辑。</p>

<p>如pom.xml中的profile一样，profile的作用在于它能够在某些特定的环境中自动使用某些特定的值；这些环境通过activation元素指定。</p>

<p>activation元素并不是激活profile的唯一方式。settings.xml文件中的activeProfile元素可以包含profile的id。profile也可以通过在命令行，使用-P标记和逗号分隔的列表来显式的激活（如，-P test）。</p>

<pre><code>&lt;activation&gt;
  &lt;!--profile默认是否激活的标识 --&gt;
  &lt;activeByDefault&gt;false&lt;/activeByDefault&gt;
  &lt;!--当匹配的jdk被检测到，profile被激活。例如，1.4激活JDK1.4，1.4.0_2，而!1.4激活所有版本不是以1.4开头的JDK。 --&gt;
  &lt;jdk&gt;1.5&lt;/jdk&gt;
  &lt;!--当匹配的操作系统属性被检测到，profile被激活。os元素可以定义一些操作系统相关的属性。 --&gt;
  &lt;os&gt;
    &lt;!--激活profile的操作系统的名字 --&gt;
    &lt;name&gt;Windows XP&lt;/name&gt;
    &lt;!--激活profile的操作系统所属家族(如 'windows') --&gt;
    &lt;family&gt;Windows&lt;/family&gt;
    &lt;!--激活profile的操作系统体系结构 --&gt;
    &lt;arch&gt;x86&lt;/arch&gt;
    &lt;!--激活profile的操作系统版本 --&gt;
    &lt;version&gt;5.1.2600&lt;/version&gt;
  &lt;/os&gt;
  &lt;!--如果Maven检测到某一个属性（其值可以在POM中通过${name}引用），其拥有对应的name = 值，Profile就会被激活。如果值字段是空的，那么存在属性名称字段就会激活profile，否则按区分大小写方式匹配属性值字段 --&gt;
  &lt;property&gt;
    &lt;!--激活profile的属性的名称 --&gt;
    &lt;name&gt;mavenVersion&lt;/name&gt;
    &lt;!--激活profile的属性的值 --&gt;
    &lt;value&gt;2.0.3&lt;/value&gt;
  &lt;/property&gt;
  &lt;!--提供一个文件名，通过检测该文件的存在或不存在来激活profile。missing检查文件是否存在，如果不存在则激活profile。另一方面，exists则会检查文件是否存在，如果存在则激活profile。 --&gt;
  &lt;file&gt;
    &lt;!--如果指定的文件存在，则激活profile。 --&gt;
    &lt;exists&gt;${basedir}/file2.properties&lt;/exists&gt;
    &lt;!--如果指定的文件不存在，则激活profile。 --&gt;
    &lt;missing&gt;${basedir}/file1.properties&lt;/missing&gt;
  &lt;/file&gt;
&lt;/activation&gt;
</code></pre>

<p><strong>注：在maven工程的pom.xml所在目录下执行mvn help:active-profiles命令可以查看中央仓储的profile是否在工程中生效。</strong></p>

<h3 id="properties">properties</h3>

<p>作用：对应profile的扩展属性列表。</p>

<p>maven属性和ant中的属性一样，可以用来存放一些值。这些值可以在pom.xml中的任何地方使用标记${X}来使用，这里X是指属性的名称。属性有五种不同的形式，并且都能在settings.xml文件中访问。</p>

<pre><code>&lt;!-- 
  1. env.X: 在一个变量前加上&quot;env.&quot;的前缀，会返回一个shell环境变量。例如,&quot;env.PATH&quot;指代了$path环境变量（在Windows上是%PATH%）。 
  2. project.x：指代了POM中对应的元素值。例如: &lt;project&gt;&lt;version&gt;1.0&lt;/version&gt;&lt;/project&gt;通过${project.version}获得version的值。 
  3. settings.x: 指代了settings.xml中对应元素的值。例如：&lt;settings&gt;&lt;offline&gt;false&lt;/offline&gt;&lt;/settings&gt;通过 ${settings.offline}获得offline的值。 
  4. Java System Properties: 所有可通过java.lang.System.getProperties()访问的属性都能在POM中使用该形式访问，例如 ${java.home}。 
  5. x: 在&lt;properties/&gt;元素中，或者外部文件中设置，以${someVar}的形式使用。
 --&gt;
&lt;properties&gt;
  &lt;user.install&gt;${user.home}/our-project&lt;/user.install&gt;
&lt;/properties&gt;
</code></pre>

<p><strong>注：如果该profile被激活，则可以在pom.xml中使用${user.install}。</strong></p>

<h3 id="repositories">Repositories</h3>

<p>作用：远程仓库列表，它是maven用来填充构建系统本地仓库所使用的一组远程仓库。</p>

<pre><code>&lt;repositories&gt;
  &lt;!--包含需要连接到远程仓库的信息 --&gt;
  &lt;repository&gt;
    &lt;!--远程仓库唯一标识 --&gt;
    &lt;id&gt;codehausSnapshots&lt;/id&gt;
    &lt;!--远程仓库名称 --&gt;
    &lt;name&gt;Codehaus Snapshots&lt;/name&gt;
    &lt;!--如何处理远程仓库里发布版本的下载 --&gt;
    &lt;releases&gt;
      &lt;!--true或者false表示该仓库是否为下载某种类型构件（发布版，快照版）开启。 --&gt;
      &lt;enabled&gt;false&lt;/enabled&gt;
      &lt;!--该元素指定更新发生的频率。Maven会比较本地POM和远程POM的时间戳。这里的选项是：always（一直），daily（默认，每日），interval：X（这里X是以分钟为单位的时间间隔），或者never（从不）。 --&gt;
      &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;
      &lt;!--当Maven验证构件校验文件失败时该怎么做-ignore（忽略），fail（失败），或者warn（警告）。 --&gt;
      &lt;checksumPolicy&gt;warn&lt;/checksumPolicy&gt;
    &lt;/releases&gt;
    &lt;!--如何处理远程仓库里快照版本的下载。有了releases和snapshots这两组配置，POM就可以在每个单独的仓库中，为每种类型的构件采取不同的策略。例如，可能有人会决定只为开发目的开启对快照版本下载的支持。参见repositories/repository/releases元素 --&gt;
    &lt;snapshots&gt;
      &lt;enabled /&gt;
      &lt;updatePolicy /&gt;
      &lt;checksumPolicy /&gt;
    &lt;/snapshots&gt;
    &lt;!--远程仓库URL，按protocol://hostname/path形式 --&gt;
    &lt;url&gt;http://snapshots.maven.codehaus.org/maven2&lt;/url&gt;
    &lt;!--用于定位和排序构件的仓库布局类型-可以是default（默认）或者legacy（遗留）。Maven 2为其仓库提供了一个默认的布局；然而，Maven 1.x有一种不同的布局。我们可以使用该元素指定布局是default（默认）还是legacy（遗留）。 --&gt;
    &lt;layout&gt;default&lt;/layout&gt;
  &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre>

<h3 id="pluginrepositories">pluginRepositories</h3>

<p>作用：发现插件的远程仓库列表。</p>

<p>和repository类似，只是repository是管理jar包依赖的仓库，pluginRepositories则是管理插件的仓库。</p>

<p>maven插件是一种特殊类型的构件。由于这个原因，插件仓库独立于其它仓库。pluginRepositories元素的结构和repositories元素的结构类似。每个pluginRepository元素指定一个Maven可以用来寻找新插件的远程地址。</p>

<pre><code>&lt;pluginRepositories&gt;
  &lt;!-- 包含需要连接到远程插件仓库的信息.参见profiles/profile/repositories/repository元素的说明 --&gt;
  &lt;pluginRepository&gt;
    &lt;releases&gt;
      &lt;enabled /&gt;
      &lt;updatePolicy /&gt;
      &lt;checksumPolicy /&gt;
    &lt;/releases&gt;
    &lt;snapshots&gt;
      &lt;enabled /&gt;
      &lt;updatePolicy /&gt;
      &lt;checksumPolicy /&gt;
    &lt;/snapshots&gt;
    &lt;id /&gt;
    &lt;name /&gt;
    &lt;url /&gt;
    &lt;layout /&gt;
  &lt;/pluginRepository&gt;
&lt;/pluginRepositories&gt;
</code></pre>

<h3 id="activeprofiles">ActiveProfiles</h3>

<p>作用：手动激活profiles的列表，按照profile被应用的顺序定义activeProfile。</p>

<p>该元素包含了一组activeProfile元素，每个activeProfile都含有一个profile id。任何在activeProfile中定义的profile id，不论环境设置如何，其对应的 profile都会被激活。如果没有匹配的profile，则什么都不会发生。</p>

<p>例如，env-test是一个activeProfile，则在pom.xml（或者profile.xml）中对应id的profile会被激活。如果运行过程中找不到这样一个profile，Maven则会像往常一样运行。</p>

<pre><code>&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0
                      https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;
  ...
  &lt;activeProfiles&gt;
    &lt;!-- 要激活的profile id --&gt;
    &lt;activeProfile&gt;env-test&lt;/activeProfile&gt;
  &lt;/activeProfiles&gt;
  ...
&lt;/settings&gt;
</code></pre>

    </div>

<div class="meta">
    
    
    <span class="comments"><a href="https://ningyu1.github.io/site/post/07-maven-settings/#disqus_thread">Comments</a></span>
    
    
</div>
</article>

  <article class="post">
    <h2 class="title"> 
        <a href="https://ningyu1.github.io/site/post/01-restful-design-specifications/">RESTful设计规范</a>
    </h2>
    <div class="entry-content">
    <div class="meta">
        <div class="date">Published on: <time datetime='2017-02-21T11:58:19.000&#43;00:00' itemprop="datePublished">2017-02-21</time>
</div>
        <div class="tags">Tags: 

<a href="https://ningyu1.github.io/site/tags/restful">RESTful</a>


</div>
    </div>
        

<h1 id="一-摘要-abstract">一、 摘要（Abstract）</h1>

<p>RESTful API 已经非常成熟，也得到了大家的认可。我们按照 <a href="https://martinfowler.com/articles/richardsonMaturityModel.html" title="Richardson Maturity Model">Richardson Maturity Model</a> 对 REST 评价的模型，规范基于 level2 来设计</p>

<h1 id="二-版本-versioning">二、版本（Versioning）</h1>

<p>API的版本号放入URL。例如：</p>

<pre><code>https://api.jiuyescm.com/v1/
https://api.jiuyescm.com/v1.2/
</code></pre>

<h1 id="三-资源-路径-endpoint">三、资源、路径（Endpoint）</h1>

<p>路径，API的具体地址。在REST中，每个地址都代表一个具体的资源（<code>Resource</code>）约定如下：</p>

<ul>
<li>路径仅表示资源的路径（位置），尽量不要有actions操作（一些特殊的<code>actions</code>操作除外）</li>
<li>路径以 复数（名词） 进行命名资源，不管返回单个或者多个资源。</li>
<li>使用 小写字母、数字以及下划线（“_”） 。（下划线是为了区分多个单词，如user_name）</li>

<li><p>资源的路径从父到子依次如：</p>

<pre><code>/{resource}/{resource_id}/{sub_resource}/{sub_resource_id}/{sub_resource_property}
</code></pre></li>

<li><p>使用 <code>?</code> 来进行资源的过滤、搜索以及分页等</p></li>

<li><p>使用版本号，且版本号在资源路径之前</p></li>

<li><p>优先使用内容协商来区分表述格式，而不是使用后缀来区分表述格式</p></li>

<li><p>应该放在一个专用的域名下，如：<code>http：//api.jiuyescm.com</code></p></li>

<li><p>使用SSL</p></li>
</ul>

<p>综上，一个API路径可能会是</p>

<pre><code>https://api.domain.com/v1/{resource}/{resource_id}/{sub_resource}/{sub_resource_id}/{sub_resource_property}
https://api.domain.com /v1/{resource}?page=1&amp;page_size=10
https://api.domain.com /v1/{resource}?name=xx&amp;sortby=name&amp;order=asc
</code></pre>

<h1 id="四-操作-http-actions">四、操作（HTTP Actions）</h1>

<p>用<code>HTTP</code>动词（方法）表示对资源的具体操作。常用的<code>HTTP</code>动词有：</p>

<pre><code>GET（SELECT）：从服务器取出资源（一项或多项）
POST（CREATE）：在服务器新建一个资源
PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）  
PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性） 
DELETE（DELETE）：从服务器删除资源
还有两个不常用的HTTP动词
HEAD：获取资源的元数据
OPTIONS：获取信息，关于资源的哪些属性是客户端可以改变的
</code></pre>

<p>下面是一些例子</p>

<pre><code>GET /users：列出所有用户  
POST /users：新建一个用户  
GET /users/{user_id}：获取某个指定用户的信息  
PUT /users/{user_id}：更新某个指定用户的信息（提供该用户的全部信息）  
PATCH /users/{user_id}：更新某个指定用户的信息（提供该用户的部分信息）  
DELETE /users/{user_id}：删除某个用户  
GET /users/{user_id}/resources：列出某个指定用户的所有权限资源  
DELETE /users/{user_id}/resources/{resources_id}：删除某个指定用户的指定权限资源
</code></pre>

<h1 id="五-数据-data-format">五、数据（Data Format）</h1>

<p>数据是对资源的具体描述，分为请求数据和返回数据。约定如下：</p>

<ul>
<li>查询，过滤条件使用query string，例如user?name=xxx</li>
<li>Content body 仅仅用来传输数据</li>
<li>通过Content-Type指定请求与返回的数据格式。其中请求数据还要指定Accept。（我们暂时只使用Json）</li>
<li>数据应该拿来就能用，不应该还要进行转换操作</li>
<li>使用字符串（YYYY-MM-dd hh:mm:ss）格式表达时间字段，例如: 2017-02-20 16:00:00</li>
<li>数据采用UTF-8编码</li>
<li>返回的数据应该尽量简单，响应状态应该包含在响应头中</li>
<li>使用 小写字母、数字以及下划线（“_”） 描述字段，不使用大写描述字段（这个由于使用了一些开源的jar所以这个不强求，比如说pageinfo我们无法修改属性名称）</li>
<li>建议资源中的唯一标识命名为id（这个不强求，有的唯一标识名称确实比较复杂）</li>
<li>属性和字符串值必须使用双引号””（这个json转换默认规则）</li>
<li>建议对每个字段设置默认值（数组型可设置为[],字符串型可设置为””，数值可设置为0，对象可设置为{}）,这一条是为了方便前端/客户端进行判断字段存不存在操作（这样json转换会自动转成相应的字符）</li>
<li>POST操作应该返回新建的资源；PUT/PATCH操作返回更新后的完整的资源；DELETE返回一个空文档；GET返回资源数组或当个资源</li>
<li>为了方便以后的扩展兼容，如果返回的是数组，强烈建议用一个包含如items属性的对象进行包裹，如：</li>
</ul>

<pre><code>{&quot;items&quot;:[{},{}]}
</code></pre>

<p>示例：</p>

<pre><code>POST https://api.domain.com/v1/users
Request
    headers:
        Accept: application/json
        Content-Type: application/json;charset=UTF-8
    body:
     {
            &quot;user_name&quot;: &quot;ZhangSan&quot;,
            &quot;address&quot;: &quot;ujfhysdfsdf&quot;,
             &quot;nick&quot;: &quot;ZS&quot;
     }

Response
    status: 201 Created
    headers:
        Content-Type: application/json;charset=UTF-8
    body:
        {
           &quot;requestId&quot;: sdfsdflkjoiusdf,
           &quot;code&quot;: &quot;&quot;,
            &quot;message&quot;: &quot;&quot;,
            &quot;items&quot;:
                  {
                       &quot;id&quot;:&quot;111&quot;,
                       &quot;user_name&quot;: &quot;HingKwan&quot;,
                       &quot;address&quot;: &quot;ujfhysdfsdf&quot;,
                        &quot;nick&quot;: &quot;ZS&quot;
                  }
        }

</code></pre>

<h1 id="六-安全-security">六、安全（Security）</h1>

<h2 id="调用限制">调用限制</h2>

<p>为了避免请求泛滥，给API设置速度限制很重要。入速度设置之后，可以在HTTP返回头上对返回的信息进行说明，下面是几个必须的返回头（依照twitter的命名规则）</p>

<pre><code>X-Rate-Limit-Limit :当前时间段允许的并发请求数
X-Rate-Limit-Remaining:当前时间段保留的请求数
X-Rate-Limit-Reset:当前时间段剩余秒数
</code></pre>

<p><strong>这个我们一般会在getway中实现</strong></p>

<h2 id="授权校验">授权校验</h2>

<p>RESTful API是无状态的也就是说用户请求的鉴权和cookie以及session无关，每一次请求都应该包含鉴权证明。
可以使用http请求头Authorization设置授权码; 必须使用User-Agent设置客户端信息, 无User-Agent请求头的请求应该被拒绝访问。具体的授权可以采用OAuth2，或者自己定义并实现相关的授权验证机制（基于token）。
<strong>这个我们一般会在getway中实现</strong></p>

<h2 id="错误">错误</h2>

<p>当API返回非2XX的HTTP响应时，应该采用统一的响应信息，格式如：</p>

<pre><code>HTTP/1.1 400 Bad Request
Content-Type: application/json;charset=UTF-8
{
    &quot;code&quot;:&quot;INVALID_ARGUMENT&quot;,
    &quot;message&quot;:&quot;{error message}&quot;,
    &quot;request_id&quot;:&quot;sdfsdfo8lkjsdf&quot;,
    &quot;items&quot;:[],
}
</code></pre>

<ul>
<li>HTTP Header Code：符合HTTP响应的状态码。详细见以下的“状态码”节</li>
<li>code：用来表示某类错误不是具体错误，比如缺少参数等。是对HTTP Header Code的补充，开发团队可以根据自己的需要自己定义</li>
<li>message：错误信息的摘要，应该是对用户处理错误有用的信息</li>
<li>request_id：请求的id，方便开发定位发生错误的请求（可选）</li>
<li>code的定义约定：

<ul>
<li>采用 大写字母命名，字母与字母之间用下划线（”_”） 隔开</li>
<li>code应该用来定义错误类别，而非定义具体的某个错误。</li>
<li>缺少参数使用：MISSING_X</li>
<li>无效参数使用：INVALID_X</li>
<li>逻辑验证错误使用：VALIDATION_X</li>
<li>不存在使用：NO_FOUND_X</li>
</ul></li>
</ul>

<h1 id="七-状态码-status-codes">七、状态码（Status Codes）</h1>

<p>服务器向用户返回的状态码和提示信息，常见的有以下一些（方括号中是该状态码对应的HTTP动词）。</p>

<pre><code>200 OK - [GET/PUT/PATCH/DELETE]：服务器成功返回用户请求的数据，该操作是幂等的（Idempotent）。  
201 Created - [POST/PUT/PATCH]：用户新建或修改数据成功。  
202 Accepted - [*]：表示一个请求已经进入后台排队（异步任务）  
204 No Content - [DELETE]：用户删除数据成功。  
304 Not Modified   - HTTP缓存有效。
400 Invalid Request - [POST/PUT/PATCH]：用户发出的请求有错误，服务器没有进行新建或修改数据的操作，该操作是幂等的。  
401 Unauthorized - [*]：表示用户没有权限（令牌、用户名、密码错误）。  
403 Forbidden - [*] 表示用户得到授权（与401错误相对），但是访问是被禁止的。  
404 Not Found - [*]：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。
405 Method Not Allowed - [*]：该http方法不被允许。  
406 Not Acceptable - [GET]：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。  
410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的。  
415 Unsupported Media Type - [*]：请求类型错误。
422 Unprocesable Entity - [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误。  
429 Too Many Request - [*]：请求过多。
500 Internal Server Error - [*]：服务器发生错误，用户将无法判断发出的请求是否成功。  
503 Service Unavailable - [*]：服务当前无法处理请求。
</code></pre>

<h1 id="八-异常规范-exceptions">八、异常规范（Exceptions）</h1>

<ul>
<li>Controller中try catch住service的异常，再转换为restful中需要抛出的异常</li>
</ul>

<pre><code>try {
    Long id = userService.save(vo);
    vo.setId(id);
} catch(BizException e) {
    throw new UnprocesableEntityException(ErrorCode.USER_NAME_EXIST.getCode(), ErrorCode.USER_NAME_EXIST.getMessage());
}
</code></pre>

<ul>
<li>Controller中抛出的异常必须使用spring-mvc-rest包中的异常类，不允许自定义异常，选择需要返回的httpStatus对应的异常</li>
</ul>

<pre><code>#403 [*]：表示得到授权（与401错误相对），但是访问是被禁止的。
com.jiuyescm.spring.mvc.rest.exception.ForbiddenException

#401 [GET]：用户请求的资源被永久删除，且不会再得到的。
com.jiuyescm.spring.mvc.rest.exception.GoneException

#400 [POST/PUT/PATCH]：用户发出的请求有错误（常用在请求必要的参数错误上），服务器没有进行新建或修改数据的操作，该操作是幂等的。
com.jiuyescm.spring.mvc.rest.exception.InvalidRequestException

#406 [GET]：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）或（请求参数需要数字，用户传入字符串）
com.jiuyescm.spring.mvc.rest.exception.NotAcceptableException

#404 [*]：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。
com.jiuyescm.spring.mvc.rest.exception.NotFoundException

#401 [*]：表示没有权限（令牌、用户名、密码错误，或任何资源没有权限）
com.jiuyescm.spring.mvc.rest.exception.UnauthorizedException

#422 [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误。
com.jiuyescm.spring.mvc.rest.exception.UnprocesableEntityException
</code></pre>

<ul>
<li>抛出的异常中需要传入异常编码和异常信息，异常编码定义遵循上面 《安全中错误编码规范》</li>
</ul>

<pre><code>&quot;MESSING_ID&quot;, &quot;缺少参数：id&quot;
&quot;MESSING_NAME&quot;, &quot;缺少参数：name&quot;
&quot;MESSING_ADDRESS&quot;, &quot;缺少参数：address&quot;
&quot;USER_NAME_EXIST&quot;, &quot;用户名已存在&quot;
&quot;USER_NOT_FOUND&quot;, &quot;用户名不存在&quot;
</code></pre>

<ul>
<li>常用的错误编码、异常、httpStatus对应关系</li>
</ul>

<pre><code>&quot;MESSING_ID&quot;, &quot;缺少参数：id&quot;、InvalidRequestException、400
&quot;MESSING_NAME&quot;, &quot;缺少参数：name&quot;、InvalidRequestException、400
&quot;MESSING_ADDRESS&quot;, &quot;缺少参数：address&quot;、InvalidRequestException、400
&quot;USER_NAME_EXIST&quot;, &quot;用户名已存在&quot;、UnprocesableEntityException、422
&quot;USER_NOT_FOUND&quot;, &quot;用户名不存在&quot;、NotFoundException、404
</code></pre>

<h1 id="九-示例-example">九、示例（Example）</h1>

<p>采用user提供的示例代码</p>

<h2 id="post-users">POST /users</h2>

<p>Resource
<code>POST /v1/users</code></p>

<p>POST Parameters
Endpoint requires：</p>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>name</td>
<td align="center">String</td>
<td align="right">用户名称</td>
</tr>

<tr>
<td>address</td>
<td align="center">String</td>
<td align="right">用户住址</td>
</tr>
</tbody>
</table>

<p>and accepts a few other parameters listed below.</p>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>remark</td>
<td align="center">String</td>
<td align="right">描述信息</td>
</tr>
</tbody>
</table>

<p>Example</p>

<pre><code>{
    &quot;name&quot;:&quot;tuyir&quot;,
    &quot;address&quot;:&quot;sdflkjsdf&quot;,
    &quot;remark&quot;:&quot;sdfoiu&quot;
}
</code></pre>

<p>Response
Status-Code: 201 Created</p>

<pre><code>{
  &quot;code&quot;: &quot;&quot;,
  &quot;message&quot;: null,
  &quot;items&quot;: {
    &quot;id&quot;: 27,
    &quot;name&quot;: &quot;tuyir&quot;,
    &quot;address&quot;: &quot;sdflkjsdf&quot;,
    &quot;remark&quot;: &quot;sdfoiu&quot;
  }
}
</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>code</td>
<td align="center">String</td>
<td align="right">错误编码</td>
</tr>

<tr>
<td>message</td>
<td align="center">String</td>
<td align="right">错误描述</td>
</tr>

<tr>
<td>Items</td>
<td align="center">Objec</td>
<td align="right">t    返回结果</td>
</tr>

<tr>
<td>id</td>
<td align="center">Long</td>
<td align="right">唯一标识</td>
</tr>

<tr>
<td>name</td>
<td align="center">String</td>
<td align="right">用户名称</td>
</tr>

<tr>
<td>address</td>
<td align="center">String</td>
<td align="right">家庭住址</td>
</tr>

<tr>
<td>remark</td>
<td align="center">String</td>
<td align="right">描述信息</td>
</tr>
</tbody>
</table>

<p>Error response
Status-Code: 400 Bad Request</p>

<pre><code>{
  &quot;code&quot;: &quot;MESSING_NAME&quot;,
  &quot;message&quot;: “缺少参数：name”,
  &quot;items&quot;: {}
}
</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>code</td>
<td align="center">String</td>
<td align="right">错误编码</td>
</tr>

<tr>
<td>message</td>
<td align="center">String</td>
<td align="right">错误描述</td>
</tr>

<tr>
<td>Items</td>
<td align="center">Object</td>
<td align="right">返回结果</td>
</tr>
</tbody>
</table>

<p>HTTP Error Codes</p>

<table>
<thead>
<tr>
<th>HTTP Status</th>
<th align="center">Code</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>400</td>
<td align="center">MESSING_NAME</td>
<td align="right">缺少参数：name</td>
</tr>

<tr>
<td>400</td>
<td align="center">MESSING_ADDRESS</td>
<td align="right">缺少参数：address</td>
</tr>

<tr>
<td>422</td>
<td align="center">USER_NAME_EXIST</td>
<td align="right">用户名已存在</td>
</tr>

<tr>
<td>500</td>
<td align="center">INTERNAL_SERVER_ERROR</td>
<td align="right">未知的错误</td>
</tr>
</tbody>
</table>

<h2 id="delete-users-user-id">DELETE /users/{user_id}</h2>

<p>Resource
<code>DELETE /v1/users/{user_id}</code></p>

<p>Path Parameters</p>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>user_id</td>
<td align="center">Long</td>
<td align="right">用户唯一标识</td>
</tr>
</tbody>
</table>

<p>Query Parameters
None</p>

<p>Example Request</p>

<pre><code>curl –H ‘Content-Type: application/json’\
-X DELETE \
‘https://api.jiuyescm.com/v1/users/111’ 
</code></pre>

<p>Response
Status-Code: 204 No Content</p>

<p>HTTP Error Codes</p>

<table>
<thead>
<tr>
<th>HTTP Status</th>
<th align="center">Code</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>400</td>
<td align="center">MESSING_ID</td>
<td align="right">缺少参数：id</td>
</tr>

<tr>
<td>404</td>
<td align="center">USER_NOT_FOUND</td>
<td align="right">用户不存在</td>
</tr>
</tbody>
</table>

<h2 id="put-users">PUT /users</h2>

<p>Resource
<code>PUT /v1/users</code></p>

<p>PUT Body Parameters
Endpoint requires：</p>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>user_id</td>
<td align="center">Long</td>
<td align="right">用户唯一标识</td>
</tr>

<tr>
<td>user_name</td>
<td align="center">String</td>
<td align="right">用户名称</td>
</tr>

<tr>
<td>address</td>
<td align="center">String</td>
<td align="right">用户住址</td>
</tr>
</tbody>
</table>

<p>and accepts a few other parameters listed below..</p>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>remark</td>
<td align="center">String</td>
<td align="right">描述信息</td>
</tr>
</tbody>
</table>

<p>Example</p>

<pre><code>{
    &quot;user_id&quot;: 12,
    &quot;name&quot;:&quot;tuyir&quot;,
    &quot;address&quot;:&quot;sdflkjsdf&quot;,
    &quot;remark&quot;:&quot;sdfoiu&quot;
}
</code></pre>

<p>Response
Status-Code: 200 OK</p>

<pre><code>{
  &quot;code&quot;: &quot;&quot;,
  &quot;message&quot;: null,
  &quot;items&quot;: {
    &quot;id&quot;: 12,
    &quot;name&quot;: &quot;tuyir&quot;,
    &quot;address&quot;: &quot;sdflkjsdf&quot;,
    &quot;remark&quot;: &quot;sdfoiu&quot;
  }
}
</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>code</td>
<td align="center">String</td>
<td align="right">错误编码</td>
</tr>

<tr>
<td>message</td>
<td align="center">String</td>
<td align="right">错误描述</td>
</tr>

<tr>
<td>Items</td>
<td align="center">Object</td>
<td align="right">返回结果</td>
</tr>

<tr>
<td>id</td>
<td align="center">Long</td>
<td align="right">唯一标识</td>
</tr>

<tr>
<td>name</td>
<td align="center">String</td>
<td align="right">用户名称</td>
</tr>

<tr>
<td>address</td>
<td align="center">String</td>
<td align="right">家庭住址</td>
</tr>

<tr>
<td>remark</td>
<td align="center">String</td>
<td align="right">描述信息</td>
</tr>
</tbody>
</table>

<p>Error response
Status-Code: 400 Bad Request</p>

<pre><code>{
  &quot;code&quot;: &quot;MESSING_NAME&quot;,
  &quot;message&quot;: “缺少参数：name”,
  &quot;items&quot;: {}
}
</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>code</td>
<td align="center">String</td>
<td align="right">错误编码</td>
</tr>

<tr>
<td>message</td>
<td align="center">String</td>
<td align="right">错误描述</td>
</tr>
</tbody>
</table>

<p>HTTP Error Codes</p>

<table>
<thead>
<tr>
<th>HTTP Status</th>
<th align="center">Code</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>code</td>
<td align="center">String</td>
<td align="right">错误编码</td>
</tr>

<tr>
<td>400</td>
<td align="center">MESSING_ID</td>
<td align="right">缺少参数：id</td>
</tr>

<tr>
<td>400</td>
<td align="center">MESSING_NAME</td>
<td align="right">缺少参数：name</td>
</tr>

<tr>
<td>400</td>
<td align="center">MESSING_ADDRESS</td>
<td align="right">缺少参数：address</td>
</tr>

<tr>
<td>422</td>
<td align="center">USER_NAME_EXIST</td>
<td align="right">用户名已存在</td>
</tr>

<tr>
<td>500</td>
<td align="center">INTERNAL_SERVER_ERROR</td>
<td align="right">未知的错误</td>
</tr>
</tbody>
</table>

<h2 id="get-users-user-id">GET /users/{user_id}</h2>

<p>Resource
<code>GET /v1/users/{user_id}</code></p>

<p>Path Parameters</p>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>user_id</td>
<td align="center">Long</td>
<td align="right">用户唯一标识</td>
</tr>
</tbody>
</table>

<p>Example Request</p>

<pre><code>Curl –H 'Content-Type: application/json' \
'https://api.jiuyescm.com/v1/users/12'
</code></pre>

<p>Response
Status-Code: 200 OK</p>

<pre><code>{
  &quot;code&quot;: &quot;&quot;,
  &quot;message&quot;: null,
  &quot;items&quot;: {
    &quot;id&quot;: 12,
    &quot;name&quot;: &quot;tuyir&quot;,
    &quot;address&quot;: &quot;sdflkjsdf&quot;,
    &quot;remark&quot;: &quot;sdfoiu&quot;
  }
}
</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>code</td>
<td align="center">String</td>
<td align="right">错误编码</td>
</tr>

<tr>
<td>message</td>
<td align="center">String</td>
<td align="right">错误描述</td>
</tr>

<tr>
<td>Items</td>
<td align="center">Object</td>
<td align="right">返回结果</td>
</tr>

<tr>
<td>id</td>
<td align="center">String</td>
<td align="right">唯一标识</td>
</tr>

<tr>
<td>name</td>
<td align="center">String</td>
<td align="right">用户名称</td>
</tr>

<tr>
<td>address</td>
<td align="center">String</td>
<td align="right">家庭住址</td>
</tr>

<tr>
<td>remark</td>
<td align="center">String</td>
<td align="right">描述信息</td>
</tr>
</tbody>
</table>

<p>Error response
Status-Code: 404 Bad Request</p>

<pre><code>{
  &quot;code&quot;: &quot; USER_NOT_FOUND&quot;,
  &quot;message&quot;: “用户不存在”,
  &quot;items&quot;: {}
}
</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>code</td>
<td align="center">String</td>
<td align="right">错误编码</td>
</tr>

<tr>
<td>message</td>
<td align="center">String</td>
<td align="right">错误描述</td>
</tr>
</tbody>
</table>

<p>HTTP Error Codes</p>

<table>
<thead>
<tr>
<th>HTTP Status</th>
<th align="center">Code</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>400</td>
<td align="center">MESSING_ID</td>
<td align="right">缺少参数：id</td>
</tr>

<tr>
<td>404</td>
<td align="center">USER_NOT_FOUND</td>
<td align="right">用户不存在</td>
</tr>
</tbody>
</table>

<h2 id="get-users">GET /users</h2>

<p>Resource
<code>GET /v1/users</code></p>

<p>Query Parameters</p>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>name</td>
<td align="center">String</td>
<td align="right">根据用户名称进行查询</td>
</tr>

<tr>
<td>page</td>
<td align="center">int</td>
<td align="right">第几页，不传入默认1</td>
</tr>

<tr>
<td>page_size</td>
<td align="center">int</td>
<td align="right">每页返回多少条结果，不传入默认20</td>
</tr>
</tbody>
</table>

<p>Example Request</p>

<pre><code>Curl –H 'Content-Type: application/json' \
'https://api.jiuyescm.com/v1/users?name=xxx&amp;page=1&amp;page_size=20'
</code></pre>

<p>Response
Status-Code: 200 Success</p>

<pre><code>{
  &quot;code&quot;: &quot;&quot;,
  &quot;message&quot;: &quot;&quot;,
  &quot;items&quot;: {
    &quot;pageNum&quot;: 1,
    &quot;pageSize&quot;: 20,
    &quot;size&quot;: 17,
    &quot;startRow&quot;: 1,
    &quot;endRow&quot;: 17,
    &quot;total&quot;: 17,
    &quot;pages&quot;: 1,
    &quot;list&quot;: [
      {
        &quot;id&quot;: 2,
        &quot;name&quot;: &quot;ningyu1&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 3,
        &quot;name&quot;: &quot;ningyu2&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 4,
        &quot;name&quot;: &quot;ningyu3&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 5,
        &quot;name&quot;: &quot;ningyu4&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 6,
        &quot;name&quot;: &quot;ningyu5&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 7,
        &quot;name&quot;: &quot;8888&quot;,
        &quot;address&quot;: &quot;8888&quot;,
        &quot;remark&quot;: &quot;8888&quot;
      },
      {
        &quot;id&quot;: 8,
        &quot;name&quot;: &quot;444&quot;,
        &quot;address&quot;: &quot;444&quot;,
        &quot;remark&quot;: &quot;444&quot;
      },
      {
        &quot;id&quot;: 9,
        &quot;name&quot;: &quot;ningyu7&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 12,
        &quot;name&quot;: &quot;ningyu9&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 13,
        &quot;name&quot;: &quot;ningyu10&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 17,
        &quot;name&quot;: &quot;ningyu&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: null
      },
      {
        &quot;id&quot;: 20,
        &quot;name&quot;: &quot;9999&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: null
      },
      {
        &quot;id&quot;: 23,
        &quot;name&quot;: &quot;888&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 24,
        &quot;name&quot;: &quot;222&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 25,
        &quot;name&quot;: &quot;222444&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 26,
        &quot;name&quot;: &quot;222444sdf&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      },
      {
        &quot;id&quot;: 27,
        &quot;name&quot;: &quot;tuyir&quot;,
        &quot;address&quot;: &quot;sdflkjsdf&quot;,
        &quot;remark&quot;: &quot;sdfoiu&quot;
      }
    ],
    &quot;firstPage&quot;: 1,
    &quot;prePage&quot;: 0,
    &quot;nextPage&quot;: 0,
    &quot;lastPage&quot;: 1,
    &quot;isFirstPage&quot;: true,
    &quot;isLastPage&quot;: true,
    &quot;hasPreviousPage&quot;: false,
    &quot;hasNextPage&quot;: false,
    &quot;navigatePages&quot;: 8,
    &quot;navigatepageNums&quot;: [
      1
    ]
  }
}
</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>code</td>
<td align="center">String</td>
<td align="right">错误编码</td>
</tr>

<tr>
<td>message</td>
<td align="center">String</td>
<td align="right">错误描述</td>
</tr>

<tr>
<td>Items</td>
<td align="center">Object</td>
<td align="right">返回结果</td>
</tr>

<tr>
<td>id</td>
<td align="center">Long</td>
<td align="right">唯一标识</td>
</tr>

<tr>
<td>name</td>
<td align="center">String</td>
<td align="right">用户名称</td>
</tr>

<tr>
<td>address</td>
<td align="center">String</td>
<td align="right">家庭住址</td>
</tr>

<tr>
<td>remark</td>
<td align="center">String</td>
<td align="right">描述信息</td>
</tr>
</tbody>
</table>

    </div>

<div class="meta">
    
    
    <span class="comments"><a href="https://ningyu1.github.io/site/post/01-restful-design-specifications/#disqus_thread">Comments</a></span>
    
    
</div>
</article>

  <article class="post">
    <h2 class="title"> 
        <a href="https://ningyu1.github.io/site/post/09-dubbo-debug/">Dubbo本地调试最优方式，本地Server端调用本地Client端</a>
    </h2>
    <div class="entry-content">
    <div class="meta">
        <div class="date">Published on: <time datetime='2016-12-20T14:32:41.000&#43;00:00' itemprop="datePublished">2016-12-20</time>
</div>
        <div class="tags">Tags: 

<a href="https://ningyu1.github.io/site/tags/dubbo">dubbo</a>

<a href="https://ningyu1.github.io/site/tags/debug">debug</a>

<a href="https://ningyu1.github.io/site/tags/rpc">rpc</a>


</div>
    </div>
        

<h1 id="分布式应用的调试总是比常规项目开发调试起来要麻烦很多">分布式应用的调试总是比常规项目开发调试起来要麻烦很多。</h1>

<h1 id="我们还在为搞不清自己请求的服务是本地服务还是服务器服务而苦恼吗">我们还在为搞不清自己请求的服务是本地服务还是服务器服务而苦恼吗？</h1>

<h1 id="我们还在为配置文件被修改导致服务器上版本服务不正常而苦恼吗">我们还在为配置文件被修改导致服务器上版本服务不正常而苦恼吗？</h1>

<p>接下来我介绍一个Dubbo在多环境调试的最优调试方式，在介绍之前先说一下我们现在的调试方式。</p>

<p>不好的方式（现在的方式）：
现在本地调试，需要修改DubboServer.xml和DubboClient.xml配置文件</p>

<pre><code>将文件中的
dubbo:registry protocol=&quot;zookeeper&quot; address=&quot;${dubbo.registry}&quot; /&gt;
修改为
&lt;dubbo:registry address=&quot;N/A&quot; /&gt;
</code></pre>

<p>这种方式的弊端：</p>

<ol>
<li>开发总是不注意将修改为address=&ldquo;N/A&rdquo;的文件提交到svn，在其他环境打包run起来，总是没有Export Service。</li>
<li>文件经常被改来改去容易冲突，冲突解决不好容易丢失配置。</li>
<li>无法很好的将本地调试和各环境的相互依赖分离开</li>
</ol>

<p>最优的方式：</p>

<ol>
<li>创建一个properties文件，名字可以随便命名，我命名为：dubbo-local.properties，这个文件可以放在任何地方。该文件不提交到svn，我建议不要放在工程目录里以避免自己提交了都不知道，建议放在用户目录下${user.home}(不知道用户目录的自己去 度娘、谷哥、必硬)</li>

<li><p>dubbo-local.properties文件内容如下：</p>

<pre><code>&lt;!--注册中心变量 --&gt;
dubbo.registry=N/A
     
&lt;!--以下是你们DubboServer.xml中配置的需要Export Service，这里我建议你有几个要Export Service都配置在这里，后面是请求本地的地址
地址格式：dubbo://ip:port，这里需要注意的是，需要修改为自己dubbo服务的端口 --&gt;
com.domain.imprest.api.IImprestRecordService=dubbo://localhost:20812
com.domain.imprest.api.IImprestRequestService=dubbo://localhost:20812
com.domain.imprest.api.IImprestTrackService=dubbo://localhost:20812
com.domain.imprest.api.IImprestWriteoffService=dubbo://localhost:20812
com.domain.imprest.api.IImprestIOCollectService=dubbo://localhost:20812
com.domain.imprest.api.ISystemService=dubbo://localhost:20812
com.domain.imprest.api.IImprestDeptService=dubbo://localhost:20812
</code></pre></li>

<li><p>接下来启动你的Dubbo服务，在启动之前需要添加一下启动参数</p></li>
</ol>

<p><img src="https://ningyu1.github.io/site/img/dubbo/1.png" alt="dubbo1" /></p>

<pre><code>参数：-Ddubbo.properties.file
值：dubbo-local.properties文件的本地地址，绝对地址
</code></pre>

<ol>
<li>接下来启动你的web服务，在启动之前需要添加一下启动参数</li>
</ol>

<p><img src="https://ningyu1.github.io/site/img/dubbo/2.png" alt="dubbo2" /></p>

<pre><code>参数：-Ddubbo.resolve.file
值：dubbo-local.properties文件的本地地址，绝对地址
</code></pre>

<p><strong>ps.当你不想连接本地服务调试时，只需将启动参数去掉即可，无需修改配置文件，让配置文件一直保持清爽干净。
以后你就可以安心的本地调试你的程序了，再也不会因为服务没有Export出去、配置文件被修改而焦头烂额。</strong></p>

    </div>

<div class="meta">
    
    
    <span class="comments"><a href="https://ningyu1.github.io/site/post/09-dubbo-debug/#disqus_thread">Comments</a></span>
    
    
</div>
</article>

  <article class="post">
    <h2 class="title"> 
        <a href="https://ningyu1.github.io/site/post/08-svn-trunk-branche/">分支(branche)开发，主干(trunk)发布</a>
    </h2>
    <div class="entry-content">
    <div class="meta">
        <div class="date">Published on: <time datetime='2016-12-20T14:32:41.000&#43;00:00' itemprop="datePublished">2016-12-20</time>
</div>
        <div class="tags">Tags: 

<a href="https://ningyu1.github.io/site/tags/svn">SVN</a>

<a href="https://ningyu1.github.io/site/tags/trunk">trunk</a>

<a href="https://ningyu1.github.io/site/tags/branche">branche</a>


</div>
    </div>
        <p>主干，分支分开开发模式在使用的时候要注意，主干是不做任何代码修改，只负责merge，修改全在分支上，不管是新功能的开发分支，还是修复bug的分支，如果线上有紧急bug修复，要先容trunk上拉一个bugfix分支出来，修改提交然后在merge到主干上去 ，打包测试发包。</p>

<p>图示：</p>

<p><img src="https://ningyu1.github.io/site/img/svn/1.jpg" alt="svn1" /></p>

<p><strong>注意事项：</strong>
<strong>本地修改的代码不要藏在本地 不提交，如果发现没有地方可以提交，提交会影响版本发布，那就是主干、分支开发模式使用不当，请及时调整</strong></p>

    </div>

<div class="meta">
    
    
    <span class="comments"><a href="https://ningyu1.github.io/site/post/08-svn-trunk-branche/#disqus_thread">Comments</a></span>
    
    
</div>
</article>



  <nav id="pagenavi">
    
    
        <a href="https://ningyu1.github.io/site/page/2/" class="next">Next</a>
    
    <div class="center"><a href="https://ningyu1.github.io/site/archives/index.html">Blog Archives</a></div>
  </nav>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2017
    
    凝雨 - Yun
    . Powered by <a href="http://gohugo.io" target="_blank">Hugo</a> |
    Theme is <a href="https://github.com/wd/hugo-fabric">hugo-fabric</a>, fork from <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a> by <a href="https://wdicc.com">me</a>
</div>

    </footer>
    <script src="https://ningyu1.github.io/site/js/fabric.js"></script>


</div>
</div>
<script src="https://ningyu1.github.io/site/js/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
 
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery);
 
</script>
</body>
</html>
